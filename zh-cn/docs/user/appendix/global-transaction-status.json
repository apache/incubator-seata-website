{
  "filename": "global-transaction-status.md",
  "__html": "<h1>全局事务状态表</h1>\n<p>以db模式举例，global_table是seata的全局事务表。你可以通过观察global_table表中status字段知悉全局事务处于哪个状态</p>\n<table>\n<thead>\n<tr>\n<th>状态</th>\n<th>代码</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>全局事务开始（Begin）</td>\n<td>1</td>\n<td>此状态可以接受新的分支事务注册</td>\n</tr>\n<tr>\n<td>全局事务提交中（Committing）</td>\n<td>2</td>\n<td>这个状态会随时改变</td>\n</tr>\n<tr>\n<td>全局事务提交重试（CommitRetry）</td>\n<td>3</td>\n<td>在提交异常被解决后尝试重试提交</td>\n</tr>\n<tr>\n<td>全局事务回滚中（Rollbacking）</td>\n<td>4</td>\n<td>正在重新回滚全局事务</td>\n</tr>\n<tr>\n<td>全局事务回滚重试中（RollbackRetrying）</td>\n<td>5</td>\n<td>在全局回滚异常被解决后尝试事务重试回滚中</td>\n</tr>\n<tr>\n<td>全局事务超时回滚中（TimeoutRollbacking）</td>\n<td>6</td>\n<td><a href=\"#TimeoutRollbacking_description\" target=\"_self\">全局事务超时回滚中</a></td>\n</tr>\n<tr>\n<td>全局事务超时回滚重试中（TimeoutRollbackRetrying）</td>\n<td>7</td>\n<td>全局事务超时回滚重试中</td>\n</tr>\n<tr>\n<td>异步提交中（AsyncCommitting）</td>\n<td>8</td>\n<td>异步提交中</td>\n</tr>\n<tr>\n<td>二阶段已提交（Committed）</td>\n<td>9</td>\n<td>二阶段已提交，此状态后全局事务状态不会再改变</td>\n</tr>\n<tr>\n<td>二阶段提交失败（CommitFailed）</td>\n<td>10</td>\n<td>二阶段提交失败</td>\n</tr>\n<tr>\n<td>二阶段决议全局回滚（Rollbacked）</td>\n<td>11</td>\n<td>二阶段决议全局回滚</td>\n</tr>\n<tr>\n<td>二阶段全局回滚失败（RollbackFailed）</td>\n<td>12</td>\n<td>二阶段全局回滚失败</td>\n</tr>\n<tr>\n<td>二阶段超时回滚（TimeoutRollbacked）</td>\n<td>13</td>\n<td>二阶段超时回滚</td>\n</tr>\n<tr>\n<td>二阶段超时回滚失败（TimeoutRollbackFailed）</td>\n<td>14</td>\n<td>二阶段超时回滚失败</td>\n</tr>\n<tr>\n<td>全局事务结束（Finished）</td>\n<td>15</td>\n<td>全局事务结束</td>\n</tr>\n<tr>\n<td>二阶段提交超时（CommitRetryTimeout）</td>\n<td>16</td>\n<td>二阶段提交因超过重试时间限制导致失败</td>\n</tr>\n<tr>\n<td>二阶段回滚超时（RollbackRetryTimeout）</td>\n<td>17</td>\n<td>二阶段回滚因超过重试时间限制导致失败</td>\n</tr>\n<tr>\n<td>未知状态（UnKnown）</td>\n<td>0</td>\n<td>未知状态</td>\n</tr>\n</tbody>\n</table>\n<h1>分支事务状态表</h1>\n<table>\n<thead>\n<tr>\n<th>状态</th>\n<th>代码</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>分支事务注册（Registered）</td>\n<td>1</td>\n<td>向TC注册分支事务</td>\n</tr>\n<tr>\n<td>分支事务一阶段完成（PhaseOne_Done）</td>\n<td>2</td>\n<td>分支事务一阶段业务逻辑完成</td>\n</tr>\n<tr>\n<td>分支事务一阶段失败（PhaseOne_Failed）</td>\n<td>3</td>\n<td>分支事务一阶段业务逻辑失败</td>\n</tr>\n<tr>\n<td>分支事务一阶段超时（PhaseOne_Timeout）</td>\n<td>4</td>\n<td>分支事务一阶段处理超时</td>\n</tr>\n<tr>\n<td>分支事务二阶段已提交（PhaseTwo_Committed）</td>\n<td>5</td>\n<td>分支事务二阶段提交</td>\n</tr>\n<tr>\n<td>分支事务二阶段提交失败重试（PhaseTwo_CommitFailed_Retryable）</td>\n<td>6</td>\n<td>分支事务二阶段提交失败重试</td>\n</tr>\n<tr>\n<td>分支事务二阶段提交失败不重试（PhaseTwo_CommitFailed_Unretryable）</td>\n<td>7</td>\n<td>分支事务二阶段提交失败不重试</td>\n</tr>\n<tr>\n<td>分支事务二阶段已回滚（PhaseTwo_Rollbacked）</td>\n<td>8</td>\n<td>分支事务二阶段已回滚</td>\n</tr>\n<tr>\n<td>分支事务二阶段回滚失败重试（PhaseTwo_RollbackFailed_Retryable）</td>\n<td>9</td>\n<td>分支事务二阶段回滚失败重试</td>\n</tr>\n<tr>\n<td>分支事务二阶段回滚失败不重试（PhaseTwo_RollbackFailed_Unretryable）</td>\n<td>10</td>\n<td>二阶段提交失败</td>\n</tr>\n<tr>\n<td>未知状态（UnKnown）</td>\n<td>0</td>\n<td>未知状态</td>\n</tr>\n</tbody>\n</table>\n<p>为帮助理解，下面对个别状态进行补充说明：</p>\n<h3 id='TimeoutRollbacking_description'> 全局事务超时回滚中（TimeoutRollbacking）</h3>\n  怎么发生的？\n<ol>\n<li>当某个seata全局事务执行过程中，无法完成业务。</li>\n<li>TC中的一个定时任务（专门用来寻找已超时的全局事务），发现该全局事务未回滚完成，就会将此全局事务改为<strong>全局事务超时回滚中（TimeoutRollbacking）</strong>，开始回滚，直到回滚完毕后删除global_table数据。</li>\n</ol>\n<p>建议：当你发现全局事务处于该状态，请排查为何业务无法在限定时间内完成事务。若确实无法完成，应调大全局事务超时时间。（如排查一切正常，请检查tc集群时区与数据库是否一致，若不一致请改为一致）。</p>\n",
  "link": "/zh-cn/docs/user/appendix/global-transaction-status.html",
  "meta": {
    "title": "事务状态",
    "keywords": "事务状态",
    "description": "全局事务状态、分支事务状态"
  }
}