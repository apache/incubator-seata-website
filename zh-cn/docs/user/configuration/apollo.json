{
  "filename": "apollo.md",
  "__html": "<h1>Apollo 配置中心</h1>\n<h2>预备工作</h2>\n<p>当您将<code>apollo-client</code>整合到您的 Seata工程之前，请确保后台已经启动 Apollo 服务。如果您尚且不熟悉 Apollo 的基本使用的话，可先行参考 <a href=\"https://www.apolloconfig.com/\">Apollo 快速入门</a>。建议使用 Apollo <code>1.6.0</code> 及以上的版本。</p>\n<h2>快速上手</h2>\n<p>Seata 融合 Apollo 配置中心的操作步骤非常简单，大致步骤可分为“增加 Maven 依赖”以及“配置 Apollo 配置中心“和提交配置至 Apollo-Server。</p>\n<h3>增加 Maven 依赖</h3>\n<p>首先，您需要将 <code>apollo-client</code> 的 Maven 依赖添加到您的项目 <code>pom.xml</code> 文件中，建议使用 Seata <code>1.4.0+</code>：</p>\n<pre><code class=\"language-java\">           &lt;dependency&gt;\n                &lt;groupId&gt;io.seata&lt;/groupId&gt;\n                &lt;artifactId&gt;seata-spring-boot-starter&lt;/artifactId&gt;\n                &lt;version&gt;最新版&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.ctrip.framework.apollo&lt;/groupId&gt;\n                &lt;artifactId&gt;apollo-client&lt;/artifactId&gt;\n                &lt;version&gt;${apollo-client.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n</code></pre>\n<h3>Client端配置中心</h3>\n<p>在 <a href=\"https://github.com/seata/seata/blob/develop/script/client/spring/application.yml\"><strong>application.yml</strong></a> 中加入对应的配置中心,其余<a href=\"https://github.com/seata/seata/tree/develop/script/client\">配置参考</a></p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">seata:</span>\n<span class=\"hljs-attr\">  config:</span>\n<span class=\"hljs-attr\">    type:</span> <span class=\"hljs-string\">apollo</span>\n<span class=\"hljs-attr\">    apollo:</span>\n<span class=\"hljs-attr\">      apollo-meta:</span> <span class=\"hljs-attr\">http://192.168.1.204:8801</span>\n<span class=\"hljs-attr\">      app-id:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">      namespace:</span> <span class=\"hljs-string\">application</span>\n<span class=\"hljs-attr\">      apollo-accesskey-secret:</span> <span class=\"hljs-string\">\"\"</span>\n</code></pre>\n<h3>Server端配置中心</h3>\n<p>在 <a href=\"https://github.com/seata/seata/blob/develop/script/server/config/registry.conf\">registry.conf</a> 中加入对应配置中心,其余<a href=\"https://github.com/seata/seata/tree/develop/script/server/config\">配置参考</a></p>\n<pre><code>config {\n  type = &quot;apollo&quot;\n\n  apollo {\n    appId = &quot;seata-server&quot;\n    apolloMeta = &quot;http://192.168.1.204:8801&quot;\n    namespace = &quot;application&quot;\n    apolloAccesskeySecret = &quot;&quot;\n  }\n}\n\n</code></pre>\n<h3>上传配置至 Apollo 配置中心</h3>\n<p>参考https://github.com/seata/seata/tree/develop/script/config-center 的config.txt并修改,之后运行仓库中提供的 Apollo 脚本,将信息提交到Apollo 控制台, 如果有需要更改,可直接通过控制台更改.</p>\n<p>eg: sh ${SEATAPATH}/script/config-center/apollo/apollo-config.sh -h localhost -p 8070 -e DEV -a seata-server -c default -n application -d apollo -r apollo -t 3aa026fc8435d0fc4505b345b8fa4578fb646a2c</p>\n<p>详细解析参考 <a href=\"https://github.com/seata/seata/blob/develop/script/config-center/README.md\">Readme文档</a></p>\n<p>随后,启动 Seata-Server 和 Client（业务侧）应用，如果在导入配置至 Apollo 前，已启动Seata-Server 和Client（业务侧）应用需要进行重启。</p>\n",
  "link": "/zh-cn/docs/user/configuration/apollo.html",
  "meta": {}
}