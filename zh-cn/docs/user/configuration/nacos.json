{
  "filename": "nacos.md",
  "__html": "<h1>Nacos 配置中心</h1>\n<p>Nacos 是 Seata 组件中重要的配置中心实现.</p>\n<h2>预备工作</h2>\n<p>当您将<code>nacos-client</code>整合到您的 Seata工程之前，请确保后台已经启动 Nacos 服务。如果您尚且不熟悉 Nacos 的基本使用的话，可先行参考 <a href=\"https://nacos.io/zh-cn/docs/quick-start.html\">Nacos 快速入门</a>。建议使用 Nacos <code>1.2.0</code> 及以上的版本。</p>\n<h2>快速上手</h2>\n<p>Seata 融合 Nacos 配置中心的操作步骤非常简单，大致步骤可分为“增加 Maven 依赖”以及“配置nacos配置中心“和提交配置至Nacos-Server。</p>\n<h3>增加 Maven 依赖</h3>\n<p>首先，您需要将 <code>nacos-client</code> 的 Maven 依赖添加到您的项目 <code>pom.xml</code> 文件中，建议使用 Seata <code>1.4.0+</code>：</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.seata<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>seata-spring-boot-starter<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>最新版<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba.nacos<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>nacos-client<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>1.2.0及以上版本<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<h3>Client端配置中心</h3>\n<p>在 <a href=\"https://github.com/seata/seata/blob/develop/script/client/spring/application.yml\"><strong>application.yml</strong></a> 中加入对应的配置中心,其余<a href=\"https://github.com/seata/seata/tree/develop/script/client\">配置参考</a></p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">seata:</span>\n<span class=\"hljs-attr\">  config:</span>\n<span class=\"hljs-attr\">    type:</span> <span class=\"hljs-string\">nacos</span>\n<span class=\"hljs-attr\">    nacos:</span>\n<span class=\"hljs-attr\">      server-addr:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:8848</span>\n      <span class=\"hljs-string\">group</span> <span class=\"hljs-string\">:</span> <span class=\"hljs-string\">\"SEATA_GROUP\"</span>\n<span class=\"hljs-attr\">      namespace:</span> <span class=\"hljs-string\">\"\"</span>\n<span class=\"hljs-attr\">      username:</span> <span class=\"hljs-string\">\"nacos\"</span>\n<span class=\"hljs-attr\">      password:</span> <span class=\"hljs-string\">\"nacos\"</span>\n</code></pre>\n<h3>Server端配置中心</h3>\n<p>在 <a href=\"https://github.com/seata/seata/blob/develop/script/server/config/registry.conf\">registry.conf</a> 中加入对应配置中心,其余<a href=\"https://github.com/seata/seata/tree/develop/script/server\">配置参考</a></p>\n<pre><code>config {\n  type = &quot;nacos&quot;\n\n  nacos {\n    serverAddr = &quot;127.0.0.1:8848&quot;\n    group = &quot;SEATA_GROUP&quot;\n    namespace = &quot;&quot;\n    username = &quot;nacos&quot;\n    password = &quot;nacos&quot;\n  }\n}\n\n</code></pre>\n<h3>上传配置至Nacos配置中心</h3>\n<h4>通过dataId配置</h4>\n<ol>\n<li>\n<p>从v1.4.2版本开始，已支持从一个Nacos dataId中获取所有配置信息,你只需要额外添加一个dataId配置项。</p>\n</li>\n<li>\n<p>首先你需要在nacos新建配置，此处dataId为seataServer.properties,配置内容参考https://github.com/seata/seata/tree/develop/script/config-center 的config.txt并按需修改保存</p>\n</li>\n<li>\n<p>在client参考如下配置进行修改,</p>\n</li>\n</ol>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">seata:</span>\n<span class=\"hljs-attr\">  config:</span>\n<span class=\"hljs-attr\">    type:</span> <span class=\"hljs-string\">nacos</span>\n<span class=\"hljs-attr\">    nacos:</span>\n<span class=\"hljs-attr\">      server-addr:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span><span class=\"hljs-string\">:8848</span>\n      <span class=\"hljs-string\">group</span> <span class=\"hljs-string\">:</span> <span class=\"hljs-string\">\"SEATA_GROUP\"</span>\n<span class=\"hljs-attr\">      namespace:</span> <span class=\"hljs-string\">\"\"</span>\n<span class=\"hljs-attr\">      dataId:</span> <span class=\"hljs-string\">\"seataServer.properties\"</span>\n<span class=\"hljs-attr\">      username:</span> <span class=\"hljs-string\">\"nacos\"</span>\n<span class=\"hljs-attr\">      password:</span> <span class=\"hljs-string\">\"nacos\"</span>\n</code></pre>\n<h4>通过脚本上传配置到Nacos</h4>\n<p>参考https://github.com/seata/seata/tree/develop/script/config-center 的config.txt并修改,之后运行仓库中提供的nacos脚本,将信息提交到nacos控制台,如果有需要更改,可直接通过控制台更改.</p>\n<p>eg: sh ${SEATAPATH}/script/config-center/nacos/nacos-config.sh -h localhost -p 8848 -g SEATA_GROUP -t 5a3c7d6c-f497-4d68-a71a-2e5e3340b3ca -u username -w password</p>\n<p>详细解析参考 <a href=\"https://github.com/seata/seata/blob/develop/script/config-center/README.md\">Readme文档</a></p>\n<p>随后,启动 Seata-Server 和 Client（业务侧）应用，如果在导入配置至Nacos前，已启动Seata-Server 和Client（业务侧）应用需要进行重启。</p>\n",
  "link": "/zh-cn/docs/user/configuration/nacos.html",
  "meta": {}
}