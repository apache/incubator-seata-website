{
  "filename": "download_files.md",
  "__html": "<h1>Downloading Files with Dragonfly</h1>\n<p>Things are done differently when you download container images and download general files with Dragonfly.</p>\n<h2>Prerequisites</h2>\n<ul>\n<li>\n<p>You are using Linux operating system.</p>\n</li>\n<li>\n<p>You have installed Python 2.7+, and added the Python directory to the <code>PATH</code> environment variable.</p>\n</li>\n<li>\n<p>The SuperNode service is started.</p>\n<p><strong>Tip:</strong> For more information on the dfget command, see <a href=\"../cli_ref/dfget.md\">dfget</a>. For more information on the installation of supernodes, see <a href=\"install_server.md\">Installing Server</a>.</p>\n</li>\n</ul>\n<h2>Downloading container images</h2>\n<ol>\n<li>\n<p>Specify the supernodes.</p>\n<p>a. Open the Dragonfly configuration file.</p>\n<pre><code class=\"language-sh\">vi /etc/dragonfly.conf\n</code></pre>\n<p>b. Add the IP of supernodes separated by comma to the configuration file.</p>\n<pre><code class=\"language-sh\">[node]\naddress=nodeIp1,nodeIp2\n</code></pre>\n</li>\n<li>\n<p>Start the dfget proxy (dfdaemon).</p>\n<pre><code class=\"language-sh\"><span class=\"hljs-comment\"># Start dfdaemon and specify the image repo URL. The default port is `65001`.</span>\ndfdaemon --registry https://xxx.xx.x\n<span class=\"hljs-comment\"># Review dfdaemon logs</span>\ntailf ~/.small-dragonfly/logs/dfdaemon.log\n</code></pre>\n<p><strong>Tip:</strong> To list all available parameters for dfdaemon, run <code>dfdeaemon -h</code>.</p>\n</li>\n<li>\n<p>Configure the Daemon Mirror.</p>\n<p>a. Modify the configuration file <code>/etc/docker/daemon.json</code>.</p>\n<pre><code class=\"language-sh\">vi /etc/docker/daemon.json\n</code></pre>\n<p><strong>Tip:</strong> For more information on <code>/etc/docker/daemon.json</code>, see <a href=\"https://docs.docker.com/registry/recipes/mirror/#configure-the-cache\">Docker documentation</a>.</p>\n<p>b. Add or update the configuration item <code>registry-mirrors</code> in the configuration file.</p>\n<pre><code class=\"language-sh\"><span class=\"hljs-string\">\"registry-mirrors\"</span>: [<span class=\"hljs-string\">\"http://127.0.0.1:65001\"</span>]\n</code></pre>\n<p>c. Restart Docker daemon.</p>\n<pre><code class=\"language-bash\">systemctl restart docker\n</code></pre>\n</li>\n<li>\n<p>Download an image with Dragonfly.</p>\n<pre><code class=\"language-bash\">docker pull {imageName}\n</code></pre>\n<p><strong>Note:</strong> Don't include the image repo URL in {imageName}, because the repo URL has been specified with the <code>registry</code> parameter when starting dfdaemon.</p>\n</li>\n</ol>\n<h2>Downloading General Files</h2>\n<ol>\n<li>\n<p>Specify the supernodes in one of the following ways.</p>\n<ul>\n<li>\n<p>Specifying with the configuration file.</p>\n<pre><code class=\"language-sh\"><span class=\"hljs-comment\"># Open the Dragonfly configuration file.</span>\nvi /etc/dragonfly.conf\n\n<span class=\"hljs-comment\"># Add the IP of supernodes separated by comma to the configuration file</span>\n[node]\naddress=nodeIp1,nodeIp2\n</code></pre>\n</li>\n<li>\n<p>Specifying with the parameter in the command line.</p>\n<pre><code class=\"language-sh\">dfget -u <span class=\"hljs-string\">\"http://www.taobao.com\"</span> -o /tmp/test.html --node nodeIp1,nodeIp2\n</code></pre>\n<p><strong>Note:</strong> When using this method, you must add the <code>node</code> parameter every time when you run the dfget command. And the parameter in the command line takes precedence over the configuration file.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Download general files with Dragonfly in one of the following ways.</p>\n<ul>\n<li>\n<p>Download files with the default <code>/etc/dragonfly.conf</code> configuration.</p>\n<pre><code class=\"language-sh\">dfget --url <span class=\"hljs-string\">\"http://xxx.xx.x\"</span>\n</code></pre>\n<p><strong>Tip:</strong> To list all available parameters for dfget, run <code>dfget -h</code>.</p>\n</li>\n<li>\n<p>Download files with your specified supernodes.</p>\n<pre><code class=\"language-sh\">dfget --url <span class=\"hljs-string\">\"http://xxx.xx.x\"</span> --node <span class=\"hljs-string\">\"127.0.0.1\"</span>\n</code></pre>\n</li>\n<li>\n<p>Download files to your specified output file.</p>\n<pre><code class=\"language-sh\">dfget --url <span class=\"hljs-string\">\"http://xxx.xx.x\"</span> -o a.txt\n</code></pre>\n</li>\n</ul>\n</li>\n</ol>\n<h2>After this Task</h2>\n<p>To review the downloading log, run <code>less ~/.small-dragonfly/logs/dfclient.log</code>.</p>\n",
  "link": "/zh-cn/docs/userguide/download_files.html",
  "meta": {}
}