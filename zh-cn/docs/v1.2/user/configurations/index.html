<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v1.2 plugin-docs plugin-id-default docs-doc-id-user/configurations">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">参数配置 | Seata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://seata.io/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://seata.io/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://seata.io/zh-cn/docs/v1.2/user/configurations"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="v1.2"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.2"><meta data-rh="true" name="docsearch:version" content="v1.2"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.2"><meta data-rh="true" property="og:title" content="参数配置 | Seata"><meta data-rh="true" name="description" content="Seata 参数配置。"><meta data-rh="true" property="og:description" content="Seata 参数配置。"><meta data-rh="true" name="keywords" content="Seata"><link data-rh="true" rel="icon" href="/zh-cn/img/seata_logo_small.jpeg"><link data-rh="true" rel="canonical" href="https://seata.io/zh-cn/docs/v1.2/user/configurations"><link data-rh="true" rel="alternate" href="https://seata.io/docs/v1.2/user/configurations" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://seata.io/zh-cn/docs/v1.2/user/configurations" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://seata.io/docs/v1.2/user/configurations" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ICHFIJRDZF-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/zh-cn/blog/rss.xml" title="Seata RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-cn/blog/atom.xml" title="Seata Atom Feed">


<link rel="search" type="application/opensearchdescription+xml" title="Seata" href="/zh-cn/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=seata">
<script src="https://www.googletagmanager.com/gtag/js?id=G-X4LJGF90X2" async></script><link rel="stylesheet" href="/zh-cn/assets/css/styles.f8c4a2a1.css">
<link rel="preload" href="/zh-cn/assets/js/runtime~main.c7a388e4.js" as="script">
<link rel="preload" href="/zh-cn/assets/js/main.9b781372.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<script src="https://hm.baidu.com/hm.js?104e73ef0c18b416b27abb23757ed8ee"></script>
<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="/zh-cn/img/seata_logo.png" alt="Seata Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh-cn/img/seata_logo.png" alt="Seata Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/zh-cn/">首页</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/overview/what-is-seata" href="/zh-cn/docs/v1.2/overview/what-is-seata">v1.2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-cn/docs/next/user/configurations">预览版</a></li><li><a class="dropdown__link" href="/zh-cn/docs/user/configurations">v2.0</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.8/user/configurations">v1.8</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.7/user/configurations">v1.7</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.6/user/configurations">v1.6</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.5/user/configurations">v1.5</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.4/user/configurations">v1.4</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.3/user/configurations">v1.3</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh-cn/docs/v1.2/user/configurations">v1.2</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.1/user/configurations">v1.1</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.0/user/configurations">v1.0</a></li></ul></div><a class="navbar__item navbar__link" href="/zh-cn/docs/v1.2/developers/contributor-guide/new-contributor-guide_dev">开发者</a><a class="navbar__item navbar__link" href="/zh-cn/blog">博客</a><a class="navbar__item navbar__link" href="/zh-cn/community">社区</a><a class="navbar__item navbar__link" href="/zh-cn/unversioned/download/seata-server">下载</a><a href="http://demo.seata.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">控制台样例</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中</a><ul class="dropdown__menu"><li><a href="/docs/v1.2/user/configurations" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">En</a></li><li><a href="/zh-cn/docs/v1.2/user/configurations" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">概述</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/overview/what-is-seata">Seata 是什么？</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/overview/terminology">Seata术语表</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/overview/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">用户文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/user/quickstart">快速启动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-cn/docs/v1.2/user/configurations">参数配置</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/user/mode/at">各事务模式</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/user/txgroup/transaction-group">事务分组</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/user/configuration/">配置中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/user/registry/">注册中心</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/user/api">API 支持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/user/microservice">微服务框架支持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/user/ormframework">ORM框架支持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/user/datasource">数据库类型支持</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/user/sqlreference/sql-restrictions">SQL参考</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/user/apm/skywalking">应用性能监控</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/user/performance">测试报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/user/appendix/global-transaction-status">附录</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">开发者指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/dev/mode/at-mode">各事务模式</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/dev/domain/overviewDomainModel">领域模型</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/dev/seata-mertics">Metrics 设计</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">运维指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/ops/upgrade">版本升级指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.2/ops/multi-configuration-isolation">多配置隔离</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.2/ops/deploy-guide-beginner">部署</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Seata<!-- --> <b>v1.2</b> 版的文档，现已不再积极维护。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/zh-cn/docs/user/configurations">最新版本</a></b> (<!-- -->v2.0<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">用户文档</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">参数配置</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：v1.2</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>seata参数配置</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="关注属性详细描述见全属性">关注属性(详细描述见全属性)<a href="#关注属性详细描述见全属性" class="hash-link" aria-label="关注属性(详细描述见全属性)的直接链接" title="关注属性(详细描述见全属性)的直接链接">​</a></h2><table><thead><tr><th>server端</th><th>client端</th></tr></thead><tbody><tr><td>registry.type</td><td>registry.type</td></tr><tr><td>config.type</td><td>config.type</td></tr><tr><td>#store.mode=db需要以下配置</td><td>service.vgroupMapping.my_test_tx_group</td></tr><tr><td>store.db.driverClassName</td><td>service.default.grouplist</td></tr><tr><td>store.db.url</td><td>service.disableGlobalTransaction</td></tr><tr><td>store.db.user</td><td></td></tr><tr><td>store.db.password</td><td></td></tr><tr><td>#store.mode=redis 需要以下配置,该版本redis数据结构被1.3重构,故不推荐在1.2上使用redis存储模式</td><td></td></tr><tr><td>store.redis.host</td><td></td></tr><tr><td>store.redis.port</td><td></td></tr><tr><td>store.redis.database</td><td></td></tr><tr><td>store.redis.password</td><td></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="全属性">全属性<a href="#全属性" class="hash-link" aria-label="全属性的直接链接" title="全属性的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="公共部分">公共部分<a href="#公共部分" class="hash-link" aria-label="公共部分的直接链接" title="公共部分的直接链接">​</a></h3><table><thead><tr><th>key</th><th>desc</th><th>remark</th><th>change record</th></tr></thead><tbody><tr><td>transport.type</td><td>socket通信方式</td><td>TCP、UNIX_DOMAIN_SOCKET，默认TCP</td><td></td></tr><tr><td>transport.server</td><td>socket通道类型</td><td>NIO、NATIVE(根据操作系统类型和socket通信方式选择KQueue或Epoll，注意Windows只支持NIO，选择这种方式会抛出异常）</td><td></td></tr><tr><td>transport.threadFactory.bossThreadSize</td><td>Netty通信模型Boss group线程数</td><td>默认1</td><td></td></tr><tr><td>transport.threadFactory.workerThreadSize</td><td>Netty通信模型Worker group线程数</td><td>可配置线程数或选择特定线程工作模式下的线程数，线程的默认工作模式有4种:Auto(2<!-- -->*<!-- -->CPU核数 + 1)、Pin(CPU核数，适用于计算密集型任务)、BusyPin(CPU核数 + 1，适用于计算密集型且内存比较有限的场景）、Default(2<!-- -->*<!-- -->CPU核数，适用于IO密集型任务）,默认值为Default模式</td><td></td></tr><tr><td>transport.shutdown.wait</td><td>服务端Netty线程池关闭前等待服务下线时间</td><td>默认3秒</td><td></td></tr><tr><td>transport.serialization</td><td>client和server通信编解码方式</td><td>seata(ByteBuf)、protobuf、kryo、hessian、fst，默认seata</td><td></td></tr><tr><td>transport.compressor</td><td>client和server通信数据压缩方式</td><td>none、gzip、zip、sevenz、bzip2，默认none</td><td></td></tr><tr><td>transport.heartbeat</td><td>client和server通信心跳检测开关</td><td>默认true开启</td><td></td></tr><tr><td>registry.type</td><td>注册中心类型</td><td>默认file，支持file 、nacos 、redis、eureka、zk、consul、etcd3、sofa、custom</td><td></td></tr><tr><td>config.type</td><td>配置中心类型</td><td>默认file，支持file、nacos 、apollo、zk、consul、etcd3、springcloud、custom</td><td></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="server端">server端<a href="#server端" class="hash-link" aria-label="server端的直接链接" title="server端的直接链接">​</a></h3><table><thead><tr><th>key</th><th>desc</th><th>remark</th><th>change record</th></tr></thead><tbody><tr><td>server.undo.logSaveDays</td><td>undo保留天数</td><td>默认7天,log_status=1（附录3）和未正常清理的undo</td><td></td></tr><tr><td>server.undo.logDeletePeriod</td><td>undo清理线程间隔时间</td><td>默认86400000，单位毫秒</td><td></td></tr><tr><td>server.maxCommitRetryTimeout</td><td>二阶段提交重试超时时长</td><td>单位ms,s,m,h,d,对应毫秒,秒,分,小时,天,默认毫秒。默认值-1表示无限重试。公式: timeout&gt;=now-globalTransactionBeginTime,true表示超时则不再重试(注: 达到超时时间后将不会做任何重试,有数据不一致风险,除非业务自行可校准数据,否者慎用)</td><td></td></tr><tr><td>server.maxRollbackRetryTimeout</td><td>二阶段回滚重试超时时长</td><td>同commit</td><td></td></tr><tr><td>server.recovery.committingRetryPeriod</td><td>二阶段提交未完成状态全局事务重试提交线程间隔时间</td><td>默认1000，单位毫秒</td><td></td></tr><tr><td>server.recovery.asynCommittingRetryPeriod</td><td>二阶段异步提交状态重试提交线程间隔时间</td><td>默认1000，单位毫秒</td><td></td></tr><tr><td>server.recovery.rollbackingRetryPeriod</td><td>二阶段回滚状态重试回滚线程间隔时间</td><td>默认1000，单位毫秒</td><td></td></tr><tr><td>server.recovery.timeoutRetryPeriod</td><td>超时状态检测重试线程间隔时间</td><td>默认1000，单位毫秒，检测出超时将全局事务置入回滚会话管理器</td><td></td></tr><tr><td>server.rollbackRetryTimeoutUnlockEnable</td><td>二阶段回滚超时后是否释放锁</td><td>默认false</td><td></td></tr><tr><td>store.mode</td><td>事务会话信息存储方式</td><td>file本地文件(不支持HA)，db数据库，redis(支持HA)</td><td></td></tr><tr><td>store.file.dir</td><td>file模式文件存储文件夹名</td><td>默认sessionStore</td><td></td></tr><tr><td>store.file.maxBranchSessionSize</td><td>file模式文件存储分支session最大字节数</td><td>默认16384(16kb),单位byte</td><td></td></tr><tr><td>store.file.maxGlobalSessionSize</td><td>file模式文件存储全局session最大字节数</td><td>默认512b，单位byte</td><td></td></tr><tr><td>store.file.fileWriteBufferCacheSize</td><td>file模式文件存储buffer最大缓存大小</td><td>默认16384(16kb)，单位byte,写入session等数据量大于该值时会抛出异常</td><td></td></tr><tr><td>store.file.flushDiskMode</td><td>file模式文件存储刷盘策略</td><td>默认async，可选sync</td><td></td></tr><tr><td>store.file.sessionReloadReadSize</td><td>file模式文件存储Server节点重启后从备份文件中恢复的session或lock key上限个数</td><td>默认100</td><td></td></tr><tr><td>store.db.datasource</td><td>db模式数据源类型</td><td>dbcp、druid、hikari；无默认值，store.mode=db时必须指定</td><td></td></tr><tr><td>store.db.dbType</td><td>db模式数据库类型</td><td>mysql、oracle、db2、sqlserver、sybaee、h2、sqlite、access、postgresql、oceanbase；无默认值，store.mode=db时必须指定。</td><td></td></tr><tr><td>store.db.driverClassName</td><td>db模式数据库驱动</td><td>store.mode=db时必须指定</td><td></td></tr><tr><td>store.db.url</td><td>db模式数据库url</td><td>store.mode=db时必须指定，在使用mysql作为数据源时，建议在连接参数中加上<code>rewriteBatchedStatements=true</code>(详细原因请阅读附录7)</td><td></td></tr><tr><td>store.db.user</td><td>db模式数据库账户</td><td>store.mode=db时必须指定</td><td></td></tr><tr><td>store.db.password</td><td>db模式数据库账户密码</td><td>store.mode=db时必须指定</td><td></td></tr><tr><td>store.db.minConn</td><td>db模式数据库初始连接数</td><td>默认1</td><td></td></tr><tr><td>store.db.maxConn</td><td>db模式数据库最大连接数</td><td>默认20</td><td></td></tr><tr><td>store.db.maxWait</td><td>db模式获取连接时最大等待时间</td><td>默认5000，单位毫秒</td><td></td></tr><tr><td>store.db.globalTable</td><td>db模式全局事务表名</td><td>默认global_table</td><td></td></tr><tr><td>store.db.branchTable</td><td>db模式分支事务表名</td><td>默认branch_table</td><td></td></tr><tr><td>store.db.lockTable</td><td>db模式全局锁表名</td><td>默认lock_table</td><td></td></tr><tr><td>store.db.queryLimit</td><td>db模式查询全局事务一次的最大条数</td><td>默认100</td><td></td></tr><tr><td>store.redis.host</td><td>redis模式ip</td><td>默认127.0.0.1</td><td></td></tr><tr><td>store.redis.port</td><td>redis模式端口</td><td>默认6379</td><td></td></tr><tr><td>store.redis.maxConn</td><td>redis模式最大连接数</td><td>默认10</td><td></td></tr><tr><td>store.redis.minConn</td><td>redis模式最小连接数</td><td>默认1</td><td></td></tr><tr><td>store.redis.database</td><td>redis模式默认库</td><td>默认0</td><td></td></tr><tr><td>store.redis.password</td><td>redis模式密码(无可不填)</td><td>默认null</td><td></td></tr><tr><td>store.redis.queryLimit</td><td>redis模式一次查询最大条数</td><td>默认100</td><td></td></tr><tr><td>metrics.enabled</td><td>是否启用Metrics</td><td>默认false关闭，在False状态下，所有与Metrics相关的组件将不会被初始化，使得性能损耗最低</td><td></td></tr><tr><td>metrics.registryType</td><td>指标注册器类型</td><td>Metrics使用的指标注册器类型，默认为内置的compact（简易）实现，这个实现中的Meter仅使用有限内存计数，性能高足够满足大多数场景；目前只能设置一个指标注册器实现</td><td></td></tr><tr><td>metrics.exporterList</td><td>指标结果Measurement数据输出器列表</td><td>默认prometheus，多个输出器使用英文逗号分割，例如&quot;prometheus,jmx&quot;，目前仅实现了对接prometheus的输出器</td><td></td></tr><tr><td>metrics.exporterPrometheusPort</td><td>prometheus输出器Client端口号</td><td>默认9898</td><td></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client端">client端<a href="#client端" class="hash-link" aria-label="client端的直接链接" title="client端的直接链接">​</a></h3><table><thead><tr><th>key</th><th>desc</th><th>remark</th><th>change record</th></tr></thead><tbody><tr><td>seata.enabled</td><td>是否开启spring-boot自动装配</td><td>true、false,(SSBS)专有配置，默认true（附录4）</td><td></td></tr><tr><td>seata.enableAutoDataSourceProxy=true</td><td>是否开启数据源自动代理</td><td>true、false,seata-spring-boot-starter(SSBS)专有配置,SSBS默认会开启数据源自动代理,可通过该配置项关闭.</td><td></td></tr><tr><td>seata.useJdkProxy=false</td><td>是否使用JDK代理作为数据源自动代理的实现方式</td><td>true、false,(SSBS)专有配置,默认false,采用CGLIB作为数据源自动代理的实现方式</td><td></td></tr><tr><td>transport.enableClientBatchSendRequest</td><td>客户端事务消息请求是否批量合并发送</td><td>默认true，false单条发送</td><td></td></tr><tr><td>client.log.exceptionRate</td><td>日志异常输出概率</td><td>默认100，目前用于undo回滚失败时异常堆栈输出，百分之一的概率输出，回滚失败基本是脏数据，无限输出堆栈占用硬盘空间</td><td></td></tr><tr><td>service.vgroupMapping.my_test_tx_group</td><td>事务群组（附录1）</td><td>my_test_tx_group为分组，配置项值为TC集群名</td><td></td></tr><tr><td>service.default.grouplist</td><td>TC服务列表（附录2）</td><td>仅注册中心为file时使用</td><td></td></tr><tr><td>service.disableGlobalTransaction</td><td>全局事务开关</td><td>默认false。false为开启，true为关闭</td><td></td></tr><tr><td>client.tm.degradeCheck</td><td>降级开关</td><td>默认false。业务侧根据连续错误数自动降级不走seata事务(详细介绍请阅读附录6)</td><td></td></tr><tr><td>client.tm.degradeCheckAllowTimes</td><td>升降级达标阈值</td><td>默认10</td><td></td></tr><tr><td>client.tm.degradeCheckPeriod</td><td>服务自检周期</td><td>默认2000,单位ms.每2秒进行一次服务自检,来决定</td><td></td></tr><tr><td>client.rm.reportSuccessEnable</td><td>是否上报一阶段成功</td><td>true、false，从1.1.0版本开始,默认false.true用于保持分支事务生命周期记录完整，false可提高不少性能</td><td></td></tr><tr><td>client.rm.asyncCommitBufferLimit</td><td>异步提交缓存队列长度</td><td>默认10000。 二阶段提交成功，RM异步清理undo队列</td><td></td></tr><tr><td>client.rm.lock.retryInterval</td><td>校验或占用全局锁重试间隔</td><td>默认10，单位毫秒</td><td></td></tr><tr><td>client.rm.lock.retryTimes</td><td>校验或占用全局锁重试次数</td><td>默认30</td><td></td></tr><tr><td>client.rm.lock.retryPolicyBranchRollbackOnConflict</td><td>分支事务与其它全局回滚事务冲突时锁策略</td><td>默认true，优先释放本地锁让回滚成功</td><td></td></tr><tr><td>client.rm.tableMetaCheckerInterval</td><td>定时刷新缓存中表结构间隔时间</td><td>默认60秒</td><td></td></tr><tr><td>client.rm.sagaBranchRegisterEnable</td><td>是否开启saga分支注册</td><td>Saga模式中分支状态存储在状态机本地数据库中，可通过状态机进行提交或回滚，为提高性能可考虑不用向TC注册Saga分支，但需考虑状态机的可用性，默认false</td><td></td></tr><tr><td>client.tm.commitRetryCount</td><td>一阶段全局提交结果上报TC重试次数</td><td>默认1次，建议大于1</td><td></td></tr><tr><td>client.tm.rollbackRetryCount</td><td>一阶段全局回滚结果上报TC重试次数</td><td>默认1次，建议大于1</td><td></td></tr><tr><td>client.undo.dataValidation</td><td>二阶段回滚镜像校验</td><td>默认true开启，false关闭</td><td></td></tr><tr><td>client.undo.logSerialization</td><td>undo序列化方式</td><td>默认jackson</td><td></td></tr><tr><td>client.undo.logTable</td><td>自定义undo表名</td><td>默认undo_log</td><td></td></tr><tr><td>client.undo.onlyCareUpdateColumns</td><td>只生成被更新列的镜像</td><td>默认true</td><td></td></tr><tr><td>client.rm.sqlParserType</td><td>sql解析类型</td><td>默认druid</td><td></td></tr></tbody></table><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><mark>参数同步到配置中心使用demo</mark></summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="nacos">Nacos<a href="#nacos" class="hash-link" aria-label="Nacos的直接链接" title="Nacos的直接链接">​</a></h4><p>shell:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sh</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${SEATAPATH}</span><span class="token plain">/script/config-center/nacos/nacos-config.sh -h localhost -p </span><span class="token number" style="color:#36acaa">8848</span><span class="token plain"> -g SEATA_GROUP -t 5a3c7d6c-f497-4d68-a71a-2e5e3340b3ca</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数说明：</p><p>-h: host，默认值 localhost</p><p>-p: port，默认值 8848</p><p>-g: 配置分组，默认值为 &#x27;SEATA_GROUP&#x27;</p><p>-t: 租户信息，对应 Nacos 的命名空间ID字段, 默认值为空 &#x27;&#x27;</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="apollo">Apollo<a href="#apollo" class="hash-link" aria-label="Apollo的直接链接" title="Apollo的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sh</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${SEATAPATH}</span><span class="token plain">/script/config-center/apollo/apollo-config.sh -h localhost -p </span><span class="token number" style="color:#36acaa">8070</span><span class="token plain"> -e DEV -a seata-server -c default -n application -d apollo -r apollo -t 3aa026fc8435d0fc4505b345b8fa4578fb646a2c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数说明：</p><p>-h: host，默认值 localhost</p><p>-p: port，默认值 8070</p><p>-e: 所管理的配置环境，默认值 DEV</p><p>-a: Namespace 所属的 AppId，默认值 seata-server</p><p>-c: 所管理的配置集群名， 一般情况下传入 default 即可。如果是特殊集群，传入相应集群的名称即可，默认值 default</p><p>-n: 所管理的 Namespace 的名称，如果是非 properties 格式，需要加上后缀名，如 sample.yml，默认值 application</p><p>-d: item 的创建人，格式为域账号，也就是 sso 系统的 User ID</p><p>-r: 发布人，域账号，注意：如果 ApolloConfigDB.ServerConfig 中的 namespace.lock.switch 设置为 true 的话（默认是 false），那么该环境不允许发布人和编辑人为同一人。所以如果编辑人是 zhangsan，发布人就不能再是 zhangsan。</p><p>-t: Apollo 管理员在 http://{portal_address}/open/manage.html 创建第三方应用，创建之前最好先查询此AppId是否已经创建。创建成功之后会生成一个 token</p><p>以上参数说明详情请看：</p><p><a href="https://github.com/ctripcorp/apollo/wiki/Apollo%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0" target="_blank" rel="noopener noreferrer">https://github.com/ctripcorp/apollo/wiki/Apollo%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="consul">Consul<a href="#consul" class="hash-link" aria-label="Consul的直接链接" title="Consul的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sh</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${SEATAPATH}</span><span class="token plain">/script/config-center/consul/consul-config.sh -h localhost -p </span><span class="token number" style="color:#36acaa">8500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数说明：</p><p>-h: host，默认值 localhost</p><p>-p: port，默认值 8500</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="etcd3">Etcd3<a href="#etcd3" class="hash-link" aria-label="Etcd3的直接链接" title="Etcd3的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sh</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${SEATAPATH}</span><span class="token plain">/script/config-center/etcd3/etcd3-config.sh -h localhost -p </span><span class="token number" style="color:#36acaa">2379</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数说明：</p><p>-h: host，默认值 localhost</p><p>-p: port，默认值 2379</p><p>python:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python </span><span class="token variable" style="color:#36acaa">${SEATAPATH}</span><span class="token plain">/script/config-center/nacos/nacos-config.py localhost:8848</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="zk">ZK<a href="#zk" class="hash-link" aria-label="ZK的直接链接" title="ZK的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sh</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${SEATAPATH}</span><span class="token plain">/script/config-center/zk/zk-config.sh -h localhost -p </span><span class="token number" style="color:#36acaa">2181</span><span class="token plain"> -z </span><span class="token string" style="color:#e3116c">&quot;/Users/zhangchenghui/zookeeper-3.4.14&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参数说明：</p><p>-h: host，默认值 localhost</p><p>-p: port，默认值 2181</p><p>-z: zk所属路径</p></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录1">附录1：<a href="#附录1" class="hash-link" aria-label="附录1：的直接链接" title="附录1：的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">事务分组说明。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.事务分组是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">事务分组是seata的资源逻辑，类似于服务实例。在file.conf中的my_test_tx_group就是一个事务分组。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.通过事务分组如何找到后端集群？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">首先程序中配置了事务分组（GlobalTransactionScanner 构造方法的txServiceGroup参数），程序会通过用户配置的配置中心去寻找service.vgroupMapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.事务分组配置项，取得配置项的值就是TC集群的名称。拿到集群名称程序通过一定的前后缀+集群名称去构造服务名，各配置中心的服务名实现不同。拿到服务名去相应的注册中心去拉取相应服务名的服务列表，获得后端真实的TC服务列表。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.为什么这么设计，不直接取服务名？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">这里多了一层获取事务分组到映射集群的配置。这样设计后，事务分组可以作为资源的逻辑隔离单位，当发生故障时可以快速failover。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录2">附录2：<a href="#附录2" class="hash-link" aria-label="附录2：的直接链接" title="附录2：的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">关于grouplist问题说明下。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. 什么时候会用到file.conf中的default.grouplist？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">当registry.type=file时会用到，其他时候不读。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. default.grouplist的值列表是否可以配置多个？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">可以配置多个，配置多个意味着集群，但当store.mode=file时，会报错。原因是在file存储模式下未提供本地文件的同步，所以需要使用store.mode=db，通过db来共享TC集群间数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. 是否推荐使用default.grouplist？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">不推荐，如问题1，当registry.type=file时会用到，也就是说这里用的不是真正的注册中心，不具体服务的健康检查机制当tc不可用时无法自动剔除列表，推荐使用nacos 、eureka、redis、zk、consul、etcd3、sofa。registry.type=file或config.type=file 设计的初衷是让用户再不依赖第三方注册中心或配置中心的前提下，通过直连的方式，快速验证seata服务。    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.seata-spring-boot-starter中的配置为什么是grouplist.default,也就是说和file.conf中的default.grouplist写法刚好颠倒了位置?  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">由于spring-boot本身配置文件语法的要求,这个地方需要将file.conf中的default.grouplist写成grouplist.default,效果是一样的.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录3">附录3：<a href="#附录3" class="hash-link" aria-label="附录3：的直接链接" title="附录3：的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">log_status=1的是防御性的，是收到全局回滚请求，但是不确定某个事务分支的本地事务是否已经执行完成了，这时事先插入一条branchid相同的数据，插入的假数据成功了，本地事务继续执行就会报唯一索引冲突自动回滚。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">假如插入不成功说明表里有数据这个本地事务已经执行完成了，那么取出这条undolog数据做反向回滚操作。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录4">附录4：<a href="#附录4" class="hash-link" aria-label="附录4：的直接链接" title="附录4：的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">是否开启spring-boot自动装配，如果开启，则会自动配置seata与spring-boot的集成，包括数据源的自动代理以及GlobalTransactionScanner初始化。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">注：1.0版本新特性，需依赖seata-spring-boot-starter。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录5">附录5:<a href="#附录5" class="hash-link" aria-label="附录5:的直接链接" title="附录5:的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">seata1.1.0版本新加入以下注解,用于开启数据源自动代理功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAutoDataSourceProxy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>attribute</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>useJdkProxy</td><td>是否使用JDK代理作为数据源自动代理的实现方式</td><td>false、true,默认false,采用CGLIB作为数据源自动代理的实现方式</td></tr></tbody></table><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.对于使用seata-spring-boot-starter的方式，默认已开启数据源自动代理,如需关闭，请配置seata.enableAutoDataSourceProxy=false，该项配置默认为true。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  如需切换代理实现方式，请通过seata.useJdkProxy=false进行配置,默认为false，采用CGLIB作为数据源自动代理的实现方式。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.对于使用seata-all的方式，请使用@EnableAutoDataSourceProxy来显式开启数据源自动代理功能。如有需要，可通过该注解的useJdkProxy属性进行代理实现方式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  的切换。默认为false,采用CGLIB作为数据源自动代理的实现方式。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录6">附录6:<a href="#附录6" class="hash-link" aria-label="附录6:的直接链接" title="附录6:的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">关于服务自动降级策略的具体实现介绍:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">首先通过读取client.tm.degradeCheck是否为true,决定是否开启自检线程.随后读取degradeCheckAllowTimes和degradeCheckPeriod,确认阈值与自检周期.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">假设degradeCheckAllowTimes=10,degradeCheckPeriod=2000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">那么每2秒钟会进行一个begin,commit的测试,如果失败,则记录连续失败数,如果成功则清空连续失败数.连续错误由用户接口及自检线程进行累计,直到连续失败次数达到用户的阈值,则关闭Seata分布式事务,避免用户自身业务长时间不可用.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">反之,假如当前分布式事务关闭,那么自检线程继续按照2秒一次的自检,直到连续成功数达到用户设置的阈值,那么Seata分布式事务将恢复使用</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录7">附录7:<a href="#附录7" class="hash-link" aria-label="附录7:的直接链接" title="附录7:的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">在store.mode=db，由于seata是通过jdbc的executeBatch来批量插入全局锁的，根据MySQL官网的说明，连接参数中的rewriteBatchedStatements为true时，在执行executeBatch，并且操作类型为insert时，jdbc驱动会把对应的SQL优化成`insert into () values (), ()`的形式来提升批量插入的性能。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">根据实际的测试，该参数设置为true后，对应的批量插入性能为原来的10倍多，因此在数据源为MySQL时，建议把该参数设置为true。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-cn/docs/v1.2/user/quickstart"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">快速启动</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-cn/docs/v1.2/user/mode/at"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Seata AT 模式</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#关注属性详细描述见全属性" class="table-of-contents__link toc-highlight">关注属性(详细描述见全属性)</a></li><li><a href="#全属性" class="table-of-contents__link toc-highlight">全属性</a><ul><li><a href="#公共部分" class="table-of-contents__link toc-highlight">公共部分</a></li><li><a href="#server端" class="table-of-contents__link toc-highlight">server端</a></li><li><a href="#client端" class="table-of-contents__link toc-highlight">client端</a></li><li><a href="#附录1" class="table-of-contents__link toc-highlight">附录1：</a></li><li><a href="#附录2" class="table-of-contents__link toc-highlight">附录2：</a></li><li><a href="#附录3" class="table-of-contents__link toc-highlight">附录3：</a></li><li><a href="#附录4" class="table-of-contents__link toc-highlight">附录4：</a></li><li><a href="#附录5" class="table-of-contents__link toc-highlight">附录5:</a></li><li><a href="#附录6" class="table-of-contents__link toc-highlight">附录6:</a></li><li><a href="#附录7" class="table-of-contents__link toc-highlight">附录7:</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/zh-cn/img/apache/incubator.svg" alt="Apache Incubator Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/zh-cn/img/apache/incubator.svg" alt="Apache Incubator Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">
                  <div class="fs-12">
                    <div class="center-div">
                      <span>Apache Seata is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</span>
                    </div>
                    <br>
                    <div class="center-div">
                      <span>Copyright © 2023-2024, The Apache Software Foundation Apache Seata, Seata, Apache, Apache Incubator, the Apache feather, the Apache Incubator logo and the Apache Seata project logo are either registered trademarks or trademarks of the Apache Software Foundation.</span>
                      <br>
                    </div>
                    <br>
                  </div>
                  </div></div></div></footer></div>
<script src="/zh-cn/assets/js/runtime~main.c7a388e4.js"></script>
<script src="/zh-cn/assets/js/main.9b781372.js"></script>
</body>
</html>