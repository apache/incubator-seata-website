{
  "filename": "deploy-by-docker.md",
  "__html": "<h1>使用 Docker 部署 Seata Server</h1>\n<h2>快速开始</h2>\n<h4>启动seata-server实例</h4>\n<pre><code class=\"language-bash\">$ docker run --name seata-server -p 8091:8091 seataio/seata-server:latest\n</code></pre>\n<h4>指定seata-server IP和端口 启动</h4>\n<pre><code class=\"language-bash\">$ docker run --name seata-server \\\n        -p 8091:8091 \\\n        -e SEATA_IP=192.168.1.1 \\\n        -e SEATA_PORT=8091 \\\n        seataio/seata-server\n</code></pre>\n<h4>Docker compose 启动</h4>\n<p><code>docker-compose.yaml</code> 示例</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">\"3\"</span>\n<span class=\"hljs-attr\">services:</span>\n<span class=\"hljs-attr\">  seata-server:</span>\n<span class=\"hljs-attr\">    image:</span> <span class=\"hljs-string\">seataio/seata-server</span>\n<span class=\"hljs-attr\">    hostname:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">    ports:</span>\n<span class=\"hljs-bullet\">      -</span> <span class=\"hljs-string\">\"8091:8091\"</span>\n<span class=\"hljs-attr\">    environment:</span>\n<span class=\"hljs-bullet\">      -</span> <span class=\"hljs-string\">SEATA_PORT=8091</span>\n<span class=\"hljs-bullet\">      -</span> <span class=\"hljs-string\">STORE_MODE=file</span>\n</code></pre>\n<h2>容器命令行及查看日志</h2>\n<pre><code class=\"language-bash\">$ docker <span class=\"hljs-built_in\">exec</span> -it seata-server sh\n</code></pre>\n<pre><code class=\"language-bash\">$ docker logs -f seata-server\n</code></pre>\n<h2>使用自定义配置文件</h2>\n<p>自定义配置文件需要通过挂载文件的方式实现，将宿主机上的 <code>registry.conf</code> 和 <code>file.conf</code> 挂载到容器中相应的目录</p>\n<ul>\n<li>指定 registry.conf</li>\n</ul>\n<p>使用自定义配置文件时必须指定环境变量 <code>SEATA_CONFIG_NAME</code>, 并且值需要以<code>file:</code>开始, 如: <code>file:/root/seata-config/registry</code></p>\n<pre><code class=\"language-bash\">$ docker run --name seata-server \\\n        -p 8091:8091 \\\n        -e SEATA_CONFIG_NAME=file:/root/seata-config/registry \\\n        -v /User/seata/config:/root/seata-config  \\\n        seataio/seata-server\n</code></pre>\n<p>其中 <code>-e</code> 用于配置环境变量， <code>-v</code> 用于挂载宿主机的目录</p>\n<ul>\n<li>指定 file.conf</li>\n</ul>\n<p>如果需要同时指定 <code>file.conf</code> 配置文件，则需要在 <code>registry.conf</code> 文件中将 <code>config</code> 配置改为以下内容，<code>name</code> 的值为容器中对应的路径</p>\n<pre><code>config {\n  type = &quot;file&quot;\n\n  file {\n    name = &quot;file:/root/seata-config/file.conf&quot;\n  }\n}\n</code></pre>\n<h2>环境变量</h2>\n<p>seata-server 支持以下环境变量：</p>\n<ul>\n<li><strong>SEATA_IP</strong></li>\n</ul>\n<blockquote>\n<p>可选, 指定seata-server启动的IP, 该IP用于向注册中心注册时使用, 如eureka等</p>\n</blockquote>\n<ul>\n<li><strong>SEATA_PORT</strong></li>\n</ul>\n<blockquote>\n<p>可选, 指定seata-server启动的端口, 默认为 <code>8091</code></p>\n</blockquote>\n<ul>\n<li><strong>STORE_MODE</strong></li>\n</ul>\n<blockquote>\n<p>可选, 指定seata-server的事务日志存储方式, 支持<code>db</code> ,<code>file</code>,redis(Seata-Server 1.3及以上版本支持), 默认是 <code>file</code></p>\n</blockquote>\n<ul>\n<li><strong>SERVER_NODE</strong></li>\n</ul>\n<blockquote>\n<p>可选, 用于指定seata-server节点ID, 如 <code>1</code>,<code>2</code>,<code>3</code>..., 默认为 <code>根据ip生成</code></p>\n</blockquote>\n<ul>\n<li><strong>SEATA_ENV</strong></li>\n</ul>\n<blockquote>\n<p>可选, 指定 seata-server 运行环境, 如 <code>dev</code>, <code>test</code> 等, 服务启动时会使用 <code>registry-dev.conf</code> 这样的配置</p>\n</blockquote>\n<ul>\n<li><strong>SEATA_CONFIG_NAME</strong></li>\n</ul>\n<blockquote>\n<p>可选, 指定配置文件位置, 如 <code>file:/root/registry</code>, 将会加载 <code>/root/registry.conf</code> 作为配置文件，如果需要同时指定 <code>file.conf</code>文件，需要将<code>registry.conf</code>的<code>config.file.name</code>的值改为类似<code>file:/root/file.conf</code>：</p>\n</blockquote>\n",
  "link": "/zh-cn/docs/ops/deploy-by-docker.html",
  "meta": {
    "hidden": "true",
    "title": "使用 Docker 部署 Seata Server",
    "keywords": "docker,docker-compose,ops",
    "description": "使用 Docker 部署 Seata Server",
    "author": "helloworlde",
    "date": "2019-11-25"
  }
}