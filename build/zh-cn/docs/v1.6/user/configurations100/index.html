<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v1.6 docs-doc-page docs-doc-id-user/configurations100" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Seata 参数配置 | Apache Seata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://seata.apache.org/zh-cn/img/seata_logo.png"><meta data-rh="true" name="twitter:image" content="https://seata.apache.org/zh-cn/img/seata_logo.png"><meta data-rh="true" property="og:url" content="https://seata.apache.org/zh-cn/docs/v1.6/user/configurations100"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="v1.6"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.6"><meta data-rh="true" name="docsearch:version" content="v1.6"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.6"><meta data-rh="true" property="og:title" content="Seata 参数配置 | Apache Seata"><meta data-rh="true" name="description" content="Seata 参数配置。"><meta data-rh="true" property="og:description" content="Seata 参数配置。"><meta data-rh="true" name="keywords" content="Seata"><link data-rh="true" rel="icon" href="/zh-cn/img/seata_logo_small.jpeg"><link data-rh="true" rel="canonical" href="https://seata.apache.org/zh-cn/docs/v1.6/user/configurations100"><link data-rh="true" rel="alternate" href="https://seata.apache.org/docs/v1.6/user/configurations100" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://seata.apache.org/zh-cn/docs/v1.6/user/configurations100" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://seata.apache.org/docs/v1.6/user/configurations100" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ICHFIJRDZF-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/zh-cn/blog/rss.xml" title="Apache Seata RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-cn/blog/atom.xml" title="Apache Seata Atom Feed">


<link rel="search" type="application/opensearchdescription+xml" title="Apache Seata" href="/zh-cn/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=seata"><link rel="stylesheet" href="/zh-cn/assets/css/styles.1f151b5e.css">
<script src="/zh-cn/assets/js/runtime~main.bd2105cb.js" defer="defer"></script>
<script src="/zh-cn/assets/js/main.4453bdef.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="/zh-cn/img/seata_logo.png" alt="Seata Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh-cn/img/seata_logo.png" alt="Seata Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/zh-cn/">首页</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/overview/what-is-seata" href="/zh-cn/docs/v1.6/overview/what-is-seata">v1.6</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-cn/docs/next/user/configurations100">预览版</a></li><li><a class="dropdown__link" href="/zh-cn/docs/user/configurations100">v2.0</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.8/user/configurations100">v1.8</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.7/user/configurations100">v1.7</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh-cn/docs/v1.6/user/configurations100">v1.6</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.5/user/configurations100">v1.5</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.4/user/configurations100">v1.4</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.3/user/configurations100">v1.3</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.2/user/configurations100">v1.2</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.1/user/configurations100">v1.1</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.0/user/configurations100">v1.0</a></li></ul></div><a class="navbar__item navbar__link" href="/zh-cn/docs/v1.6/developers/contributor-guide/new-contributor-guide_dev">开发者</a><a class="navbar__item navbar__link" href="/zh-cn/blog">博客</a><a class="navbar__item navbar__link" href="/zh-cn/users">用户</a><a class="navbar__item navbar__link" href="/zh-cn/community">社区</a><a class="navbar__item navbar__link" href="/zh-cn/unversioned/download/seata-server">下载</a><a class="navbar__item navbar__link" href="/zh-cn/solution">解决方案</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">设计器</a><ul class="dropdown__menu"><li><a href="/zh-cn/saga-designer" class="dropdown__link" target="_blank">Saga 设计器</a></li><li><a href="/zh-cn/saga-designer-legacy" class="dropdown__link" target="_blank">Saga 设计器（旧版）</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中</a><ul class="dropdown__menu"><li><a href="/docs/v1.6/user/configurations100" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">En</a></li><li><a href="/zh-cn/docs/v1.6/user/configurations100" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中</a></li></ul></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Apache Seata<!-- --> <b>v1.6</b> 版的文档，现已不再积极维护。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/zh-cn/docs/user/configurations100">最新版本</a></b> (<!-- -->v2.0<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">版本：v1.6</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>seata 参数配置 1.0.0 版本</h1>
<a href="./configurations090">查看 0.9.0.1 之前版本</a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="变更记录">变更记录<a href="#变更记录" class="hash-link" aria-label="变更记录的直接链接" title="变更记录的直接链接">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">20191221: 增加seata.enabled、client.report.success.enable、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transport.enable-client-batch-send-request、client.log.exceptionRate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="关注属性详细描述见全属性">关注属性(详细描述见全属性)<a href="#关注属性详细描述见全属性" class="hash-link" aria-label="关注属性(详细描述见全属性)的直接链接" title="关注属性(详细描述见全属性)的直接链接">​</a></h2>
<table><thead><tr><th>server 端</th><th>client 端</th></tr></thead><tbody><tr><td>registry.type</td><td>registry.type</td></tr><tr><td>config.type</td><td>config.type</td></tr><tr><td>store.mode</td><td>service.vgroup_mapping.my_test_tx_group</td></tr><tr><td>store.db.driver-class-name</td><td>service.default.grouplist</td></tr><tr><td>store.db.url</td><td>service.disableGlobalTransaction</td></tr><tr><td>store.db.user</td><td>client.support.spring.datasource.autoproxy</td></tr><tr><td>store.db.password</td><td></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="全属性">全属性<a href="#全属性" class="hash-link" aria-label="全属性的直接链接" title="全属性的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="公共部分">公共部分<a href="#公共部分" class="hash-link" aria-label="公共部分的直接链接" title="公共部分的直接链接">​</a></h3>
<table><thead><tr><th>key</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>transport.serialization</td><td>client 和 server 通信  编解码方式</td><td>seata（ByteBuf）、protobuf、kryo、hessian，默认 seata</td></tr><tr><td>transport.compressor</td><td>client 和 server 通信数据压缩方式</td><td>none、gzip，默认 none</td></tr><tr><td>transport.heartbeat</td><td>client 和 server 通信心跳检测开关</td><td>默认 true 开启</td></tr><tr><td>registry.type</td><td>注册中心类型</td><td>默认 file，支持 file 、nacos 、eureka、redis、zk、consul、etcd3、sofa、custom</td></tr><tr><td>config.type</td><td>配置中心类型</td><td>默认 file，支持 file、nacos 、apollo、zk、consul、etcd3、custom</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-端">server 端<a href="#server-端" class="hash-link" aria-label="server 端的直接链接" title="server 端的直接链接">​</a></h3>
<table><thead><tr><th>key</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>server.undo.log.save.days</td><td>undo 保留天数</td><td>默认 7 天,log_status=1（附录 3）和未正常清理的 undo</td></tr><tr><td>server.undo.log.delete.period</td><td>undo 清理线程间隔时间</td><td>默认 86400000，单位毫秒</td></tr><tr><td>server.max.commit.retry.timeout</td><td>二阶段提交重试超时时长</td><td>单位 ms,s,m,h,d,对应毫秒,秒,分,小时,天,默认毫秒。默认值-1 表示无限重试。公式: timeout&gt;=now-globalTransactionBeginTime,true 表示超时则不再重试</td></tr><tr><td>server.max.rollback.retry.timeout</td><td>二阶段回滚重试超时时长</td><td>同 commit</td></tr><tr><td>server.recovery.committing-retry-period</td><td>二阶段提交未完成状态全局事务重试提交线程间隔时间</td><td>默认 1000，单位毫秒</td></tr><tr><td>server.recovery.asyn-committing-retry-period</td><td>二阶段异步提交状态重试提交线程间隔时间</td><td>默认 1000，单位毫秒</td></tr><tr><td>server.recovery.rollbacking-retry-period</td><td>二阶段回滚状态重试回滚线程间隔时间</td><td>默认 1000 ，单位毫秒</td></tr><tr><td>server.recovery.timeout-retry-period</td><td>超时状态检测重试线程间隔时间</td><td>默认 1000，单位毫秒，检测出超时将全局事务置入回滚会话管理器</td></tr><tr><td>store.mode</td><td>事务会话信息存储方式</td><td>file 本地文件(不支持 HA)，db 数据库(支持 HA)</td></tr><tr><td>store.file.dir</td><td>file 模式文件存储文件夹名</td><td>默认 sessionStore</td></tr><tr><td>store.db.datasource</td><td>db 模式数据源类型</td><td>默认 dbcp</td></tr><tr><td>store.db.db-type</td><td>db 模式数据库类型</td><td>默认 mysql</td></tr><tr><td>store.db.driver-class-name</td><td>db 模式数据库驱动</td><td>默认 com.mysql.jdbc.Driver</td></tr><tr><td>store.db.url</td><td>db 模式数据库 url</td><td>默认 jdbc:mysql://127.0.0.1:3306/seata</td></tr><tr><td>store.db.user</td><td>db 模式数据库账户</td><td>默认 mysql</td></tr><tr><td>store.db.password</td><td>db 模式数据库账户密码</td><td>默认 mysql</td></tr><tr><td>store.db.min-conn</td><td>db 模式数据库初始连接数</td><td>默认 1</td></tr><tr><td>store.db.max-conn</td><td>db 模式数据库最大连接数</td><td>默认 3</td></tr><tr><td>store.db.global.table</td><td>db 模式全局事务表名</td><td>默认 global_table</td></tr><tr><td>store.db.branch.table</td><td>db 模式分支事务表名</td><td>默认 branch_table</td></tr><tr><td>store.db.lock-table</td><td>db 模式全局锁表名</td><td>默认 lock_table</td></tr><tr><td>store.db.query-limit</td><td>db 模式查询全局事务一次的最大条数</td><td>默认 100</td></tr><tr><td>metrics.enabled</td><td>是否启用 Metrics</td><td>默认 false 关闭，在 False 状态下，所有与 Metrics 相关的组件将不会被初始化，使得性能损耗最低</td></tr><tr><td>metrics.registry-type</td><td>指标注册器类型</td><td>Metrics 使用的指标注册器类型，默认为内置的 compact（简易）实现，这个实现中的 Meter 仅使用有限内存  计数，性能高足够满足大多数场景；目前只能设置一个指标注册器实现</td></tr><tr><td>metrics.exporter-list</td><td>指标结果 Measurement 数据输出器列表</td><td>默认 prometheus，多个输出器使用英文逗号分割，例如&quot;prometheus,jmx&quot;，目前仅实现了对接 prometheus 的输出器</td></tr><tr><td>metrics.exporter-prometheus-port</td><td>prometheus 输出器 Client 端口号</td><td>默认 9898</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-端">client 端<a href="#client-端" class="hash-link" aria-label="client 端的直接链接" title="client 端的直接链接">​</a></h3>
<table><thead><tr><th>key</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>seata.enabled</td><td>是否开启 spring-boot 自动装配</td><td>true、false，默认 true（附录 4）</td></tr><tr><td>client.report.success.enable</td><td>是否上报一阶段成功</td><td>true、false，默认 true 用于保持分支事务生命周期记录完整，false 可提高不少性能</td></tr><tr><td>transport.enable-client-batch-send-request</td><td>客户端事务消息请求是否批量合并发送</td><td>默认 true，false 单条发送</td></tr><tr><td>client.log.exceptionRate</td><td>日志异常输出概率</td><td>默认 100，目前用于 undo 回滚失败时异常堆栈输出，百分之一的概率输出，回滚失败基本是脏数据，无需输出堆栈占用硬盘空间</td></tr><tr><td>service.vgroup_mapping.my_test_tx_group</td><td>事务群组（附录 1）</td><td>my_test_tx_group 为分组，配置项值为 TC 集群名</td></tr><tr><td>service.default.grouplist</td><td>TC 服务列表（附录 2）</td><td>仅注册中心为 file 时使用</td></tr><tr><td>service.disableGlobalTransaction</td><td>全局事务开关</td><td>默认 false。false 为开启，true 为关闭</td></tr><tr><td>service.enableDegrade</td><td>降级开关（待实现）</td><td>默认 false。业务侧根据连续错误数自动降级不走 seata 事务</td></tr><tr><td>client.rm.async.commit.buffer.limit</td><td>异步提交缓存队列长度</td><td>默认 10000。 二阶段提交成功，RM 异步清理 undo 队列</td></tr><tr><td>client.rm.lock.retry.internal</td><td>校验或占用全局锁重试间隔</td><td>默认 10，单位毫秒</td></tr><tr><td>client.rm.lock.retry.times</td><td>校验或占用全局锁重试次数</td><td>默认 30</td></tr><tr><td>client.rm.lock.retry.policy.branch-rollback-on-conflict</td><td>分支事务与其它全局回滚事务冲突时锁策略</td><td>默认 true，优先释放本地锁让回滚成功</td></tr><tr><td>client.rm.report.retry.count</td><td>一阶段结果上报 TC 重试次数</td><td>默认 5 次</td></tr><tr><td>client.rm.table.meta.check.enable</td><td>自动刷新缓存中的表结构</td><td>默认 false</td></tr><tr><td>client.tm.commit.retry.count</td><td>一阶段全局提交结果上报 TC 重试次数</td><td>默认 1 次，建议大于 1</td></tr><tr><td>client.tm.rollback.retry.count</td><td>一阶段全局回滚结果上报 TC 重试次数</td><td>默认 1 次，建议大于 1</td></tr><tr><td>client.undo.data.validation</td><td>二阶段回滚镜像校验</td><td>默认 true 开启，false 关闭</td></tr><tr><td>client.undo.log.serialization</td><td>undo 序列化方式</td><td>默认 jackson</td></tr><tr><td>client.undo.log.table</td><td>自定义 undo 表名</td><td>默认 undo_log</td></tr><tr><td>client.support.spring.datasource.autoproxy</td><td>数据源自动代理开关</td><td>默认 false 关闭</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="未使用">未使用<a href="#未使用" class="hash-link" aria-label="未使用的直接链接" title="未使用的直接链接">​</a></h3>
<table><thead><tr><th>key</th><th>desc</th><th>remark</th></tr></thead><tbody><tr><td>lock.mode</td><td>锁存储方式</td><td>local、remote</td></tr><tr><td>lock.local</td><td></td><td></td></tr><tr><td>lock.remote</td><td></td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="参数同步到配置中心使用-demo">参数同步到配置中心使用 demo<a href="#参数同步到配置中心使用-demo" class="hash-link" aria-label="参数同步到配置中心使用 demo的直接链接" title="参数同步到配置中心使用 demo的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nacos">Nacos<a href="#nacos" class="hash-link" aria-label="Nacos的直接链接" title="Nacos的直接链接">​</a></h4>
<p>shell:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sh $\{SEATAPATH}/script/config-center/nacos/nacos-config.sh -h localhost -p 8848 -g SEATA_GROUP -t 5a3c7d6c-f497-4d68-a71a-2e5e3340b3ca</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<p>-h: host，默认值 localhost</p>
<p>-p: port，默认值 8848</p>
<p>-g: 配置分组，默认值为 &#x27;SEATA_GROUP&#x27;</p>
<p>-t: 租户信息，对应 Nacos 的命名空间 ID 字段, 默认值为空 &#x27;&#x27;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="apollo">Apollo<a href="#apollo" class="hash-link" aria-label="Apollo的直接链接" title="Apollo的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sh $\{SEATAPATH}/script/config-center/apollo/apollo-config.sh -h localhost -p 8070 -e DEV -a seata-server -c default -n application -d apollo -r apollo -t 3aa026fc8435d0fc4505b345b8fa4578fb646a2c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<p>-h: host，默认值 localhost</p>
<p>-p: port，默认值 8070</p>
<p>-e: 所管理的配置环境，默认值 DEV</p>
<p>-a: Namespace 所属的 AppId，默认值 seata-server</p>
<p>-c: 所管理的配置集群名， 一般情况下传入 default 即可。如果是特殊集群，传入相应集群的名称即可，默认值 default</p>
<p>-n: 所管理的 Namespace 的名称，如果是非 properties 格式，需要加上后缀名，如 sample.yml，默认值 application</p>
<p>-d: item 的创建人，格式为域账号，也就是 sso 系统的 User ID</p>
<p>-r: 发布人，域账号，注意：如果 ApolloConfigDB.ServerConfig 中的 namespace.lock.switch 设置为 true 的话（默认是 false），那么该环境不允许 发布人和编辑人为同一人。所以如果编辑人是 zhangsan，发布人就不能再是 zhangsan。</p>
<p>-t: Apollo 管理员在 http://{portal_address}/open/manage.html 创建第三方应用，创建之前最好先查询此 AppId 是否已经创建。创建成功之后会生成一个 token</p>
<p>以上参数说明详情请看：</p>
<p><a href="https://github.com/ctripcorp/apollo/wiki/Apollo%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0" target="_blank" rel="noopener noreferrer">https://github.com/ctripcorp/apollo/wiki/Apollo%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="consul">Consul<a href="#consul" class="hash-link" aria-label="Consul的直接链接" title="Consul的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sh $\{SEATAPATH}/script/config-center/consul/consul-config.sh -h localhost -p 8500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<p>-h: host，默认值 localhost</p>
<p>-p: port，默认值 8500</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="etcd3">Etcd3<a href="#etcd3" class="hash-link" aria-label="Etcd3的直接链接" title="Etcd3的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sh $\{SEATAPATH}/script/config-center/etcd3/etcd3-config.sh -h localhost -p 2379</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<p>-h: host，默认值 localhost</p>
<p>-p: port，默认值 2379</p>
<p>python:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python $\{SEATAPATH}/script/config-center/nacos/nacos-config.py localhost:8848</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="zk">ZK<a href="#zk" class="hash-link" aria-label="ZK的直接链接" title="ZK的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sh $\{SEATAPATH}/script/config-center/zk/zk-config.sh -h localhost -p 2181 -z &quot;/Users/zhangchenghui/zookeeper-3.4.14&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<p>-h: host，默认值 localhost</p>
<p>-p: port，默认值 2181</p>
<p>-z: zk 所属路径</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录-1">附录 1：<a href="#附录-1" class="hash-link" aria-label="附录 1：的直接链接" title="附录 1：的直接链接">​</a></h3>
<p>事务分组说明。
1.事务分组是什么？
事务分组是seata的资源逻辑，类似于服务实例。在file.conf中的my_test_tx_group就是一个事务分组。
2.通过事务分组如何找到后端集群？
首先程序中配置了事务分组（GlobalTransactionScanner 构造方法的txServiceGroup参数），程序会通过用户配置的配置中心去寻找service.vgroup_mapping.事务分组配置项，取得配置项的值就是TC集群的名称。拿到集群名称程序通过一定的前后缀+集群名称去构造服务名，各配置中心的服务名实现不同。拿到服务名去相应的注册中心去拉取相应服务名的服务列表，获得后端真实的TC服务列表。
3.为什么这么设计，不直接取服务名？
这里多了一层获取事务分组到映射集群的配置。这样设计后，事务分组可以作为资源的逻辑隔离单位，当发生故障时可以快速failover。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录-2">附录 2：<a href="#附录-2" class="hash-link" aria-label="附录 2：的直接链接" title="附录 2：的直接链接">​</a></h3>
<p>关于grouplist问题说明下。</p>
<ol>
<li>什么时候会用到file.conf中的default.grouplist？
当registry.type=file时会用到，其他时候不读。</li>
<li>default.grouplist的值列表是否可以配置多个？
可以配置多个，配置多个意味着集群，但当store.mode=file时，会报错。原因是在file存储模式下未提供本地文件的同步，所以需要使用store.mode=db，通过db来共享TC集群间数据</li>
<li>是否推荐使用default.grouplist？
不推荐，如问题1，当registry.type=file时会用到，也就是说这里用的不是真正的注册中心，不具体服务的健康检查机制当tc不可用时无法自动剔除列表，推荐使用nacos 、eureka、redis、zk、consul、etcd3、sofa。registry.type=file或config.type=file 设计的初衷是让用户再不依赖第三方注册中心或配置中心的前提下，通过直连的方式，快速验证seata服务。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录-3">附录 3：<a href="#附录-3" class="hash-link" aria-label="附录 3：的直接链接" title="附录 3：的直接链接">​</a></h3>
<p>log_status=1的是防御性的，是收到全局回滚请求，但是不确定某个事务分支的本地事务是否已经执行完成了，这时事先插入一条branchid相同的数据，插入的假数据成功了，本地事务继续执行就会报主键冲突自动回滚。
假如插入不成功说明表里有数据这个本地事务已经执行完成了，那么取出这条undolog数据做反向回滚操作。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="附录-4">附录 4：<a href="#附录-4" class="hash-link" aria-label="附录 4：的直接链接" title="附录 4：的直接链接">​</a></h3>
<p>是否开启spring-boot自动装配，如果开启，则会自动配置seata与spring-boot的集成，包括数据源的自动代理以及GlobalTransactionScanner初始化。
注：1.0版本新特性，需依赖seata-spring-boot-starter。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-seata-website/blob/docusaurus/i18n/zh-cn/docusaurus-plugin-content-docs/version-v1.6/user/configurations100.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#变更记录" class="table-of-contents__link toc-highlight">变更记录</a></li><li><a href="#关注属性详细描述见全属性" class="table-of-contents__link toc-highlight">关注属性(详细描述见全属性)</a></li><li><a href="#全属性" class="table-of-contents__link toc-highlight">全属性</a><ul><li><a href="#公共部分" class="table-of-contents__link toc-highlight">公共部分</a></li><li><a href="#server-端" class="table-of-contents__link toc-highlight">server 端</a></li><li><a href="#client-端" class="table-of-contents__link toc-highlight">client 端</a></li><li><a href="#未使用" class="table-of-contents__link toc-highlight">未使用</a></li><li><a href="#参数同步到配置中心使用-demo" class="table-of-contents__link toc-highlight">参数同步到配置中心使用 demo</a></li><li><a href="#附录-1" class="table-of-contents__link toc-highlight">附录 1：</a></li><li><a href="#附录-2" class="table-of-contents__link toc-highlight">附录 2：</a></li><li><a href="#附录-3" class="table-of-contents__link toc-highlight">附录 3：</a></li><li><a href="#附录-4" class="table-of-contents__link toc-highlight">附录 4：</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/zh-cn/img/apache/incubator.svg" alt="Apache Incubator Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh-cn/img/apache/incubator.svg" alt="Apache Incubator Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">
                  <div class="fs-12">
                    <div class="center-div">
                      <span>Apache Seata (incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</span>
                    </div>
                    <br>
                    <div class="center-div">
                      <span>Copyright © 2023-2024, The Apache Software Foundation Apache Seata, Seata, Apache, Apache Incubator, the Apache feather, the Apache Incubator logo and the Apache Seata project logo are either registered trademarks or trademarks of the Apache Software Foundation.</span>
                      <br>
                    </div>
                    <br>
                  </div>
                  </div></div></div></footer></div>
</body>
</html>