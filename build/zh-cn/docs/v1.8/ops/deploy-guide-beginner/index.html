<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v1.8 plugin-docs plugin-id-default docs-doc-id-ops/deploy-guide-beginner">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">新人文档 | Apache Seata™</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://seata.io/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://seata.io/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://seata.io/zh-cn/docs/v1.8/ops/deploy-guide-beginner"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="v1.8"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.8"><meta data-rh="true" name="docsearch:version" content="v1.8"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.8"><meta data-rh="true" property="og:title" content="新人文档 | Apache Seata™"><meta data-rh="true" name="description" content="Seata分TC、TM和RM三个角色，TC（Server端）为单独服务端部署，TM和RM（Client端）由业务系统集成。"><meta data-rh="true" property="og:description" content="Seata分TC、TM和RM三个角色，TC（Server端）为单独服务端部署，TM和RM（Client端）由业务系统集成。"><meta data-rh="true" name="keywords" content="Seata"><link data-rh="true" rel="icon" href="/zh-cn/img/seata_logo_small.jpeg"><link data-rh="true" rel="canonical" href="https://seata.io/zh-cn/docs/v1.8/ops/deploy-guide-beginner"><link data-rh="true" rel="alternate" href="https://seata.io/docs/v1.8/ops/deploy-guide-beginner" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://seata.io/zh-cn/docs/v1.8/ops/deploy-guide-beginner" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://seata.io/docs/v1.8/ops/deploy-guide-beginner" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ICHFIJRDZF-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/zh-cn/blog/rss.xml" title="Apache Seata™ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-cn/blog/atom.xml" title="Apache Seata™ Atom Feed">


<link rel="search" type="application/opensearchdescription+xml" title="Apache Seata™" href="/zh-cn/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=seata">
<script src="https://www.googletagmanager.com/gtag/js?id=G-X4LJGF90X2" async></script><link rel="stylesheet" href="/zh-cn/assets/css/styles.f8c4a2a1.css">
<link rel="preload" href="/zh-cn/assets/js/runtime~main.44dad29f.js" as="script">
<link rel="preload" href="/zh-cn/assets/js/main.9302682f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<script src="https://hm.baidu.com/hm.js?104e73ef0c18b416b27abb23757ed8ee"></script>
<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="/zh-cn/img/seata_logo.png" alt="Seata Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh-cn/img/seata_logo.png" alt="Seata Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/zh-cn/">首页</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/overview/what-is-seata" href="/zh-cn/docs/v1.8/overview/what-is-seata">v1.8</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-cn/docs/next/ops/deploy-guide-beginner">预览版</a></li><li><a class="dropdown__link" href="/zh-cn/docs/ops/deploy-guide-beginner">v2.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh-cn/docs/v1.8/ops/deploy-guide-beginner">v1.8</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.7/ops/deploy-guide-beginner">v1.7</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.6/ops/deploy-guide-beginner">v1.6</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.5/ops/deploy-guide-beginner">v1.5</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.4/ops/deploy-guide-beginner">v1.4</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.3/ops/deploy-guide-beginner">v1.3</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.2/ops/deploy-guide-beginner">v1.2</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.1/ops/deploy-guide-beginner">v1.1</a></li><li><a class="dropdown__link" href="/zh-cn/docs/v1.0/ops/deploy-guide-beginner">v1.0</a></li></ul></div><a class="navbar__item navbar__link" href="/zh-cn/docs/v1.8/developers/contributor-guide/new-contributor-guide_dev">开发者</a><a class="navbar__item navbar__link" href="/zh-cn/blog">博客</a><a class="navbar__item navbar__link" href="/zh-cn/community">社区</a><a class="navbar__item navbar__link" href="/zh-cn/unversioned/download/seata-server">下载</a><a href="http://demo.seata.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">控制台样例</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中</a><ul class="dropdown__menu"><li><a href="/docs/v1.8/ops/deploy-guide-beginner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">En</a></li><li><a href="/zh-cn/docs/v1.8/ops/deploy-guide-beginner" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">概述</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/overview/what-is-seata">Seata 是什么？</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/overview/history">发展历史</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/overview/terminology">Seata术语表</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/overview/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">用户文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/user/quickstart">快速启动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/user/configurations">参数配置</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/user/mode/at">各事务模式</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/user/txgroup/transaction-group">事务分组</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/user/configuration/">配置中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/user/registry/">注册中心</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/user/api">API 支持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/user/microservice">微服务框架支持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/user/ormframework">ORM框架支持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/user/datasource">数据库类型支持</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/user/sqlreference/sql-restrictions">SQL参考</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/user/apm/skywalking">应用性能监控</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/user/performance">测试报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/user/appendix/global-transaction-status">附录</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">开发者指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/dev/mode/at-mode">各事务模式</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-cn/docs/v1.8/dev/domain/overviewDomainModel">领域模型</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/dev/seata-mertics">Metrics 设计</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">运维指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/ops/upgrade">版本升级指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/ops/multi-configuration-isolation">多配置隔离</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/zh-cn/docs/v1.8/ops/deploy-guide-beginner">部署</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-cn/docs/v1.8/ops/deploy-guide-beginner">新人文档</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/ops/deploy-server">直接部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/ops/deploy-by-docker">Docker部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/ops/deploy-by-docker-compose">Docker compose部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/ops/deploy-by-kubernetes">Kubernetes部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/ops/deploy-by-helm">Helm部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/v1.8/ops/deploy-ha">高可用部署</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Apache Seata™<!-- --> <b>v1.8</b> 版的文档，现已不再积极维护。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/zh-cn/docs/ops/deploy-guide-beginner">最新版本</a></b> (<!-- -->v2.0<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">运维指南</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">部署</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">新人文档</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：v1.8</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>部署指南</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="seata新手部署指南">Seata新手部署指南<a href="#seata新手部署指南" class="hash-link" aria-label="Seata新手部署指南的直接链接" title="Seata新手部署指南的直接链接">​</a></h2><p>Seata分TC、TM和RM三个角色，TC（Server端）为单独服务端部署，TM和RM（Client端）由业务系统集成。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="资源目录介绍">资源目录介绍<a href="#资源目录介绍" class="hash-link" aria-label="资源目录介绍的直接链接" title="资源目录介绍的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="点击查看或根据版本分支选择对应的资源目录"><a href="https://github.com/apache/incubator-seata/tree/master/script" target="_blank" rel="noopener noreferrer">点击查看(或根据版本分支选择对应的资源目录)</a><a href="#点击查看或根据版本分支选择对应的资源目录" class="hash-link" aria-label="点击查看或根据版本分支选择对应的资源目录的直接链接" title="点击查看或根据版本分支选择对应的资源目录的直接链接">​</a></h4><ul><li>client<blockquote><p>存放client端sql脚本 (包含 undo_log表) ，参数配置</p></blockquote></li><li>config-center<blockquote><p>各个配置中心参数导入脚本，config.txt(包含server和client，原名nacos-config.txt)为通用参数文件</p></blockquote></li><li>server<blockquote><p>server端数据库脚本 (包含 lock_table、branch_table 与 global_table) 及各个容器配置</p></blockquote></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="注意事项">注意事项<a href="#注意事项" class="hash-link" aria-label="注意事项的直接链接" title="注意事项的直接链接">​</a></h3><ul><li>seata-spring-boot-starter</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">内置GlobalTransactionScanner自动初始化功能，若外部实现初始化，请参考SeataAutoConfiguration保证依赖加载顺序</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">默认开启数据源自动代理，可配置seata.enable-auto-data-source-proxy: false关闭</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>spring-cloud-starter-alibaba-seata<blockquote><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">查看版本说明</a>2.1.0内嵌seata-all 0.7.1，2.1.1内嵌seata-all 0.9.0，2.2.0内嵌seata-spring-boot-starter 1.0.0, 2.2.1内嵌seata-spring-boot-starter 1.1.0</blockquote></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    2.1.0和2.1.1兼容starter解决方案:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication注解内exclude掉spring-cloud-starter-alibaba-seata内的com.alibaba.cloud.seata.GlobalTransactionAutoConfiguration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>spring-cloud-starter-alibaba-seata推荐依赖配置方式</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">           &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;io.seata&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;artifactId&gt;seata-spring-boot-starter&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;artifactId&gt;spring-cloud-starter-alibaba-seata&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;exclusions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;exclusion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;groupId&gt;io.seata&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;artifactId&gt;seata-spring-boot-starter&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/exclusion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/exclusions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="启动server">启动Server<a href="#启动server" class="hash-link" aria-label="启动Server的直接链接" title="启动Server的直接链接">​</a></h3><p>Server端存储模式（store.mode）现有file、db、redis，file模式无需改动，直接启动即可,下面专门讲下db和redis启动步骤。<br>
<!-- -->注： file模式为单机模式，全局事务会话信息内存中读写并异步(默认)持久化本地文件root.data，性能较高;  </p><p>db模式为高可用模式，全局事务会话信息通过db共享，相应性能差些;</p><p>redis模式Seata-Server 1.3及以上版本支持,性能较高,存在事务信息丢失风险,请提前配置合适当前场景的redis持久化配置.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤一启动包">步骤一：启动包<a href="#步骤一启动包" class="hash-link" aria-label="步骤一：启动包的直接链接" title="步骤一：启动包的直接链接">​</a></h4><ul><li><a href="https://github.com/apache/incubator-seata/releases" target="_blank" rel="noopener noreferrer">点击下载</a></li><li>官方钉钉群（群号：23171167，1群5000人已满，<a href="http://seata.io/zh-cn/community" target="_blank" rel="noopener noreferrer">2群</a>, 3群: 32033786），qq群（群号: 254657148,2群: 216012363）群文件共享下载</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤二建表仅db">步骤二：建表(仅db)<a href="#步骤二建表仅db" class="hash-link" aria-label="步骤二：建表(仅db)的直接链接" title="步骤二：建表(仅db)的直接链接">​</a></h4><p>全局事务会话信息由3块内容构成，全局事务--&gt;分支事务--&gt;全局锁，对应表global_table、branch_table、lock_table</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤三修改storemode">步骤三：修改store.mode<a href="#步骤三修改storemode" class="hash-link" aria-label="步骤三：修改store.mode的直接链接" title="步骤三：修改store.mode的直接链接">​</a></h4><p>启动包: seata--&gt;conf--&gt;application.yml，修改store.mode=&quot;db或者redis&quot;<br>
<!-- -->源码:   根目录--&gt;seata-server--&gt;resources--&gt;application.yml，修改store.mode=&quot;db或者redis&quot;</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤四修改数据库连接redis属性配置">步骤四：修改数据库连接|redis属性配置<a href="#步骤四修改数据库连接redis属性配置" class="hash-link" aria-label="步骤四：修改数据库连接|redis属性配置的直接链接" title="步骤四：修改数据库连接|redis属性配置的直接链接">​</a></h4><p>启动包: seata--&gt;conf--&gt;application.example.yml中附带额外配置，将其db|redis相关配置复制至application.yml,进行修改store.db或store.redis相关属性。<br>
<!-- -->源码:   根目录--&gt;seata-server--&gt;resources--&gt;application.example.yml中附带额外配置，将其db/redis相关配置复制至application.yml,进行修改store.db或store.redis相关属性。  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤五启动">步骤五：启动<a href="#步骤五启动" class="hash-link" aria-label="步骤五：启动的直接链接" title="步骤五：启动的直接链接">​</a></h4><ul><li>源码启动: 执行ServerApplication.java的main方法  </li><li>命令启动: seata-server.sh -h 127.0.0.1 -p 8091 -m db</li></ul><p>注: 堆内存建议分配2G，堆外内存1G</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="业务系统集成client">业务系统集成Client<a href="#业务系统集成client" class="hash-link" aria-label="业务系统集成Client的直接链接" title="业务系统集成Client的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤一添加seata依赖建议单选">步骤一：添加seata依赖（建议单选）<a href="#步骤一添加seata依赖建议单选" class="hash-link" aria-label="步骤一：添加seata依赖（建议单选）的直接链接" title="步骤一：添加seata依赖（建议单选）的直接链接">​</a></h4><ul><li>依赖seata-all</li><li>依赖seata-spring-boot-starter，支持yml、properties配置(.conf可删除)，内部已依赖seata-all</li><li>依赖spring-cloud-starter-alibaba-seata，内部集成了seata，并实现了xid传递</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤二undo_log建表配置参数仅at模式">步骤二：undo_log建表、配置参数(仅AT模式)<a href="#步骤二undo_log建表配置参数仅at模式" class="hash-link" aria-label="步骤二：undo_log建表、配置参数(仅AT模式)的直接链接" title="步骤二：undo_log建表、配置参数(仅AT模式)的直接链接">​</a></h4><ul><li><a href="https://seata.io/zh-cn/docs/user/configurations.html" target="_blank" rel="noopener noreferrer">查看参数配置介绍</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤三数据源代理不支持自动和手动配置并存">步骤三：数据源代理（不支持自动和手动配置并存）<a href="#步骤三数据源代理不支持自动和手动配置并存" class="hash-link" aria-label="步骤三：数据源代理（不支持自动和手动配置并存）的直接链接" title="步骤三：数据源代理（不支持自动和手动配置并存）的直接链接">​</a></h4><ol><li><p>如果使用seata-all</p><ul><li><p>0.9.0版本开始seata支持自动代理数据源</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.1.0: seata-all取消属性配置，改由注解@EnableAutoDataSourceProxy开启，并可选择jdk proxy或者cglib proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.0.0: client.support.spring.datasource.autoproxy=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0.9.0: support.spring.datasource.autoproxy=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  如果采用XA模式，<code>@EnableAutoDataSourceProxy(dataSourceProxyMode = &quot;XA&quot;)</code></p></li><li><p>手动配置可参考下方的例子</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Primary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Bean(&quot;dataSource&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public DataSource dataSource(DataSource druidDataSource) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //AT 代理 二选一</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new DataSourceProxy(druidDataSource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //XA 代理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new DataSourceProxyXA(druidDataSource)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>如果使用seata-starter</p><ul><li><p>使用自动代理数据源时，如果使用XA模式还需要调整配置文件<br>
<!-- -->application.properties</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">seata.data-source-proxy-mode=XA  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  application.yml</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">seata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data-source-proxy-mode: XA</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>如何关闭seata-spring-boot-starter的数据源自动代理？<br>
<!-- -->application.properties</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">seata.enable-auto-data-source-proxy=false  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  application.yml</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">seata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable-auto-data-source-proxy: false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤四初始化globaltransactionscanner">步骤四：初始化GlobalTransactionScanner<a href="#步骤四初始化globaltransactionscanner" class="hash-link" aria-label="步骤四：初始化GlobalTransactionScanner的直接链接" title="步骤四：初始化GlobalTransactionScanner的直接链接">​</a></h4><ul><li>手动</li></ul><div class="language-@Bean codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-@Bean codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">       @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       public GlobalTransactionScanner globalTransactionScanner() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           String applicationName = this.applicationContext.getEnvironment().getProperty(&quot;spring.application.name&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           String txServiceGroup = this.seataProperties.getTxServiceGroup();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           if (StringUtils.isEmpty(txServiceGroup)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               txServiceGroup = applicationName + &quot;-fescar-service-group&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               this.seataProperties.setTxServiceGroup(txServiceGroup);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           return new GlobalTransactionScanner(applicationName, txServiceGroup);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>自动，引入seata-spring-boot-starter、spring-cloud-starter-alibaba-seata等jar</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤五实现xid跨服务传递">步骤五：实现xid跨服务传递<a href="#步骤五实现xid跨服务传递" class="hash-link" aria-label="步骤五：实现xid跨服务传递的直接链接" title="步骤五：实现xid跨服务传递的直接链接">​</a></h4><ul><li>手动
参考源码integration文件夹下的各种rpc实现 module</li><li>自动
springCloud用户可以引入spring-cloud-starter-alibaba-seata，内部已经实现xid传递</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="业务使用">业务使用<a href="#业务使用" class="hash-link" aria-label="业务使用的直接链接" title="业务使用的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="注解拦截">注解拦截<a href="#注解拦截" class="hash-link" aria-label="注解拦截的直接链接" title="注解拦截的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="全局事务">全局事务<a href="#全局事务" class="hash-link" aria-label="全局事务的直接链接" title="全局事务的直接链接">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@GetMapping(value = &quot;testCommit&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@GlobalTransactional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Object testCommit(@RequestParam(name = &quot;id&quot;,defaultValue = &quot;1&quot;) Integer id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestParam(name = &quot;sum&quot;, defaultValue = &quot;1&quot;) Integer sum) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Boolean ok = productService.reduceStock(id, sum);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (ok) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LocalDateTime now = LocalDateTime.now();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Orders orders = new Orders();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orders.setCreateTime(now);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orders.setProductId(id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orders.setReplaceTime(now);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orders.setSum(sum);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orderService.save(orders);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;ok&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;fail&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tcc">TCC<a href="#tcc" class="hash-link" aria-label="TCC的直接链接" title="TCC的直接链接">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 定义两阶段提交 name = 该tcc的bean名称,全局唯一 commitMethod = commit 为二阶段确认方法 rollbackMethod = rollback 为二阶段取消方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * useTCCFence=true 为开启防悬挂</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * BusinessActionContextParameter注解 传递参数到二阶段中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @param params  -入参</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @return String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TwoPhaseBusinessAction(name = &quot;beanName&quot;, commitMethod = &quot;commit&quot;, rollbackMethod = &quot;rollback&quot;, useTCCFence = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void insert(@BusinessActionContextParameter(paramName = &quot;params&quot;) Map&lt;String, String&gt; params) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger.info(&quot;此处可以预留资源,或者利用tcc的特点,与AT混用,二阶段时利用一阶段在此处存放的消息,通过二阶段发出,比如redis,mq等操作&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 确认方法、可以另命名，但要保证与commitMethod一致 context可以传递try方法的参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @param context 上下文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @return boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void commit(BusinessActionContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger.info(&quot;预留资源真正处理,或者发出mq消息和redis入库&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 二阶段取消方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @param context 上下文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @return boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void rollback(BusinessActionContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger.info(&quot;预留资源释放,或清除一阶段准备让二阶段提交时发出的消息缓存&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="切点表达式">切点表达式<a href="#切点表达式" class="hash-link" aria-label="切点表达式的直接链接" title="切点表达式的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="全局事务-1">全局事务<a href="#全局事务-1" class="hash-link" aria-label="全局事务的直接链接" title="全局事务的直接链接">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public AspectTransactionalInterceptor aspectTransactionalInterceptor () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new AspectTransactionalInterceptor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Advisor txAdviceAdvisor(AspectTransactionalInterceptor aspectTransactionalInterceptor ) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pointcut.setExpression(&quot;配置切点表达式使全局事务拦截器生效&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new DefaultPointcutAdvisor(pointcut, aspectTransactionalInterceptor);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-seata-website/blob/docusaurus/i18n/zh-cn/docusaurus-plugin-content-docs/version-v1.8/ops/deploy-guide-beginner.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-cn/docs/v1.8/ops/multi-configuration-isolation"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">多配置隔离</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-cn/docs/v1.8/ops/deploy-server"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">直接部署</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#seata新手部署指南" class="table-of-contents__link toc-highlight">Seata新手部署指南</a><ul><li><a href="#资源目录介绍" class="table-of-contents__link toc-highlight">资源目录介绍</a></li><li><a href="#注意事项" class="table-of-contents__link toc-highlight">注意事项</a></li><li><a href="#启动server" class="table-of-contents__link toc-highlight">启动Server</a></li><li><a href="#业务系统集成client" class="table-of-contents__link toc-highlight">业务系统集成Client</a></li></ul></li><li><a href="#业务使用" class="table-of-contents__link toc-highlight">业务使用</a><ul><li><a href="#注解拦截" class="table-of-contents__link toc-highlight">注解拦截</a></li><li><a href="#切点表达式" class="table-of-contents__link toc-highlight">切点表达式</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/zh-cn/img/apache/incubator.svg" alt="Apache Incubator Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/zh-cn/img/apache/incubator.svg" alt="Apache Incubator Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">
                  <div class="fs-12">
                    <div class="center-div">
                      <span>Apache Seata (incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</span>
                    </div>
                    <br>
                    <div class="center-div">
                      <span>Copyright © 2023-2024, The Apache Software Foundation Apache Seata, Seata, Apache, Apache Incubator, the Apache feather, the Apache Incubator logo and the Apache Seata project logo are either registered trademarks or trademarks of the Apache Software Foundation.</span>
                      <br>
                    </div>
                    <br>
                  </div>
                  </div></div></div></footer></div>
<script src="/zh-cn/assets/js/runtime~main.44dad29f.js"></script>
<script src="/zh-cn/assets/js/main.9302682f.js"></script>
</body>
</html>