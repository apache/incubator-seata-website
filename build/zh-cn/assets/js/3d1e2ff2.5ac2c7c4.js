"use strict";(self.webpackChunkseata_website=self.webpackChunkseata_website||[]).push([[513],{3905:(e,n,r)=>{r.d(n,{Zo:()=>l,kt:()=>m});var t=r(67294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function s(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=t.createContext({}),c=function(e){var n=t.useContext(p),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},l=function(e){var n=c(e.components);return t.createElement(p.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(r),g=a,m=d["".concat(p,".").concat(g)]||d[g]||u[g]||o;return r?t.createElement(m,i(i({ref:n},l),{},{components:r})):t.createElement(m,i({ref:n},l))}));function m(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=g;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s[d]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=r[c];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}g.displayName="MDXCreateElement"},78458:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var t=r(87462),a=(r(67294),r(3905));const o={title:"SpringBoot+Dubbo+MybatisPlus\u6574\u5408seata\u5206\u5e03\u5f0f\u4e8b\u52a1",keywords:["Seata","dubbo","mybatis","\u5206\u5e03\u5f0f\u4e8b\u52a1"],description:"\u672c\u6587\u8bb2\u8ff0\u5982\u4f55\u5c06springboot+dubbo+mybatisplus\u6574\u5408seata\u76f4\u8fde\u65b9\u5f0f\u642d\u5efa",author:"FUNKYE",date:"2019/11/29"},i="SpringBoot+Dubbo+MybatisPlus\u6574\u5408Seata\u5206\u5e03\u5f0f\u4e8b\u52a1",s={permalink:"/zh-cn/blog/springboot-dubbo-mybatisplus-seata",source:"@site/i18n/zh-cn/docusaurus-plugin-content-blog/springboot-dubbo-mybatisplus-seata.md",title:"SpringBoot+Dubbo+MybatisPlus\u6574\u5408seata\u5206\u5e03\u5f0f\u4e8b\u52a1",description:"\u672c\u6587\u8bb2\u8ff0\u5982\u4f55\u5c06springboot+dubbo+mybatisplus\u6574\u5408seata\u76f4\u8fde\u65b9\u5f0f\u642d\u5efa",date:"2019-11-29T00:00:00.000Z",formattedDate:"2019\u5e7411\u670829\u65e5",tags:[],readingTime:22.755,hasTruncateMarker:!1,authors:[{name:"FUNKYE"}],frontMatter:{title:"SpringBoot+Dubbo+MybatisPlus\u6574\u5408seata\u5206\u5e03\u5f0f\u4e8b\u52a1",keywords:["Seata","dubbo","mybatis","\u5206\u5e03\u5f0f\u4e8b\u52a1"],description:"\u672c\u6587\u8bb2\u8ff0\u5982\u4f55\u5c06springboot+dubbo+mybatisplus\u6574\u5408seata\u76f4\u8fde\u65b9\u5f0f\u642d\u5efa",author:"FUNKYE",date:"2019/11/29"},prevItem:{title:"\u900f\u8fc7\u6e90\u7801\u89e3\u51b3SeataAT\u6a21\u5f0f\u6574\u5408Mybatis-Plus\u5931\u53bbMP\u7279\u6027\u7684\u95ee\u9898",permalink:"/zh-cn/blog/seata-mybatisplus-analysis"},nextItem:{title:"Seata \u5ba2\u6237\u7aef\u9700\u8981\u540c\u65f6\u542f\u52a8 RM \u548c TM \u5417\uff1f",permalink:"/zh-cn/blog/seata-at-mode-start-rm-tm"}},p={authorsImageUrls:[void 0]},c=[{value:"\u5efa\u5e93\u5efa\u8868",id:"\u5efa\u5e93\u5efa\u8868",level:2}],l={toc:c},d="wrapper";function u(e){let{components:n,...o}=e;return(0,a.kt)(d,(0,t.Z)({},l,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://gitee.com/itCjb/springboot-dubbo-mybatisplus-seata"},"\u9879\u76ee\u5730\u5740")),(0,a.kt)("p",null,"\u672c\u6587\u4f5c\u8005\uff1aFUNKYE(\u9648\u5065\u658c),\u676d\u5dde\u67d0\u4e92\u8054\u7f51\u516c\u53f8\u4e3b\u7a0b\u3002"),(0,a.kt)("h1",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,a.kt)("p",null,"\u200b    ",(0,a.kt)("strong",{parentName:"p"},"\u4e8b\u52a1"),"\uff1a\u4e8b\u52a1\u662f\u7531\u4e00\u7ec4\u64cd\u4f5c\u6784\u6210\u7684\u53ef\u9760\u7684\u72ec\u7acb\u7684\u5de5\u4f5c\u5355\u5143\uff0c\u4e8b\u52a1\u5177\u5907ACID\u7684\u7279\u6027\uff0c\u5373\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u548c\u6301\u4e45\u6027\u3002\n\u200b    ",(0,a.kt)("strong",{parentName:"p"},"\u5206\u5e03\u5f0f\u4e8b\u52a1"),":\u5f53\u4e00\u4e2a\u64cd\u4f5c\u7275\u6d89\u5230\u591a\u4e2a\u670d\u52a1,\u591a\u53f0\u6570\u636e\u5e93\u534f\u529b\u5b8c\u6210\u65f6(\u6bd4\u5982\u5206\u8868\u5206\u5e93\u540e,\u4e1a\u52a1\u62c6\u5206),\u591a\u4e2a\u670d\u52a1\u4e2d\uff0c\u672c\u5730\u7684Transaction\u5df2\u7ecf\u65e0\u6cd5\u5e94\u5bf9\u8fd9\u4e2a\u60c5\u51b5\u4e86,\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\uff0c\u5c31\u9700\u8981\u7528\u5230\u5206\u5e03\u5f0f\u4e8b\u52a1\u3002\n\u200b    ",(0,a.kt)("strong",{parentName:"p"},"Seata")," \uff1a\u662f\u4e00\u6b3e\u5f00\u6e90\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u89e3\u51b3\u65b9\u6848\uff0c\u81f4\u529b\u4e8e\u5728\u5fae\u670d\u52a1\u67b6\u6784\u4e0b\u63d0\u4f9b\u9ad8\u6027\u80fd\u548c\u7b80\u5355\u6613\u7528\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u670d\u52a1\u3002\n\u200b    ",(0,a.kt)("strong",{parentName:"p"},"\u672c\u6587\u76ee\u7684"),"\uff1a\u73b0\u5982\u4eca\u5fae\u670d\u52a1\u8d8a\u6765\u8d8a\u6d41\u884c\uff0c\u800c\u5e02\u9762\u4e0a\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u65b9\u6848\u53ef\u8c13\u4e0d\u5c11\uff0c\u53c2\u5dee\u4e0d\u9f50\uff0c\u6bd4\u8f83\u6d41\u884c\u7684\u4ee5MQ\u4ee3\u8868\u7684\u4fdd\u8bc1\u7684\u662f\u6d88\u606f\u6700\u7ec8\u4e00\u81f4\u6027\u7684\u89e3\u51b3\u65b9\u6848\uff08\u6d88\u8d39\u786e\u8ba4\uff0c\u6d88\u606f\u56de\u67e5\uff0c\u6d88\u606f\u8865\u507f\u673a\u5236\u7b49\uff09\uff0c\u4ee5\u53caTX-LCN\u7684LCN\u6a21\u5f0f\u534f\u8c03\u672c\u5730\u4e8b\u52a1\u6765\u4fdd\u8bc1\u4e8b\u52a1\u7edf\u4e00\u63d0\u4ea4\u6216\u56de\u6eda\uff08\u5df2\u7ecf\u505c\u6b62\u66f4\u65b0\uff0c\u5bf9Dubbo2.7\u4e0d\u517c\u5bb9\uff09\u3002\u800cMQ\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u592a\u8fc7\u590d\u6742\uff0cTX-LCN\u65ad\u66f4\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u4e00\u4e2a\u9ad8\u6548\u53ef\u9760\u53ca\u6613\u4e0a\u624b\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u89e3\u51b3\u65b9\u6848\uff0cSeata\u8131\u9896\u800c\u51fa\uff0c\u672c\u6587\u8981\u4ecb\u7ecd\u7684\u5c31\u662f\u5982\u4f55\u5feb\u901f\u642d\u5efa\u4e00\u4e2a\u6574\u5408Seata\u7684Demo\u9879\u76ee\uff0c\u4e00\u8d77\u6765\u5427\uff01"),(0,a.kt)("h1",{id:"\u51c6\u5907\u5de5\u4f5c"},"\u51c6\u5907\u5de5\u4f5c"),(0,a.kt)("p",null,"1.\u9996\u5148\u5b89\u88c5mysql,eclipse\u4e4b\u7c7b\u5e38\u7528\u7684\u5de5\u5177,\u8fd9\u4e0d\u5c55\u5f00\u4e86. "),(0,a.kt)("p",null,"2.\u8bbf\u95eeseata\u4e0b\u8f7d\u4e2d\u5fc3",(0,a.kt)("a",{parentName:"p",href:"http://seata.io/zh-cn/blog/download.html"},"\u5730\u5740"),"\u6211\u4eec\u4f7f\u7528\u76840.9.0\u7248\u672c"),(0,a.kt)("p",null,"3.\u4e0b\u8f7d\u5e76\u89e3\u538bseata-server"),(0,a.kt)("h2",{id:"\u5efa\u5e93\u5efa\u8868"},"\u5efa\u5e93\u5efa\u8868"),(0,a.kt)("p",null,"1.\u9996\u5148\u6211\u4eec\u94fe\u63a5mysql\u521b\u5efa\u4e00\u4e2a\u540d\u4e3aseata\u7684\u6570\u636e\u5e93,\u7136\u540e\u8fd0\u884c\u4e00\u4e0b\u5efa\u8868sql,\u8fd9\u4e2a\u5728seata-server\u7684conf\u6587\u4ef6\u5939\u5185\u7684db_store.sql\u5c31\u662f\u6211\u7684\u6240\u9700\u8981\u4f7f\u7528\u7684sql\u4e86."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"/*\nNavicat MySQL Data Transfer\nSource Server         : mysql\nSource Server Version : 50721\nSource Host           : localhost:3306\nSource Database       : seata\nTarget Server Type    : MYSQL\nTarget Server Version : 50721\nFile Encoding         : 65001\nDate: 2019-11-23 22:03:18\n*/\n\nSET FOREIGN_KEY_CHECKS=0;\n\n-- ----------------------------\n\n-- Table structure for branch_table\n\n-- ----------------------------\n\nDROP TABLE IF EXISTS `branch_table`;\nCREATE TABLE `branch_table` (\n  `branch_id` bigint(20) NOT NULL,\n  `xid` varchar(128) NOT NULL,\n  `transaction_id` bigint(20) DEFAULT NULL,\n  `resource_group_id` varchar(32) DEFAULT NULL,\n  `resource_id` varchar(256) DEFAULT NULL,\n  `lock_key` varchar(128) DEFAULT NULL,\n  `branch_type` varchar(8) DEFAULT NULL,\n  `status` tinyint(4) DEFAULT NULL,\n  `client_id` varchar(64) DEFAULT NULL,\n  `application_data` varchar(2000) DEFAULT NULL,\n  `gmt_create` datetime DEFAULT NULL,\n  `gmt_modified` datetime DEFAULT NULL,\n  PRIMARY KEY (`branch_id`),\n  KEY `idx_xid` (`xid`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- ----------------------------\n\n-- Records of branch_table\n\n-- ----------------------------\n\n-- ----------------------------\n\n-- Table structure for global_table\n\n-- ----------------------------\n\nDROP TABLE IF EXISTS `global_table`;\nCREATE TABLE `global_table` (\n  `xid` varchar(128) NOT NULL,\n  `transaction_id` bigint(20) DEFAULT NULL,\n  `status` tinyint(4) NOT NULL,\n  `application_id` varchar(32) DEFAULT NULL,\n  `transaction_service_group` varchar(32) DEFAULT NULL,\n  `transaction_name` varchar(128) DEFAULT NULL,\n  `timeout` int(11) DEFAULT NULL,\n  `begin_time` bigint(20) DEFAULT NULL,\n  `application_data` varchar(2000) DEFAULT NULL,\n  `gmt_create` datetime DEFAULT NULL,\n  `gmt_modified` datetime DEFAULT NULL,\n  PRIMARY KEY (`xid`),\n  KEY `idx_gmt_modified_status` (`gmt_modified`,`status`),\n  KEY `idx_transaction_id` (`transaction_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- ----------------------------\n\n-- Records of global_table\n\n-- ----------------------------\n\n-- ----------------------------\n\n-- Table structure for lock_table\n\n-- ----------------------------\n\nDROP TABLE IF EXISTS `lock_table`;\nCREATE TABLE `lock_table` (\n  `row_key` varchar(128) NOT NULL,\n  `xid` varchar(96) DEFAULT NULL,\n  `transaction_id` mediumtext,\n  `branch_id` mediumtext,\n  `resource_id` varchar(256) DEFAULT NULL,\n  `table_name` varchar(32) DEFAULT NULL,\n  `pk` varchar(36) DEFAULT NULL,\n  `gmt_create` datetime DEFAULT NULL,\n  `gmt_modified` datetime DEFAULT NULL,\n  PRIMARY KEY (`row_key`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- ----------------------------\n\n-- Records of lock_table\n\n-- ----------------------------\n\n-- ----------------------------\n\n-- Table structure for undo_log\n\n-- ----------------------------\n\nDROP TABLE IF EXISTS `undo_log`;\nCREATE TABLE `undo_log` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `branch_id` bigint(20) NOT NULL,\n  `xid` varchar(100) NOT NULL,\n  `context` varchar(128) NOT NULL,\n  `rollback_info` longblob NOT NULL,\n  `log_status` int(11) NOT NULL,\n  `log_created` datetime NOT NULL,\n  `log_modified` datetime NOT NULL,\n  `ext` varchar(100) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `ux_undo_log` (`xid`,`branch_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n-- ----------------------------\n\n-- Records of undo_log\n")),(0,a.kt)("p",null,"2.\u8fd0\u884c\u5b8c\u4e0a\u9762\u7684seata\u6240\u9700\u8981\u7684\u6570\u636e\u5e93\u540e,\u6211\u4eec\u8fdb\u884c\u642d\u5efa\u6211\u4eec\u6240\u9700\u8981\u5199\u7684demo\u7684\u5e93,\u521b\u5efa\u4e00\u4e2a\u540d\u4e3atest\u7684\u6570\u636e\u5e93,\u7136\u540e\u6267\u884c\u4ee5\u4e0bsql\u4ee3\u7801:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"/*\nNavicat MySQL Data Transfer\nSource Server         : mysql\nSource Server Version : 50721\nSource Host           : localhost:3306\nSource Database       : test\nTarget Server Type    : MYSQL\nTarget Server Version : 50721\nFile Encoding         : 65001\nDate: 2019-11-23 22:03:24\n*/\n\nSET FOREIGN_KEY_CHECKS=0;\n\n-- ----------------------------\n\n-- Table structure for test\n\n-- ----------------------------\n\nDROP TABLE IF EXISTS `test`;\nCREATE TABLE `test` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `one` varchar(255) DEFAULT NULL,\n  `two` varchar(255) DEFAULT NULL,\n  `createTime` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4;\n\n-- ----------------------------\n\n-- Records of test\n\n-- ----------------------------\n\nINSERT INTO `test` VALUES ('1', '1', '2', '2019-11-23 16:07:34');\n\n-- ----------------------------\n\n-- Table structure for undo_log\n\n-- ----------------------------\n\nDROP TABLE IF EXISTS `undo_log`;\nCREATE TABLE `undo_log` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `branch_id` bigint(20) NOT NULL,\n  `xid` varchar(100) NOT NULL,\n  `context` varchar(128) NOT NULL,\n  `rollback_info` longblob NOT NULL,\n  `log_status` int(11) NOT NULL,\n  `log_created` datetime NOT NULL,\n  `log_modified` datetime NOT NULL,\n  `ext` varchar(100) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `ux_undo_log` (`xid`,`branch_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\n\n-- ----------------------------\n\n-- Records of undo_log\n")),(0,a.kt)("p",null," 3.\u6211\u4eec\u627e\u5230seata-server/conf \u6587\u4ef6\u5939\u5185\u7684file\u7f16\u8f91\u5b83:",(0,a.kt)("img",{alt:"20191129132933",src:r(95691).Z,width:"860",height:"302"})),(0,a.kt)("p",null," 4.\u518d\u6b21\u627e\u5230\u5176\u4e2d\u7684db\u914d\u7f6e\u65b9\u6cd5\u5757,\u66f4\u6539\u65b9\u6cd5\u5982\u4e0b\u56fe:",(0,a.kt)("img",{src:r(13742).Z,width:"794",height:"397"})),(0,a.kt)("p",null,"\u597d\u4e86,\u53ef\u4ee5\u5230bin\u76ee\u5f55\u53bb./seata-server.bat \u8fd0\u884c\u770b\u770b\u4e86 "),(0,a.kt)("h1",{id:"\u521b\u5efa\u9879\u76ee"},"\u521b\u5efa\u9879\u76ee"),(0,a.kt)("p",null,"\u200b\t\u9996\u5148\u6211\u4eec\u4f7f\u7528\u7684\u662feclipse,\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u7528idea\u4e4b\u7c7b\u7684\u5de5\u5177,\u8be6\u7ec6\u8bf7\u6309\u4e0b\u9762\u6b65\u9aa4\u6765\u8fd0\u884c"),(0,a.kt)("p",null,"\u200b\t1.\u521b\u5efa\u4e00\u4e2a\u65b0\u7684maven\u9879\u76ee,\u5e76\u5220\u9664\u591a\u4f59\u6587\u4ef6\u5939:",(0,a.kt)("img",{alt:"20191129133354",src:r(11167).Z,width:"645",height:"553"}),(0,a.kt)("img",{src:"/img/blog/20191129133441.png",alt:"20191129133441",style:{zoom:"150%"}})),(0,a.kt)("p",null,"\u200b\t2.\u6253\u5f00\u9879\u76ee\u7684pom.xml,\u52a0\u5165\u4ee5\u4e0b\u4f9d\u8d56:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"    <properties>\n        <webVersion>3.1</webVersion>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <maven.compiler.source>1.8</maven.compiler.source>\n        <maven.compiler.target>1.8</maven.compiler.target>\n        <HikariCP.version>3.2.0</HikariCP.version>\n        <mybatis-plus-boot-starter.version>3.2.0</mybatis-plus-boot-starter.version>\n    </properties>\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.1.8.RELEASE</version>\n    </parent>\n    <dependencies>\n        <dependency>\n            <groupId>org.apache.curator</groupId>\n            <artifactId>curator-framework</artifactId>\n            <version>4.2.0</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.curator</groupId>\n            <artifactId>curator-recipes</artifactId>\n            <version>4.2.0</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.dubbo</groupId>\n            <artifactId>dubbo-spring-boot-starter</artifactId>\n            <version>2.7.4.1</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.commons</groupId>\n            <artifactId>commons-lang3</artifactId>\n            </dependency>\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>fastjson</artifactId>\n            <version>1.2.60</version>\n        </dependency>\n        \x3c!-- <dependency> <groupId>javax</groupId> <artifactId>javaee-api</artifactId> \n            <version>7.0</version> <scope>provided</scope> </dependency> --\x3e\n        <dependency>\n            <groupId>io.springfox</groupId>\n            <artifactId>springfox-swagger2</artifactId>\n            <version>2.9.2</version>\n        </dependency>\n        <dependency>\n            <groupId>io.springfox</groupId>\n            <artifactId>springfox-swagger-ui</artifactId>\n            <version>2.9.2</version>\n        </dependency>\n \n        \x3c!-- mybatis-plus begin --\x3e\n        <dependency>\n            <groupId>com.baomidou</groupId>\n            <artifactId>mybatis-plus-boot-starter</artifactId>\n            <version>${mybatis-plus-boot-starter.version}</version>\n        </dependency>\n        \x3c!-- mybatis-plus end --\x3e\n        \x3c!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --\x3e\n        <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <scope>provided</scope>\n        </dependency>\n        <dependency>\n            <groupId>io.seata</groupId>\n            <artifactId>seata-all</artifactId>\n            <version>0.9.0.1</version>\n        </dependency>\n        \x3c!-- Zookeeper --\x3e\n        <dependency>\n            <groupId>org.apache.zookeeper</groupId>\n            <artifactId>zookeeper</artifactId>\n            <version>3.4.9</version>\n            <exclusions>\n                <exclusion>\n                    <groupId>org.slf4j</groupId>\n                    <artifactId>slf4j-log4j12</artifactId>\n                </exclusion>\n            </exclusions>\n        </dependency>\n        \x3c!-- <dependency> <groupId>com.baomidou</groupId> <artifactId>dynamic-datasource-spring-boot-starter</artifactId> \n            <version>2.5.4</version> </dependency> --\x3e\n \n        \x3c!-- <dependency> <groupId>com.baomidou</groupId> <artifactId>mybatis-plus-generator</artifactId> \n            <version>3.1.0</version> </dependency> --\x3e\n        \x3c!-- https://mvnrepository.com/artifact/org.freemarker/freemarker --\x3e\n        <dependency>\n            <groupId>org.freemarker</groupId>\n            <artifactId>freemarker</artifactId>\n        </dependency>\n        \x3c!-- https://mvnrepository.com/artifact/com.alibaba/druid-spring-boot-starter --\x3e\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>druid-spring-boot-starter</artifactId>\n            <version>1.1.20</version>\n        </dependency>\n        \x3c!-- \u52a0\u4e0a\u8fd9\u4e2a\u624d\u80fd\u8fa8\u8ba4\u5230log4j2.yml\u6587\u4ef6 --\x3e\n        <dependency>\n            <groupId>com.fasterxml.jackson.dataformat</groupId>\n            <artifactId>jackson-dataformat-yaml</artifactId>\n        </dependency>\n        <dependency> \x3c!-- \u5f15\u5165log4j2\u4f9d\u8d56 --\x3e\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-log4j2</artifactId>\n        </dependency>\n        \x3c!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --\x3e\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n            <exclusions>\n                <exclusion>\n                    <groupId>org.springframework.boot</groupId>\n                    <artifactId>spring-boot-starter-logging</artifactId>\n                </exclusion>\n                <exclusion>\n                    <groupId>org.slf4j</groupId>\n                    <artifactId>slf4j-log4j12</artifactId>\n                </exclusion>\n            </exclusions>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-aop</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n        \x3c!-- <dependency> <groupId>org.scala-lang</groupId> <artifactId>scala-library</artifactId> \n            <version>2.11.0</version> </dependency> --\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-configuration-processor</artifactId>\n            <optional>true</optional>\n        </dependency>\n    </dependencies>\n\n")),(0,a.kt)("p",null,"\u200b\t3.\u518d\u5207\u6362\u7236\u9879\u76ee\u4e3apom\u6a21\u5f0f,\u8fd8\u662fpom\u6587\u4ef6,\u5207\u6362\u4e3a overview ,\u505a\u5982\u56fe\u64cd\u4f5c:",(0,a.kt)("img",{alt:"20191129134127",src:r(64183).Z,width:"678",height:"511"})),(0,a.kt)("p",null,"4.\u521b\u5efa\u6211\u4eec\u7684demo\u5b50\u9879\u76ee,test-service:",(0,a.kt)("img",{alt:"20191129135935",src:r(78711).Z,width:"638",height:"550"})),(0,a.kt)("p",null,"\u200b\t\u76ee\u5f55\u5982\u4e0b:"),(0,a.kt)("img",{src:"/img/blog/20191129140048.png",alt:"20191129140048",style:{zoom:"200%"}}),(0,a.kt)("p",null," \t\u521b\u5efaEmbeddedZooKeeper.java\u6587\u4ef6,\u8ddf ProviderApplication.java,\u4ee3\u7801\u5982\u4e0b:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test;\n \nimport java.io.File;\nimport java.lang.reflect.Method;\nimport java.util.Properties;\nimport java.util.UUID;\n \nimport org.apache.zookeeper.server.ServerConfig;\nimport org.apache.zookeeper.server.ZooKeeperServerMain;\nimport org.apache.zookeeper.server.quorum.QuorumPeerConfig;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.context.SmartLifecycle;\nimport org.springframework.util.ErrorHandler;\nimport org.springframework.util.SocketUtils;\n \n/**\n * from:\n * https://github.com/spring-projects/spring-xd/blob/v1.3.1.RELEASE/spring-xd-dirt/src/main/java/org/springframework/xd/dirt/zookeeper/ZooKeeperUtils.java\n * \n * Helper class to start an embedded instance of standalone (non clustered) ZooKeeper.\n * \n * NOTE: at least an external standalone server (if not an ensemble) are recommended, even for\n * {@link org.springframework.xd.dirt.server.singlenode.SingleNodeApplication}\n * \n * @author Patrick Peralta\n * @author Mark Fisher\n * @author David Turanski\n */\npublic class EmbeddedZooKeeper implements SmartLifecycle {\n \n    /**\n     * Logger.\n     */\n    private static final Logger logger = LoggerFactory.getLogger(EmbeddedZooKeeper.class);\n \n    /**\n     * ZooKeeper client port. This will be determined dynamically upon startup.\n     */\n    private final int clientPort;\n \n    /**\n     * Whether to auto-start. Default is true.\n     */\n    private boolean autoStartup = true;\n \n    /**\n     * Lifecycle phase. Default is 0.\n     */\n    private int phase = 0;\n \n    /**\n     * Thread for running the ZooKeeper server.\n     */\n    private volatile Thread zkServerThread;\n \n    /**\n     * ZooKeeper server.\n     */\n    private volatile ZooKeeperServerMain zkServer;\n \n    /**\n     * {@link ErrorHandler} to be invoked if an Exception is thrown from the ZooKeeper server thread.\n     */\n    private ErrorHandler errorHandler;\n \n    private boolean daemon = true;\n \n    /**\n     * Construct an EmbeddedZooKeeper with a random port.\n     */\n    public EmbeddedZooKeeper() {\n        clientPort = SocketUtils.findAvailableTcpPort();\n    }\n \n    /**\n     * Construct an EmbeddedZooKeeper with the provided port.\n     *\n     * @param clientPort\n     *            port for ZooKeeper server to bind to\n     */\n    public EmbeddedZooKeeper(int clientPort, boolean daemon) {\n        this.clientPort = clientPort;\n        this.daemon = daemon;\n    }\n \n    /**\n     * Returns the port that clients should use to connect to this embedded server.\n     * \n     * @return dynamically determined client port\n     */\n    public int getClientPort() {\n        return this.clientPort;\n    }\n \n    /**\n     * Specify whether to start automatically. Default is true.\n     * \n     * @param autoStartup\n     *            whether to start automatically\n     */\n    public void setAutoStartup(boolean autoStartup) {\n        this.autoStartup = autoStartup;\n    }\n \n    /**\n     * {@inheritDoc}\n     */\n    public boolean isAutoStartup() {\n        return this.autoStartup;\n    }\n \n    /**\n     * Specify the lifecycle phase for the embedded server.\n     * \n     * @param phase\n     *            the lifecycle phase\n     */\n    public void setPhase(int phase) {\n        this.phase = phase;\n    }\n \n    /**\n     * {@inheritDoc}\n     */\n    public int getPhase() {\n        return this.phase;\n    }\n \n    /**\n     * {@inheritDoc}\n     */\n    public boolean isRunning() {\n        return (zkServerThread != null);\n    }\n \n    /**\n     * Start the ZooKeeper server in a background thread.\n     * <p>\n     * Register an error handler via {@link #setErrorHandler} in order to handle any exceptions thrown during startup or\n     * execution.\n     */\n    public synchronized void start() {\n        if (zkServerThread == null) {\n            zkServerThread = new Thread(new ServerRunnable(), "ZooKeeper Server Starter");\n            zkServerThread.setDaemon(daemon);\n            zkServerThread.start();\n        }\n    }\n \n    /**\n     * Shutdown the ZooKeeper server.\n     */\n    public synchronized void stop() {\n        if (zkServerThread != null) {\n            // The shutdown method is protected...thus this hack to invoke it.\n            // This will log an exception on shutdown; see\n            // https://issues.apache.org/jira/browse/ZOOKEEPER-1873 for details.\n            try {\n                Method shutdown = ZooKeeperServerMain.class.getDeclaredMethod("shutdown");\n                shutdown.setAccessible(true);\n                shutdown.invoke(zkServer);\n            }\n \n            catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n \n            // It is expected that the thread will exit after\n            // the server is shutdown; this will block until\n            // the shutdown is complete.\n            try {\n                zkServerThread.join(5000);\n                zkServerThread = null;\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n                logger.warn("Interrupted while waiting for embedded ZooKeeper to exit");\n                // abandoning zk thread\n                zkServerThread = null;\n            }\n        }\n    }\n \n    /**\n     * Stop the server if running and invoke the callback when complete.\n     */\n    public void stop(Runnable callback) {\n        stop();\n        callback.run();\n    }\n \n    /**\n     * Provide an {@link ErrorHandler} to be invoked if an Exception is thrown from the ZooKeeper server thread. If none\n     * is provided, only error-level logging will occur.\n     * \n     * @param errorHandler\n     *            the {@link ErrorHandler} to be invoked\n     */\n    public void setErrorHandler(ErrorHandler errorHandler) {\n        this.errorHandler = errorHandler;\n    }\n \n    /**\n     * Runnable implementation that starts the ZooKeeper server.\n     */\n    private class ServerRunnable implements Runnable {\n \n        public void run() {\n            try {\n                Properties properties = new Properties();\n                File file = new File(System.getProperty("java.io.tmpdir") + File.separator + UUID.randomUUID());\n                file.deleteOnExit();\n                properties.setProperty("dataDir", file.getAbsolutePath());\n                properties.setProperty("clientPort", String.valueOf(clientPort));\n \n                QuorumPeerConfig quorumPeerConfig = new QuorumPeerConfig();\n                quorumPeerConfig.parseProperties(properties);\n \n                zkServer = new ZooKeeperServerMain();\n                ServerConfig configuration = new ServerConfig();\n                configuration.readFrom(quorumPeerConfig);\n \n                zkServer.runFromConfig(configuration);\n            } catch (Exception e) {\n                if (errorHandler != null) {\n                    errorHandler.handleError(e);\n                } else {\n                    logger.error("Exception running embedded ZooKeeper", e);\n                }\n            }\n        }\n    }\n \n}\n\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test;\n \nimport org.apache.dubbo.config.spring.context.annotation.DubboComponentScan;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n \n/**\n * \n * @author cjb\n * @date 2019/10/24\n */\n@EnableTransactionManagement\n@ComponentScan(basePackages = {"org.test.config", "org.test.service.impl"})\n@DubboComponentScan(basePackages = "org.test.service.impl")\n@SpringBootApplication\npublic class ProviderApplication {\n \n    public static void main(String[] args) {\n        new EmbeddedZooKeeper(2181, false).start();\n        SpringApplication app = new SpringApplication(ProviderApplication.class);\n        app.run(args);\n    }\n \n}\n\n')),(0,a.kt)("p",null," \t\u521b\u5efa\u5b9e\u4f53\u5305 org.test.entity\u4ee5\u53ca\u521b\u5efa\u5b9e\u4f53\u7c7bTest \u7528\u5230\u4e86lombok,\u8be6\u7ec6\u767e\u5ea6\u4e00\u4e0b,eclipse\u88c5lombok\u63d2\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test.entity;\n \nimport java.io.Serializable;\nimport java.time.LocalDateTime;\n \nimport com.baomidou.mybatisplus.annotation.IdType;\nimport com.baomidou.mybatisplus.annotation.TableField;\nimport com.baomidou.mybatisplus.annotation.TableId;\n \nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport lombok.experimental.Accessors;\n \n/**\n * <p>\n * \u529f\u80fd\n * </p>\n *\n * @author Funkye\n * @since 2019-04-23\n */\n@Data\n@EqualsAndHashCode(callSuper = false)\n@Accessors(chain = true)\n@ApiModel(value = "test\u5bf9\u8c61", description = "\u529f\u80fd")\npublic class Test implements Serializable {\n \n    private static final long serialVersionUID = 1L;\n \n    @ApiModelProperty(value = "\u4e3b\u952e")\n    @TableId(value = "id", type = IdType.AUTO)\n    private Integer id;\n \n    @ApiModelProperty(value = "one")\n    @TableField("one")\n    private String one;\n \n    @ApiModelProperty(value = "two")\n    @TableField("two")\n    private String two;\n \n    @ApiModelProperty(value = "createTime")\n    @TableField("createTime")\n    private LocalDateTime createTime;\n \n}\n\n')),(0,a.kt)("p",null,"\u200b\t\u521b\u5efaservice,service.impl,mapper\u7b49\u5305,\u4f9d\u6b21\u521b\u5efaITestservice,\u4ee5\u53ca\u5b9e\u73b0\u7c7b,mapper"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.test.service;\n \nimport org.test.entity.Test;\n \nimport com.baomidou.mybatisplus.extension.service.IService; \n \n/**\n * <p>\n * \u529f\u80fd \u670d\u52a1\u7c7b\n * </p>\n *\n * @author Funkye\n * @since 2019-04-10\n */\npublic interface ITestService extends IService<Test> {\n \n}\n\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test.service.impl;\n \n \n \n \nimport org.apache.dubbo.config.annotation.Service;\nimport org.test.entity.Test;\nimport org.test.mapper.TestMapper;\nimport org.test.service.ITestService;\n \nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\n \n@Service(version = "1.0.0",interfaceClass =ITestService.class )\npublic class TestServiceImpl extends ServiceImpl<TestMapper, Test> implements ITestService {\n \n}\n\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.test.mapper;\n \nimport org.test.entity.Test; \n \nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\n \n/**\n * <p>\n * \u529f\u80fd Mapper \u63a5\u53e3\n * </p>\n *\n * @author Funkye\n * @since 2019-04-10\n */\npublic interface TestMapper extends BaseMapper<Test> {\n \n}\n\n")),(0,a.kt)("p",null," \t\u521b\u5efaorg.test.config\u5305,\u521b\u5efaSeataAutoConfig.java,\u914d\u7f6e\u4fe1\u606f\u90fd\u5728\u6b64\u5904,\u4e3b\u8981\u4f5c\u7528\u4e3a\u4ee3\u7406\u6570\u636e,\u8fde\u63a5\u4e8b\u52a1\u670d\u52a1\u5206\u7ec4 "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test.config;\n\nimport javax.sql.DataSource;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\n\nimport com.alibaba.druid.pool.DruidDataSource;\n\nimport io.seata.rm.datasource.DataSourceProxy;\nimport io.seata.spring.annotation.GlobalTransactionScanner;\n\n@Configuration\npublic class SeataAutoConfig {\n    @Autowired(required = true)\n    private DataSourceProperties dataSourceProperties;\n    private final static Logger logger = LoggerFactory.getLogger(SeataAutoConfig.class);\n\n    @Bean(name = "druidDataSource") // \u58f0\u660e\u5176\u4e3aBean\u5b9e\u4f8b\n    public DataSource druidDataSource() {\n        DruidDataSource druidDataSource = new DruidDataSource();\n        logger.info("dataSourceProperties.getUrl():{}", dataSourceProperties.getUrl());\n        druidDataSource.setUrl(dataSourceProperties.getUrl());\n        druidDataSource.setUsername(dataSourceProperties.getUsername());\n        druidDataSource.setPassword(dataSourceProperties.getPassword());\n        druidDataSource.setDriverClassName(dataSourceProperties.getDriverClassName());\n        druidDataSource.setInitialSize(0);\n        druidDataSource.setMaxActive(180);\n        druidDataSource.setMaxWait(60000);\n        druidDataSource.setMinIdle(0);\n        druidDataSource.setValidationQuery("Select 1 from DUAL");\n        druidDataSource.setTestOnBorrow(false);\n        druidDataSource.setTestOnReturn(false);\n        druidDataSource.setTestWhileIdle(true);\n        druidDataSource.setTimeBetweenEvictionRunsMillis(60000);\n        druidDataSource.setMinEvictableIdleTimeMillis(25200000);\n        druidDataSource.setRemoveAbandoned(true);\n        druidDataSource.setRemoveAbandonedTimeout(1800);\n        druidDataSource.setLogAbandoned(true);\n        logger.info("\u88c5\u8f7ddataSource........");\n        return druidDataSource;\n    }\n\n    /**\n     * init datasource proxy\n     * \n     * @Param: druidDataSource datasource bean instance\n     * @Return: DataSourceProxy datasource proxy\n     */\n    @Bean(name = "dataSource")\n    @Primary // \u5728\u540c\u6837\u7684DataSource\u4e2d\uff0c\u9996\u5148\u4f7f\u7528\u88ab\u6807\u6ce8\u7684DataSource\n    public DataSourceProxy dataSourceProxy(@Qualifier(value = "druidDataSource") DruidDataSource druidDataSource) {\n        logger.info("\u4ee3\u7406dataSource........");\n        return new DataSourceProxy(druidDataSource);\n    }\n\n    /**\n     * init global transaction scanner\n     *\n     * @Return: GlobalTransactionScanner\n     */\n    @Bean\n    public GlobalTransactionScanner globalTransactionScanner() {\n        logger.info("\u914d\u7f6eseata........");\n        return new GlobalTransactionScanner("test-service", "test-group");\n    }\n}\n')),(0,a.kt)("p",null," \t\u518d\u521b\u5efamybatisplus\u6240\u9700\u7684\u914d\u7f6e\u6587\u4ef6MybatisPlusConfig  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test.config;\n \nimport java.util.ArrayList;\nimport java.util.List;\n \nimport org.mybatis.spring.mapper.MapperScannerConfigurer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n \nimport com.baomidou.mybatisplus.core.parser.ISqlParser;\nimport com.baomidou.mybatisplus.extension.parsers.BlockAttackSqlParser;\nimport com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;\n \n@Configuration\n// @MapperScan("com.baomidou.springboot.mapper*")//\u8fd9\u4e2a\u6ce8\u89e3\uff0c\u4f5c\u7528\u76f8\u5f53\u4e8e\u4e0b\u9762\u7684@Bean\n// MapperScannerConfigurer\uff0c2\u8005\u914d\u7f6e1\u4efd\u5373\u53ef\npublic class MybatisPlusConfig {\n \n    /**\n     * mybatis-plus\u5206\u9875\u63d2\u4ef6<br>\n     * \u6587\u6863\uff1ahttp://mp.baomidou.com<br>\n     */\n    @Bean\n    public PaginationInterceptor paginationInterceptor() {\n        PaginationInterceptor paginationInterceptor = new PaginationInterceptor();\n        List<ISqlParser> sqlParserList = new ArrayList<ISqlParser>();\n        // \u653b\u51fb SQL \u963b\u65ad\u89e3\u6790\u5668\u3001\u52a0\u5165\u89e3\u6790\u94fe\n        sqlParserList.add(new BlockAttackSqlParser());\n        paginationInterceptor.setSqlParserList(sqlParserList);\n        return paginationInterceptor;\n    }\n \n    /**\n     * \u76f8\u5f53\u4e8e\u9876\u90e8\u7684\uff1a {@code @MapperScan("com.baomidou.springboot.mapper*")} \u8fd9\u91cc\u53ef\u4ee5\u6269\u5c55\uff0c\u6bd4\u5982\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u6765\u914d\u7f6e\u626b\u63cfMapper\u7684\u8def\u5f84\n     */\n \n    @Bean\n    public MapperScannerConfigurer mapperScannerConfigurer() {\n        MapperScannerConfigurer scannerConfigurer = new MapperScannerConfigurer();\n        scannerConfigurer.setBasePackage("org.test.mapper");\n        return scannerConfigurer;\n    }\n \n}\n\n')),(0,a.kt)("p",null,"\u200b\t \u518d\u521b\u5efa",(0,a.kt)("strong",{parentName:"p"},"resources\u76ee\u5f55,\u521b\u5efamapper\u6587\u4ef6\u5939,application.yml\u7b49\u6587\u4ef6")," "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"server:\n  port: 38888\nspring:\n  application: \n      name: test-service\n  datasource:\n    type: com.alibaba.druid.pool.DruidDataSource\n    url: jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    username: root\n    password: 123456\ndubbo:\n  protocol:\n    loadbalance: leastactive\n    threadpool: cached\n  scan:\n    base-packages: org\u3002test.service\n  application:\n    qos-enable: false\n    name: testserver\n  registry:\n    id: my-registry\n    address:  zookeeper://127.0.0.1:2181?client=curator\nmybatis-plus:\n  mapper-locations: classpath:/mapper/*Mapper.xml\n  typeAliasesPackage: org.test.entity\n  global-config:\n    db-config:\n      field-strategy: not-empty\n      id-type: auto\n      db-type: mysql\n  configuration:\n    map-underscore-to-camel-case: true\n    cache-enabled: true      \n    auto-mapping-unknown-column-behavior: none\n\n")),(0,a.kt)("p",null,"\u200b\t \u521b\u5efafile.conf,\u6b64\u5904\u7684service \u5185\u7684vgroup_mapping.\u4f60\u7684\u4e8b\u52a1\u5206\u7ec4,\u6bd4\u5982\u4e0a",(0,a.kt)("strong",{parentName:"p"},"\u9762SeataAutoConfig\u5185\u914d\u7f6e\u4e86test-group,\u90a3\u4e48\u8fd9\u91cc\u4e5f\u8981\u6539\u4e3atest-group"),",\u7136\u540e\u4e0b\u9762ip\u7aef\u53e3\u90fd\u662fseata\u8fd0\u884c\u7684ip\u8ddf\u7aef\u53e3\u5c31\u884c\u4e86 "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'transport {\n  type = "TCP"\n  server = "NIO"\n  heartbeat = true\n  thread-factory {\n    boss-thread-prefix = "NettyBoss"\n    worker-thread-prefix = "NettyServerNIOWorker"\n    server-executor-thread-prefix = "NettyServerBizHandler"\n    share-boss-worker = false\n    client-selector-thread-prefix = "NettyClientSelector"\n    client-selector-thread-size = 1\n    client-worker-thread-prefix = "NettyClientWorkerThread"\n    boss-thread-size = 1\n    worker-thread-size = 8\n  }\n  shutdown {\n    wait = 3\n  }\n  serialization = "seata"\n  compressor = "none"\n}\nservice {\n  vgroup_mapping.test-group = "default"\n  default.grouplist = "127.0.0.1:8091"\n  enableDegrade = false\n  disable = false\n  max.commit.retry.timeout = "-1"\n  max.rollback.retry.timeout = "-1"\n}\n \nclient {\n  async.commit.buffer.limit = 10000\n  lock {\n    retry.internal = 10\n    retry.times = 30\n  }\n  report.retry.count = 5\n  tm.commit.retry.count = 1\n  tm.rollback.retry.count = 1\n  undo.log.table = "undo_log"\n}\n \nrecovery {\n  committing-retry-period = 1000\n  asyn-committing-retry-period = 1000\n  rollbacking-retry-period = 1000\n  timeout-retry-period = 1000\n}\n \ntransaction {\n  undo.data.validation = true\n  undo.log.serialization = "jackson"\n  undo.log.save.days = 7\n  undo.log.delete.period = 86400000\n  undo.log.table = "undo_log"\n}\n \nmetrics {\n  enabled = false\n  registry-type = "compact"\n  exporter-list = "prometheus"\n  exporter-prometheus-port = 9898\n}\n \nsupport {\n  spring {\n    datasource.autoproxy = false\n  }\n}\n\n')),(0,a.kt)("p",null," \u521b\u5efaregistry.conf,\u6765\u6307\u5b9afile,zk\u7684ip\u7aef\u53e3\u4e4b\u7c7b\u7684\u914d\u7f6e "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'registry {\n  type = "file"\n  file {\n    name = "file.conf"\n  }\n}\nconfig {\n  type = "file"\n  file {\n    name = "file.conf"\n  }\n  zk {\n    serverAddr = "127.0.0.1:2181"\n    session.timeout = 6000\n    connect.timeout = 2000\n  }\n}\n\n')),(0,a.kt)("p",null,"\u200b\t \u5927\u529f\u544a\u6210,\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u5566,\u8fd9\u65f6\u5019\u89c2\u5bdfseata-server",(0,a.kt)("img",{alt:"20191129142115",src:r(47177).Z,width:"695",height:"492"})),(0,a.kt)("p",null,"\u200b\t\u63a5\u4e0b\u6765\u6211\u4eec\u521b\u5efatest-client\u9879\u76ee\u9879\u76ee,\u8fd9\u91cc\u5c31\u4e0d\u8d58\u8ff0\u4e86,\u8ddf\u4e0a\u9762\u7684test-service\u4e00\u6837\u7684\u521b\u5efa\u65b9\u5f0f"),(0,a.kt)("p",null,"\u200b\t\u63a5\u4e0b\u6765\u6211\u4eec\u590d\u5236test-service\u5185\u7684service\u8ddf\u5b9e\u4f53\u8fc7\u53bb,\u5f53\u7136\u4f60\u5acc\u9ebb\u70e6,\u53ef\u4ee5\u5355\u72ec\u641e\u4e2a\u5b50\u9879\u76ee\u653e\u901a\u7528\u7684service\u8ddf\u5b9e\u4f53,\u4e00\u4e9b\u5de5\u5177\u7c7b\u7b49\u7b49,\u6211\u8fd9\u8fb9\u4e3a\u4e86\u5feb\u901f\u642d\u5efa\u8fd9\u4e2ademo,\u5c31\u9009\u62e9\u590d\u5236\u9ecf\u8d34\u7684\u65b9\u5f0f\u4e86."),(0,a.kt)("p",null,"\u76ee\u5f55\u7ed3\u6784:",(0,a.kt)("img",{src:r(5110).Z,width:"483",height:"275"})),(0,a.kt)("p",null," \t\u7136\u540e\u6211\u4eec\u521b\u5efaClientApplication:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test;\n \nimport java.util.TimeZone;\nimport java.util.concurrent.Executor;\n \nimport org.apache.dubbo.config.spring.context.annotation.EnableDubbo;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.scheduling.annotation.EnableAsync;\nimport org.springframework.scheduling.annotation.EnableScheduling;\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n \nimport com.baomidou.mybatisplus.autoconfigure.MybatisPlusAutoConfiguration;\n \n@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class, MybatisPlusAutoConfiguration.class})\n@EnableScheduling\n@EnableAsync\n@Configuration\n@EnableDubbo(scanBasePackages = {"org.test.service"})\n@ComponentScan(basePackages = {"org.test.service", "org.test.controller", "org.test.config"})\npublic class ClientApplication {\n    public static void main(String[] args) {\n        TimeZone.setDefault(TimeZone.getTimeZone("Asia/Shanghai"));\n        SpringApplication app = new SpringApplication(ClientApplication.class);\n        app.run(args);\n    }\n \n    @Bean(name = "threadPoolTaskExecutor")\n    public Executor threadPoolTaskExecutor() {\n        return new ThreadPoolTaskExecutor();\n    }\n}\n\n')),(0,a.kt)("p",null," \u518d\u5230config\u5305\u5185\u521b\u5efaSwaggerConfig :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test.config;\n \nimport java.util.ArrayList;\nimport java.util.List;\n \nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n \nimport springfox.documentation.builders.ApiInfoBuilder;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.service.ApiInfo;\nimport springfox.documentation.service.Contact;\nimport springfox.documentation.service.Parameter;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n \n@Configuration\n@EnableSwagger2\npublic class SwaggerConfig {\n    // swagger2\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd9\u91cc\u53ef\u4ee5\u914d\u7f6eswagger2\u7684\u4e00\u4e9b\u57fa\u672c\u7684\u5185\u5bb9\uff0c\u6bd4\u5982\u626b\u63cf\u7684\u5305\u7b49\u7b49\n    @Bean\n    public Docket createRestApi() {\n        List<Parameter> pars = new ArrayList<Parameter>();\n        return new Docket(DocumentationType.SWAGGER_2).apiInfo(apiInfo()).select()\n            // \u4e3a\u5f53\u524d\u5305\u8def\u5f84\n            .apis(RequestHandlerSelectors.basePackage("org.test.controller")).paths(PathSelectors.any()).build()\n            .globalOperationParameters(pars);\n    }\n \n    // \u6784\u5efa api\u6587\u6863\u7684\u8be6\u7ec6\u4fe1\u606f\u51fd\u6570,\u6ce8\u610f\u8fd9\u91cc\u7684\u6ce8\u89e3\u5f15\u7528\u7684\u662f\u54ea\u4e2a\n    private ApiInfo apiInfo() {\n        return new ApiInfoBuilder()\n            // \u9875\u9762\u6807\u9898\n            .title("\u9879\u76ee\u63a5\u53e3")\n            // \u521b\u5efa\u4eba\n            .contact(new Contact("FUNKYE", "", ""))\n            // \u7248\u672c\u53f7\n            .version("1.0")\n            // \u63cf\u8ff0\n            .description("API \u63cf\u8ff0").build();\n    }\n}\n\n')),(0,a.kt)("p",null,"\u200b\t\u518d\u521b\u5efaSpringMvcConfigure,\u518d\u91cc\u9762\u653e\u5165seata\u7684\u914d\u7f6e,\u6211\u4e3a\u4e86\u5077\u61d2\u76f4\u63a5\u96c6\u6210\u5728mvc\u914d\u7f6e\u7684\u7c7b\u91cc\u4e86,\u5927\u5bb6\u89c4\u8303\u70b9\u53ef\u4ee5\u53e6\u5916\u521b\u5efa\u4e2a\u914d\u7f6eseata\u7684\u7c7b,\u5927\u5bb6\u53ef\u4ee5\u53d1\u73b0\u4e0b\u9762\u8fd8\u662f\u6709\u4e2a\u7ec4\u540d\u79f0,\u6211\u628a\u4e24\u4e2a\u9879\u76ee\u90fd\u5206\u914d\u5230\u4e00\u4e2a\u7ec4\u53bb,\u8c8c\u4f3c\u53e6\u5916\u53d6\u4e00\u4e2a\u4e5f\u6ca1\u4e8b\u7684. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test.config;\n \nimport java.nio.charset.Charset; \nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\n \nimport org.apache.dubbo.config.annotation.Reference;\nimport org.springframework.boot.web.servlet.FilterRegistrationBean;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.Ordered;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.converter.HttpMessageConverter;\nimport org.springframework.http.converter.StringHttpMessageConverter;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\nimport org.springframework.web.filter.CorsFilter;\nimport org.springframework.web.servlet.HandlerInterceptor;\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\nimport org.springframework.web.servlet.view.InternalResourceViewResolver;\n \nimport com.alibaba.fastjson.serializer.SerializerFeature;\nimport com.alibaba.fastjson.support.config.FastJsonConfig;\nimport com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter;\nimport com.google.common.collect.Maps;\n \nimport io.seata.spring.annotation.GlobalTransactionScanner;\n \n@Configuration\npublic class SpringMvcConfigure implements WebMvcConfigurer {\n \n    @Bean\n    public FilterRegistrationBean corsFilter() {\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowCredentials(true);\n        config.addAllowedOrigin("*");\n        config.addAllowedHeader(CorsConfiguration.ALL);\n        config.addAllowedMethod(CorsConfiguration.ALL);\n        source.registerCorsConfiguration("/**", config);\n        FilterRegistrationBean filterRegistrationBean = new FilterRegistrationBean(new CorsFilter(source));\n        filterRegistrationBean.setOrder(Ordered.HIGHEST_PRECEDENCE);\n        filterRegistrationBean.setOrder(1);\n        filterRegistrationBean.setEnabled(true);\n        filterRegistrationBean.addUrlPatterns("/**");\n        Map<String, String> initParameters = Maps.newHashMap();\n        initParameters.put("excludes", "/favicon.ico,/img/*,/js/*,/css/*");\n        initParameters.put("isIncludeRichText", "true");\n        filterRegistrationBean.setInitParameters(initParameters);\n        return filterRegistrationBean;\n    }\n \n    @Bean\n    public InternalResourceViewResolver viewResolver() {\n        InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();\n        viewResolver.setPrefix("/WEB-INF/jsp/");\n        viewResolver.setSuffix(".jsp");\n        // viewResolver.setViewClass(JstlView.class);\n        // \u8fd9\u4e2a\u5c5e\u6027\u901a\u5e38\u5e76\u4e0d\u9700\u8981\u624b\u52a8\u914d\u7f6e\uff0c\u9ad8\u7248\u672c\u7684Spring\u4f1a\u81ea\u52a8\u68c0\u6d4b\n        return viewResolver;\n    }\n \n \n \n    /**\n     * \u66ff\u6362\u6846\u67b6json\u4e3afastjson\n     */\n    @Override\n    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {\n        FastJsonHttpMessageConverter fastConverter = new FastJsonHttpMessageConverter();\n        FastJsonConfig fastJsonConfig = new FastJsonConfig();\n        fastJsonConfig.setSerializerFeatures(SerializerFeature.PrettyFormat, SerializerFeature.WriteMapNullValue,\n            SerializerFeature.WriteNullStringAsEmpty, SerializerFeature.DisableCircularReferenceDetect);\n        // \u5904\u7406\u4e2d\u6587\u4e71\u7801\u95ee\u9898\n        List<MediaType> fastMediaTypes = new ArrayList<>();\n        fastMediaTypes.add(MediaType.APPLICATION_JSON_UTF8);\n        fastConverter.setSupportedMediaTypes(fastMediaTypes);\n        fastConverter.setFastJsonConfig(fastJsonConfig);\n        // \u5904\u7406\u5b57\u7b26\u4e32, \u907f\u514d\u76f4\u63a5\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u65f6\u5019\u88ab\u6dfb\u52a0\u4e86\u5f15\u53f7\n        StringHttpMessageConverter smc = new StringHttpMessageConverter(Charset.forName("UTF-8"));\n        converters.add(smc);\n        converters.add(fastConverter);\n    }\n \n    @Bean\n    public GlobalTransactionScanner globalTransactionScanner() {\n        return new GlobalTransactionScanner("test-client", "test-group");\n    }\n \n}\n\n')),(0,a.kt)("p",null," \u518d\u521b\u5efac",(0,a.kt)("strong",{parentName:"p"},"ontroller\u5305,\u518d\u5305\u4e0b\u521b\u5efaTestController")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test.controller;\n \nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Lazy;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.test.service.DemoService;\n \nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\n \n/**\n * <p>\n * \u6587\u4ef6\u8868 \u524d\u7aef\u63a7\u5236\u5668\n * </p>\n *\n * @author funkye\n * @since 2019-03-20\n */\n@RestController\n@RequestMapping("/test")\n@Api(tags = "\u6d4b\u8bd5\u63a5\u53e3")\npublic class TestController {\n \n    private final static Logger logger = LoggerFactory.getLogger(TestController.class);\n    @Autowired\n    @Lazy\n    DemoService demoService;\n \n    @GetMapping(value = "testSeataOne")\n    @ApiOperation(value = "\u6d4b\u8bd5\u624b\u52a8\u56de\u6eda\u5206\u5e03\u5f0f\u4e8b\u52a1\u63a5\u53e3")\n    public Object testSeataOne() {\n        return demoService.One();\n    }\n \n    @GetMapping(value = "testSeataTwo")\n    @ApiOperation(value = "\u6d4b\u8bd5\u5f02\u5e38\u56de\u6eda\u5206\u5e03\u5f0f\u4e8b\u52a1\u63a5\u53e3")\n    public Object testSeataTwo() {\n        return demoService.Two();\n    }\n \n}\n\n')),(0,a.kt)("p",null," \u518d\u5230service\u53bb\u521b\u5efa\u9700\u8981\u4f9d\u8d56\u7684DemoService "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.test.service;\n \nimport java.time.LocalDateTime;\n \nimport org.apache.dubbo.config.annotation.Reference;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Service;\nimport org.test.controller.TestController;\nimport org.test.entity.Test;\n \nimport io.seata.core.context.RootContext;\nimport io.seata.core.exception.TransactionException;\nimport io.seata.spring.annotation.GlobalTransactional;\nimport io.seata.tm.api.GlobalTransactionContext;\n \n@Service\npublic class DemoService {\n    @Reference(version = "1.0.0", timeout = 60000)\n    private ITestService testService;\n    private final static Logger logger = LoggerFactory.getLogger(DemoService.class);\n \n    /**\n     * \u624b\u52a8\u56de\u6eda\u793a\u4f8b\n     * \n     * @return\n     */\n    @GlobalTransactional\n    public Object One() {\n        logger.info("seata\u5206\u5e03\u5f0f\u4e8b\u52a1Id:{}", RootContext.getXID());\n        Test t = new Test();\n        t.setOne("1");\n        t.setTwo("2");\n        t.setCreateTime(LocalDateTime.now());\n        testService.save(t);\n        try {\n            int i = 1 / 0;\n            return true;\n        } catch (Exception e) {\n            // TODO: handle exception\n            try {\n                logger.info("\u8f7d\u5165\u4e8b\u52a1id\u8fdb\u884c\u56de\u6eda");\n                GlobalTransactionContext.reload(RootContext.getXID()).rollback();\n            } catch (TransactionException e1) {\n                // TODO Auto-generated catch block\n                e1.printStackTrace();\n            }\n        }\n        return false;\n    }\n \n    /**\n     * \u629b\u51fa\u5f02\u5e38\u8fdb\u884c\u56de\u6eda\u793a\u4f8b\n     * \n     * @return\n     */\n    @GlobalTransactional\n    public Object Two() {\n        logger.info("seata\u5206\u5e03\u5f0f\u4e8b\u52a1Id:{}", RootContext.getXID());\n        Test t = new Test();\n        t.setOne("1");\n        t.setTwo("2");\n        t.setCreateTime(LocalDateTime.now());\n        testService.save(t);\n        try {\n            int i = 1 / 0;\n            return true;\n        } catch (Exception e) {\n            // TODO: handle exception\n            throw new RuntimeException();\n        }\n    }\n}\n\n')),(0,a.kt)("p",null," \u4e00\u6837\u521b\u5efaresources\u6587\u4ef6\u5939,\u5148\u521b\u5efa\u5e38\u7528\u7684",(0,a.kt)("strong",{parentName:"p"},"application.yml")," "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"spring:\n  application:\n     name: test\n  datasource:\n     driver-class-name: com.mysql.cj.jdbc.Driver\n     url: jdbc:mysql://127.0.0.1:3306/test?userSSL=true&useUnicode=true&characterEncoding=UTF8&serverTimezone=Asia/Shanghai\n     username: root\n     password: 123456\n  mvc:\n    servlet:\n      load-on-startup: 1\n  http:\n    encoding:\n            force: true\n            charset: utf-8\n            enabled: true\n    multipart:\n      max-file-size: 10MB\n      max-request-size: 10MB\ndubbo:\n  registry:\n    id: my-registry\n    address:  zookeeper://127.0.0.1:2181?client=curator\n#    address:  zookeeper://127.0.0.1:2181?client=curator\n  application:\n    name: dubbo-demo-client\n    qos-enable: false\nserver:\n  port: 28888\n  max-http-header-size: 8192\n  address: 0.0.0.0\n  tomcat:\n    max-http-post-size: 104857600\n\n")),(0,a.kt)("p",null," \u518d\u628a\u4e4b\u524dservice\u914d\u7f6e\u597d\u7684file\u8ddfregistry\u6587\u4ef6\u590d\u5236\u6765,\u5982\u679c\u4f60\u7684client\u7ec4\u540d\u79f0\u518d\u914d\u7f6e\u7c7b\u91cc\u4fee\u6539\u4e86,\u90a3\u4e48\u8fd9\u91cc\u7684file\u6587\u4ef6\u5185\u7684\u7ec4\u540d\u79f0\u4e00\u6837\u9700\u8981\u66f4\u6539."),(0,a.kt)("p",null,(0,a.kt)("img",{src:r(37124).Z,width:"298",height:"452"})),(0,a.kt)("p",null," \u5b8c\u6574\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0a,\u8fd9\u65f6\u5019\u53ef\u4ee5\u542f\u52a8test-service\u540e,\u518d\u542f\u52a8test-client,\u5230swagger\u91cc\u6d4b\u8bd5\u54af"),(0,a.kt)("p",null,"\u200b\t4.\u8bbf\u95ee127.0.0.1:28888/swagger-ui.html\u505a\u6700\u540e\u7684\u6536\u5c3e\t\t",(0,a.kt)("img",{src:r(40697).Z,width:"947",height:"426"})),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"20191129143124",src:r(71994).Z,width:"549",height:"67"})),(0,a.kt)("p",null,"  \u8fd9\u91cc\u6570\u636e\u6211\u5df2\u7ecf\u5b58\u4e86\u4e00\u6761\u8bb0\u5f55\u4e86,\u6211\u4eec\u770b\u770b\u4f1a\u4e0d\u4f1a\u6210\u529f\u56de\u6eda: "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"20191129143252",src:r(77644).Z,width:"943",height:"588"})),(0,a.kt)("p",null," \u5237\u65b0\u6570\u636e\u5e93,\u53d1\u73b0\u8fd8\u662f\u53ea\u6709\u4e00\u6761\u6570\u636e: "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"20191129143124",src:r(71994).Z,width:"549",height:"67"})),(0,a.kt)("p",null," \u518d\u67e5\u770b\u65e5\u5fd7: "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"20191129143407",src:r(84266).Z,width:"987",height:"89"})),(0,a.kt)("p",null," \u663e\u793a\u5df2\u7ecf\u56de\u6eda,\u6211\u4eec\u518d\u770b\u770bseata-server\u7684\u65e5\u5fd7: "),(0,a.kt)("img",{src:"/img/blog/20191129143419.png",style:{zoom:"200%"}}),(0,a.kt)("p",null," \u663e\u793a\u56de\u6eda\u6210\u529f,\u4e8b\u52a1id\u4e5f\u662f\u4e00\u81f4\u7684,\u8fd9\u4e0b\u6211\u4eec\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u5c31\u8dd1\u901a\u54af,\u901a\u8fc7\u6253\u65ad\u70b9\u65b9\u5f0f,\u5927\u5bb6\u53ef\u4ee5\u67e5\u770bundo_log,\u4f1a\u53d1\u73b0\u518d\u4e8b\u52a1\u63d0\u4ea4\u524d,\u4f1a\u5b58\u5165\u4e00\u6761\u4e8b\u52a1\u4fe1\u606f\u7684\u6570\u636e,\u5982\u679c\u56de\u6eda\u6210\u529f,\u8be5\u4fe1\u606f\u5c31\u4f1a\u88ab\u5220\u9664. "),(0,a.kt)("h1",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,a.kt)("p",null,"seata\u7684\u6574\u5408\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\u6613\u5165\u624b,\u7a0d\u5fae\u7528\u5fc3\u4e00\u4e9b\u4f60\u80af\u5b9a\u5199\u7684\u6bd4\u6211\u66f4\u597d!"),(0,a.kt)("p",null,"\u6b22\u8fce\u5927\u5bb6\u4e5f\u591a\u53bb\u9605\u8bfbseata,dubbo\u4e4b\u7c7b\u7684\u6e90\u4ee3\u7801,\u80fd\u89e3\u51b3\u4e1a\u52a1\u4e2d\u9047\u5230\u7684\u5927\u91cf\u7684\u5751\u54e6!"))}u.isMDXComponent=!0},95691:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129132933-e2cced49e010d6f7c493644ca7f1aba8.png"},13742:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129133111-f1055c7f1e760b48cd7a5a0acc77a648.png"},11167:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129133354-fa95fd2cfe751b4cbdd6cb20b3e7ec37.png"},64183:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129134127-06a15c80fc75daa7c3b466dd8ee84659.png"},78711:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129135935-50a3608af215bcef2c69fb5aa5d03144.png"},47177:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129142115-3d08387e87a3a80200ecffadca799917.png"},5110:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129142349-ae02ff4b6762d6733cca6b1e672ce738.png"},37124:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129142851-be44001f4b861b83fd022d0b2c979158.png"},40697:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129143041-5cba24d3bf073b4af87cac29666ced76.png"},71994:(e,n,r)=>{r.d(n,{Z:()=>t});const t="data:image/png;base64,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"},77644:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129143252-2f06cbc92fdf2fc68db30ebf51fcd5d3.png"},84266:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/20191129143407-7a7f98cf84b5d992c536e7e75e95e296.png"}}]);