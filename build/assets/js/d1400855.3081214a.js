"use strict";(self.webpackChunkseata_website=self.webpackChunkseata_website||[]).push([[86616],{58071:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var t=i(74848),a=i(28453);const r={title:"Seata Raft Configuration Center",author:"JiangYichen - Tsinghua University, participant in Seata Summer of Code",description:"In this blog, I will share the Seata Configuration Center based on Raft and RocksDB design and how it is used.",date:"2024/09/19",keywords:["seata","distributed transactions","configuration center","Raft","RocksDB"]},o="1. Backgroud",s={permalink:"/blog/seata-raft-config-center",editUrl:"https://github.com/apache/incubator-seata-website/blob/docusaurus/i18n/en/docusaurus-plugin-content-blog/seata-raft-config-center.md",source:"@site/i18n/en/docusaurus-plugin-content-blog/seata-raft-config-center.md",title:"Seata Raft Configuration Center",description:"In this blog, I will share the Seata Configuration Center based on Raft and RocksDB design and how it is used.",date:"2024-09-19T00:00:00.000Z",formattedDate:"September 19, 2024",tags:[],readingTime:9.52,hasTruncateMarker:!1,authors:[{name:"JiangYichen - Tsinghua University, participant in Seata Summer of Code"}],frontMatter:{title:"Seata Raft Configuration Center",author:"JiangYichen - Tsinghua University, participant in Seata Summer of Code",description:"In this blog, I will share the Seata Configuration Center based on Raft and RocksDB design and how it is used.",date:"2024/09/19",keywords:["seata","distributed transactions","configuration center","Raft","RocksDB"]},unlisted:!1,prevItem:{title:"seata-rpc-multi-protocol02",permalink:"/blog/seata-rpc-multi-protocol02"},nextItem:{title:"How to Write Test Cases in Seata",permalink:"/blog/how-to-write-unit-tests"}},c={authorsImageUrls:[void 0]},l=[{value:"2.1 Configuration Center",id:"21-configuration-center",level:2},{value:"2.2 Configuration Storage Module",id:"22-configuration-storage-module",level:2},{value:"Abstract Design",id:"abstract-design",level:3},{value:"Configuration Listening",id:"configuration-listening",level:3},{value:"Multi-Tenancy Solution",id:"multi-tenancy-solution",level:3},{value:"3.0 Prepare Configuration File",id:"30-prepare-configuration-file",level:2},{value:"3.1 Server-side Configuration",id:"31-server-side-configuration",level:2},{value:"3.2 Console Configuration Management Interface",id:"32-console-configuration-management-interface",level:2},{value:"3.2.1 Configuration Isolation",id:"321-configuration-isolation",level:3},{value:"3.2.2 Configuration Upload",id:"322-configuration-upload",level:3},{value:"3.2.3 Configuration Query",id:"323-configuration-query",level:3},{value:"3.2.4 Configuration Deletion",id:"324-configuration-deletion",level:3},{value:"3.2.5 Configuration Modification",id:"325-configuration-modification",level:3},{value:"3.3 Client-Side Configuration",id:"33-client-side-configuration",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Currently seata supports rich third-party configuration center, but consider the convenience of using at the same time in order to reduce the threshold of using seata, in seata-server using the existing sofa-jraft+rocksdb to build a configuration center function, seata-client directly communicate with the seata-server to obtain the seata-related configuration. seata-related configuration , do not need to go to the third-party configuration center to read , to achieve the configuration center since the closed loop ."}),"\n",(0,t.jsx)(n.h1,{id:"2-design-description",children:"2. Design Description"}),"\n",(0,t.jsx)(n.h2,{id:"21-configuration-center",children:"2.1 Configuration Center"}),"\n",(0,t.jsxs)(n.p,{children:["In the current third-party configuration center implementation, the Client and Server are decoupled when it comes to configuration centers. Both the Client and Server access configuration items through the Configuration instance. The initialization behavior for Configuration is consistent on both the Client and Server sides, involving connecting to the configuration center middleware to fetch configurations and add listeners, etc.\n",(0,t.jsx)(n.img,{alt:"img",src:i(34576).A+"",width:"1066",height:"448"})]}),"\n",(0,t.jsxs)(n.p,{children:["When the configuration center is implemented using Raft, the configuration data is stored on the Server-side. Therefore, the behavior when initializing the ",(0,t.jsx)(n.code,{children:"Configuration"})," instance differs between the Client and Server sides."]}),"\n",(0,t.jsxs)(n.p,{children:["To ensure consistency with the original configuration center logic, both the Client and Server still access configuration items through the ",(0,t.jsx)(n.code,{children:"RaftConfiguration"})," instance without directly interacting with RocksDB.\n",(0,t.jsx)(n.img,{alt:"img",src:i(48395).A+"",width:"1059",height:"824"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(74242).A+"",width:"1116",height:"880"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"RaftConfiguration"})," is divided into Server-side and Client-side implementations, returning different configuration instances based on the runtime environment."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Java",children:'public class RaftConfigurationProvider implements ConfigurationProvider {\n    @Override\n    public Configuration provide() {\n        String applicationType = System.getProperty(APPLICATION_TYPE_KEY);\n        if (APPLICATION_TYPE_SERVER.equals(applicationType)){\n            return RaftConfigurationServer.getInstance();\n        }else{\n            return RaftConfigurationClient.getInstance();\n        }\n    }\n}\n\n@SpringBootApplication(scanBasePackages = {"org.apache.seata"})\npublic class ServerApplication {\n    public static void main(String[] args) throws IOException {\n        System.setProperty(APPLICATION_TYPE_KEY, APPLICATION_TYPE_SERVER);\n        // run the spring-boot application\n        SpringApplication.run(ServerApplication.class, args);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"22-configuration-storage-module",children:"2.2 Configuration Storage Module"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(19613).A+"",width:"1618",height:"1070"})}),"\n",(0,t.jsx)(n.h3,{id:"abstract-design",children:"Abstract Design"}),"\n",(0,t.jsxs)(n.p,{children:["To support and extend more KV in-memory key-value pair databases in the future (such as LevelDB, Caffeine), an abstract ",(0,t.jsx)(n.code,{children:"ConfigStoreManager"})," interface and an abstract class ",(0,t.jsx)(n.code,{children:"AbstractConfigStoreManager"})," have been defined, providing the following common methods:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Get: Acquire a specific configuration item named ",(0,t.jsx)(n.code,{children:"key"})," from a given ",(0,t.jsx)(n.code,{children:"namespace"})," and ",(0,t.jsx)(n.code,{children:"dataId"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["GetAll: Acquire all configuration items from a given  ",(0,t.jsx)(n.code,{children:"namespace"})," and ",(0,t.jsx)(n.code,{children:"dataId"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Put: Add/Update a configuration item ",(0,t.jsx)(n.code,{children:"<key, value>"})," in a specific ",(0,t.jsx)(n.code,{children:"namespace"})," and ",(0,t.jsx)(n.code,{children:"dataId"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Delete: Delete a configuration item named ",(0,t.jsx)(n.code,{children:"key"})," in a given  ",(0,t.jsx)(n.code,{children:"namespace"})," and ",(0,t.jsx)(n.code,{children:"dataId"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["DeleteAll: Delete all configuration items in a given  ",(0,t.jsx)(n.code,{children:"namespace"})," and ",(0,t.jsx)(n.code,{children:"dataId"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Clear: Clear all configurations."}),"\n",(0,t.jsx)(n.li,{children:"GetAllNamespaces: Acquire all namespaces."}),"\n",(0,t.jsx)(n.li,{children:"GetAllDataIds: Acquire all configuration dataIds under a specific namespace."}),"\n",(0,t.jsx)(n.li,{children:"..."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ConfigStoreManagerFactory"})," and ",(0,t.jsx)(n.code,{children:"ConfigStoreManagerProvider"}),": Configuration storage factory class and provider implemented using SPI mechanism."]}),"\n",(0,t.jsx)(n.h3,{id:"configuration-listening",children:"Configuration Listening"}),"\n",(0,t.jsx)(n.p,{children:"Both the Server and Client configuration centers need to listen for changes to configuration items."}),"\n",(0,t.jsxs)(n.p,{children:["On the Server-side, since the configurations are stored locally, we can directly intercept the configuration change methods. We define ",(0,t.jsx)(n.code,{children:"addConfigListener"})," and ",(0,t.jsx)(n.code,{children:"removeConfigListener"})," methods in the abstract interface to allow users to add and remove configuration listeners. The specific implementation class handles the listening logic."]}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"RocksDBConfigStoreManager"}),", the ",(0,t.jsx)(n.code,{children:"notifyConfigChange()"})," method is defined to trigger listeners. When performing write-related operations (e.g., Put, Delete), this method notifies listeners about the configuration change, triggering callback events to notify the Server configuration center."]}),"\n",(0,t.jsxs)(n.p,{children:["On the Client-side, we implement configuration listening through ",(0,t.jsx)(n.strong,{children:"configuration versioning"})," and ",(0,t.jsx)(n.strong,{children:"long connection mechanisms"}),". Specifically, the Client establishes a long connection with the Server on startup and periodically refreshes this connection. The Server maintains a ",(0,t.jsx)(n.code,{children:"watchMap"})," to store all client-side listening information. Whenever the Raft state machine executes a configuration update operation, an ",(0,t.jsx)(n.code,{children:"ApplicationEvent"})," event is triggered, which is listened to by the ",(0,t.jsx)(n.code,{children:"ClusterConfigWatcherManager"}),", notifying all clients in the ",(0,t.jsx)(n.code,{children:"watchMap"})," of the configuration change. Additionally, configuration versioning is used for optimization. When establishing a long connection, the Client must provide a version number. If the version number is lower than the version number on the Server-side, the latest configuration is returned directly. If the Server version number is lower than the local version number, the Client considers the Server configuration outdated (possibly due to server downtime or cluster split-brain) and retries the request to other nodes in the cluster."]}),"\n",(0,t.jsx)(n.h3,{id:"multi-tenancy-solution",children:"Multi-Tenancy Solution"}),"\n",(0,t.jsx)(n.p,{children:"When storing configurations on the Seata-Server, we need to implement multi-tenancy configuration isolation, ensuring that configurations between different tenants are independent and isolated both physically and logically."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["We researched the implementations of several open-source projects using RocksDB and summarized them as follows:","\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"JRaft uses a single RocksDB instance with two column families: one for storing Raft entries and the other for storing metadata."}),"\n",(0,t.jsx)(n.li,{children:"TiKV uses two RocksDB instances: raftDB and kvDB. In kvDB, multiple column families are used to store metadata, user data, lock data, etc."}),"\n",(0,t.jsx)(n.li,{children:"Pika creates a RocksDB instance for each data structure (String, Hash, List, Set, Zset), and each instance uses multiple column families to store data, such as Data, Meta."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Considering that the number of tenants is unknown in advance (and thus we cannot create a fixed number of RocksDB instances at startup), we use a single RocksDB instance with multiple column families. Different tenants are distinguished using ",(0,t.jsx)(n.code,{children:"namespace"}),", and logical isolation is achieved by using column families in RocksDB, where one namespace corresponds to one column family. Column families in RocksDB are conceptually similar to tables in relational databases. When performing configuration CRUD operations, the appropriate column family is specified based on the namespace, achieving multi-tenancy isolation. Additionally, a column family named ",(0,t.jsx)(n.code,{children:"config_version"})," is built-in to track the version numbers of the configurations.\n",(0,t.jsx)(n.img,{alt:"img",src:i(98484).A+"",width:"1081",height:"634"})]}),"\n",(0,t.jsx)(n.h1,{id:"3-usage",children:"3. Usage"}),"\n",(0,t.jsx)(n.h2,{id:"30-prepare-configuration-file",children:"3.0 Prepare Configuration File"}),"\n",(0,t.jsxs)(n.p,{children:["First, prepare the configuration file. You can refer to the example configuration file ",(0,t.jsx)(n.a,{href:"https://github.com/apache/incubator-seata/blob/2.x/script/config-center/config.txt",children:"here"}),". Place this configuration file in the resource directory of the Seata server project."]}),"\n",(0,t.jsx)(n.h2,{id:"31-server-side-configuration",children:"3.1 Server-side Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://github.com/apache/incubator-seata/blob/develop/script/client/spring/application.yml",children:"application.yml"})})," file, add the Raft configuration center settings. For other configurations, refer to the ",(0,t.jsx)(n.a,{href:"https://seata.apache.org/en-us/docs/next/user/configurations",children:"configuration documentation"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-YAML",children:"config:\n  # support: nacos, consul, apollo, zk, etcd3, raft\n  type: raft\n  raft:\n    db:\n      type: rocksdb  # database type, currently only rocksdb is supported\n      dir: configStore  # directory for storing db files\n      destroy-on-shutdown: false  # whether to clear db files on shutdown, default is false\n      namespace: 'default'  # namespace\n      dataId: 'seata.properties'  # configuration file ID\n  file:\n    name: 'file'  # initial configuration file name\n\nserver:\n  raft:\n    group: default  # this value represents the group of the Raft cluster; the transaction group on the client must correspond to this value\n    server-addr: 192.168.241.1:9091, 192.168.241.2:9091, 192.168.241.3:9091  # IP and port of other Raft nodes; the port is the netty port of the node +1000, the default netty port is 8091\n    snapshot-interval: 600  # take a snapshot every 600 seconds for fast raftlog rolling. However, if there are many transactions in memory, this may cause performance jitter every 600 seconds. You can adjust it to 30 minutes or 1 hour depending on your business needs and test for jitter.\n    apply-batch: 32  # apply up to 32 actions in one raftlog commit\n    max-append-bufferSize: 262144  # maximum size of the log storage buffer, default is 256K\n    max-replicator-inflight-msgs: 256  # maximum number of in-flight requests when pipeline requests are enabled, default is 256\n    disruptor-buffer-size: 16384  # internal disruptor buffer size, increase this value for high write throughput scenarios; default is 16384\n    election-timeout-ms: 1000  # timeout for leader re-election if no heartbeat is received\n    reporter-enabled: false  # enable monitoring of Raft itself\n    reporter-initial-delay: 60  # interval for monitoring\n    serialization: jackson  # serialization method, do not change\n    compressor: none  # compression method for raftlog, e.g., gzip, zstd\n    sync: true  # log syncing method, default is synchronous syncing\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In Seata-Server, an ",(0,t.jsx)(n.strong,{children:"initial configuration file"})," is required as the Server-side configuration file (as mentioned in the previous step). The ",(0,t.jsx)(n.code,{children:"file.name"})," configuration item must match the name of this file. When the Server is first started, this configuration file will be used as the initial configuration for the Raft configuration center. Supported file types include: conf, yaml, properties, txt."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Note: The ",(0,t.jsx)(n.strong,{children:"initial configuration file"})," of the nodes in the Raft cluster must be consistent."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"32-console-configuration-management-interface",children:"3.2 Console Configuration Management Interface"}),"\n",(0,t.jsxs)(n.p,{children:["When the ",(0,t.jsx)(n.strong,{children:"Raft mode"})," is used as the configuration center on the server side, you can manage the configuration center through the built-in configuration management page in ",(0,t.jsx)(n.a,{href:"http://127.0.0.1:7091",children:"Seata Console"}),". Users can perform CRUD operations (create, read, update, delete) on configurations stored in the Seata-Server cluster. Note that these operations affect the entire cluster, so changes can be made on ",(0,t.jsx)(n.strong,{children:"any node"})," in the cluster, and all operations will be synchronized across the cluster via Raft."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Note: This configuration management page is only available when the configuration center is set to ",(0,t.jsx)(n.strong,{children:"Raft mode"})," and is not accessible for other configuration center types."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"321-configuration-isolation",children:"3.2.1 Configuration Isolation"}),"\n",(0,t.jsxs)(n.p,{children:["The Raft configuration center provides a ",(0,t.jsx)(n.strong,{children:"namespace"})," mechanism to achieve multi-tenant configuration isolation. Configurations in different ",(0,t.jsx)(n.strong,{children:"namespaces"})," are logically isolated through the underlying storage mechanism. Within the same ",(0,t.jsx)(n.strong,{children:"namespace"}),", multiple configuration files can exist, differentiated by ",(0,t.jsx)(n.strong,{children:"dataId"}),". A set of configurations is uniquely identified by both ",(0,t.jsx)(n.strong,{children:"namespace"})," and ",(0,t.jsx)(n.strong,{children:"dataId"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"For example:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"namespace=default (default), dataId=seata.properties (default)"}),"\n",(0,t.jsx)(n.li,{children:"namespace=dev, dataId=seata-server.properties, dataId=seata-client.yaml"}),"\n",(0,t.jsx)(n.li,{children:"namespace=prop, dataId=seata-server.properties, dataId=seata-client.txt"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(1471).A+"",width:"1280",height:"730"})}),"\n",(0,t.jsx)(n.h3,{id:"322-configuration-upload",children:"3.2.2 Configuration Upload"}),"\n",(0,t.jsxs)(n.p,{children:["When the server starts, the initial configuration file on the server will automatically be uploaded to the configuration center. In addition, users can manually upload configuration files to a specified ",(0,t.jsx)(n.strong,{children:"namespace"})," and ",(0,t.jsx)(n.strong,{children:"dataId"}),' by clicking the "Upload" button. Once uploaded to the server\'s configuration center, the client can retrieve the specific configuration file via ',(0,t.jsx)(n.strong,{children:"namespace"})," and ",(0,t.jsx)(n.strong,{children:"dataId"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(20882).A+"",width:"1280",height:"730"})}),"\n",(0,t.jsxs)(n.p,{children:["Currently, supported configuration file types include txt, text, yaml, and properties. You can refer to the sample configuration files here: ",(0,t.jsx)(n.a,{href:"https://github.com/apache/incubator-seata/blob/2.x/script/config-center/config.txt",children:"Configuration File Example"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"323-configuration-query",children:"3.2.3 Configuration Query"}),"\n",(0,t.jsxs)(n.p,{children:["After selecting the ",(0,t.jsx)(n.strong,{children:"namespace"})," and ",(0,t.jsx)(n.strong,{children:"dataId"}),', click the "',(0,t.jsx)(n.strong,{children:"Search"}),'" button to query all configuration item information under that configuration. The configuration is presented in a list, where each row represents a configuration item, displayed as ',(0,t.jsx)(n.strong,{children:"Key"})," and ",(0,t.jsx)(n.strong,{children:"Value"})," pairs."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(19013).A+"",width:"1280",height:"731"})}),"\n",(0,t.jsx)(n.h3,{id:"324-configuration-deletion",children:"3.2.4 Configuration Deletion"}),"\n",(0,t.jsxs)(n.p,{children:["When a configuration set is no longer needed, users can delete the configuration data for the specified ",(0,t.jsx)(n.strong,{children:"namespace"})," and ",(0,t.jsx)(n.strong,{children:"dataId"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Note that once this operation is completed, all configuration item information under that configuration will be cleared and cannot be recovered. Please avoid deleting configurations that are currently in use."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(15604).A+"",width:"1280",height:"729"})}),"\n",(0,t.jsx)(n.h3,{id:"325-configuration-modification",children:"3.2.5 Configuration Modification"}),"\n",(0,t.jsxs)(n.p,{children:["In the configuration item list, users can ",(0,t.jsx)(n.strong,{children:"add"}),", ",(0,t.jsx)(n.strong,{children:"modify"}),", or ",(0,t.jsx)(n.strong,{children:"delete"})," a specific configuration item. Once an operation is successful, both the server and client sides will receive the configuration change promptly, and the latest value will be available."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add:"})," Add a new configuration item to the current configuration."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(39398).A+"",width:"1280",height:"729"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Update:"})," Change the value of a specified configuration item."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(23165).A+"",width:"1280",height:"731"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Delete:"})," Remove a specified configuration item."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:i(2036).A+"",width:"1280",height:"730"})}),"\n",(0,t.jsx)(n.h2,{id:"33-client-side-configuration",children:"3.3 Client-Side Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The client needs to add the following configuration items. The ",(0,t.jsx)(n.code,{children:"raft.server-addr"})," should match the ",(0,t.jsx)(n.strong,{children:"IP address list"})," of the server-side Raft cluster."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-YAML",children:"config:\n    type: raft  # Raft mode\n    raft:\n        server-addr: 192.168.241.1:7091, 192.168.241.2:7091, 192.168.241.3:7091  # Raft metadata server addresses\n        username: 'seata'  # Authentication\n        password: 'seata'  # Authentication\n        db:\n            namespace: 'default'  # Namespace\n            dataId: 'seata.properties'  # Configuration file Id\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Additionally, the client needs to include the ",(0,t.jsx)(n.strong,{children:"HttpClient"})," dependency to retrieve configuration information from the Seata-Server cluster via HTTP requests."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-YAML",children:"<dependency>\n    <groupId>org.apache.httpcomponents</groupId>\n    <artifactId>httpclient</artifactId>\n</dependency>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After the configuration is complete, when the client application starts, it will subscribe to and retrieve the configuration specified by ",(0,t.jsx)(n.strong,{children:"namespace"})," and ",(0,t.jsx)(n.strong,{children:"dataId"})," from the server configured in ",(0,t.jsx)(n.code,{children:"raft.server-addr"}),". The client will also automatically fetch the latest configuration when changes are detected through the listener mechanism."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},34576:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center1-ac0c53e30a59a88eda4264af9828d0e0.png"},48395:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center2-169055a43f25e2e83a5c59790db7ce3c.png"},74242:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center3-6b48c99ff1bfdcb8817c1424de389648.png"},19613:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center4-9a3ba618a6214bb22821bf4b1f528fe9.png"},98484:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center5-8e261cdedd0f19bf2ddad4468359505f.png"},20882:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center\u914d\u7f6e\u4e0a\u4f20-57202fb7b010d6ff7373ee8247aac757.png"},39398:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center\u914d\u7f6e\u4fee\u65391-b1df6c2e83b37cd71c4c0601de6c2652.png"},23165:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center\u914d\u7f6e\u4fee\u65392-7f23063fd4584d8fd27db66f9d3ef4e1.png"},2036:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center\u914d\u7f6e\u4fee\u65393-eee28221e04d28731920c3a3e46797d2.png"},15604:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center\u914d\u7f6e\u5220\u9664-b0084f1a6663581cdb9c73338e059e08.png"},19013:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center\u914d\u7f6e\u67e5\u8be2-39fa5a191bbda09868f6d4ddc4ebdebc.png"},1471:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/seata-raft-config-center\u914d\u7f6e\u9694\u79bb-833cd7894e339619e1887832302b4aef.png"},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>s});var t=i(96540);const a={},r=t.createContext(a);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);