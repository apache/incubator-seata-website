<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-overview/faq">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Seata FAQ | Seata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="http://chai001125.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="http://chai001125.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="http://chai001125.github.io/docs/overview/faq"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Seata FAQ | Seata"><meta data-rh="true" name="description" content="Seata FAQ."><meta data-rh="true" property="og:description" content="Seata FAQ."><meta data-rh="true" name="keywords" content="Seata"><link data-rh="true" rel="icon" href="/img/seata_logo_small.jpeg"><link data-rh="true" rel="canonical" href="http://chai001125.github.io/docs/overview/faq"><link data-rh="true" rel="alternate" href="http://chai001125.github.io/docs/overview/faq" hreflang="en-US"><link data-rh="true" rel="alternate" href="http://chai001125.github.io/zh-cn/docs/overview/faq" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="http://chai001125.github.io/docs/overview/faq" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Seata RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Seata Atom Feed">




<link rel="stylesheet" href="//g.alicdn.com/mamba/assets/0.0.19/mse-arc-ui.min.css">
<script src="//g.alicdn.com/mamba/assets/0.0.19/mse-arc-ui.min.js"></script>
<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-YHS75WKFBR" async></script><link rel="stylesheet" href="/assets/css/styles.c84d55f4.css">
<link rel="preload" href="/assets/js/runtime~main.6888d26e.js" as="script">
<link rel="preload" href="/assets/js/main.96f5711d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/seata_logo.png" alt="Seata Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/seata_logo.png" alt="Seata Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview/what-is-seata">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Solutions</a><ul class="dropdown__menu"><li><a href="https://cn.aliyun.com/product/aliware/mse?spm=seata-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">Seata in cloud<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://cn.aliyun.com/product/aliware/mse?spm=seata-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">Microservice solutions<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.aliyun.com/product/ahas?spm=seata-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">High-availability solution<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://cn.aliyun.com/product/aliware/sae?spm=seata-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">Serverless solution for microservices<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.aliyun.com/product/edas?spm=seata-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">PaaS solution<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.aliyun.com/product/servicemesh?spm=seata-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">Service mesh solution<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://help.aliyun.com/document_detail/132903.html?spm=seata-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">SOFA distributed transaction<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/docs/developers/developers_dev">Developers</a><a href="https://mp.weixin.qq.com/s/nvDmIJEuDaNEY3RfTA3UyA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Recruitment</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/docs/download">Download</a><a href="http://demo.seata.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Console sample</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>En</a><ul class="dropdown__menu"><li><a href="/docs/overview/faq" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">En</a></li><li><a href="/zh-cn/docs/overview/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">ä¸­</a></li></ul></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Overview</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview/what-is-seata">What Is Seata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview/terminology">Seata Terminology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/overview/faq">Seata FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">User Doc</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user/quickstart">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user/configurations">The seata parameter configuration version 1.6.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user/api">Api Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user/microservice">Microservice Framework Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/user/sqlreference/sql-restrictions">SQL Reference</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Developer Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/dev/mode/at-mode">Transaction Mode</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/seata-mertics">Metrics design</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Ops Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ops/upgrade">çæ¬åçº§æå</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ops/deploy-server">Deploy</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Overview</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Seata FAQ</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><h1>FAQ</h1><a href="#1" target="_self">1.Can Seata be used in a production environment?</a><br><a href="#2" target="_self">2.Dose Seata support high availability ?</a><br><a href="#3" target="_self">3.What is the use of the record of undo log table log status = 1 ?</a><br><a href="#4" target="_self">4.How to use the Seata framework to ensure transaction isolation?</a><br><a href="#5" target="_self">5.When Failed to roll back dirty data, what shall I do ?</a><br><a href="#6" target="_self">6.Why the global transaction state is not &quot;begin&quot; when a branch transaction is registered ?</a><br><a href="#7" target="_self">7.When Nacos is used as the Seata configuration center, the project startup error report cannot find the service. How to check and deal with it ?</a><br><a href="#8" target="_self">8.When Eureka is the registry and TC is highly available, how to overwrite Eureka properties at the TC end?</a><br><a href="#9" target="_self">9.java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.jsontype.TypeSerializer.typeId(Ljava/lang/Object;Lcom/fasterxml/jackson/core/JsonToken;)?</a><br><a href="#10" target="_self">10. Why didn&#x27;t my mybatis operation return auto-generated ID? </a><br><a href="#11" target="_self">11.I can&#x27;t find this package:io.seata.codec.protobuf.generated,and cant&#x27;t run seata server?</a><br><a href="#12" target="_self">12.How TC uses mysql8?</a><br><a href="#13" target="_self">13.Support multiple primary keys?</a><br><a href="#14" target="_self">14.How to solve the error reported by HikariDataSource?</a><br><a href="#15" target="_self">15.Can I write the configuration directly to application.properties without using the conf type configuration file?</a><br><a href="#16" target="_self">16.How to package seata-server after modifying the source code?</a><br><a href="#17" target="_self">17.What RPC frameworks does seata support now?</a><br><a href="#18" target="_self">18. java.lang.NoSuchMethodError: com.alibaba.druid.sql.ast.statement .SQLSelect.getFirstQueueBlockLcom/alibaba/druid/sql/ast/statement/SQLSelectQueryBlock;</a><br><a href="#19" target="_self">19. NoSuchMethodError in apache-dubbo 2.7.0?</a><br><a href="#20" target="_self">20.What are the precautions for using AT mode?</a><br><a href="#21" target="_self">21.Why will the win system have one more empty line for the properties when configured with synchronization script?</a><br><a href="#22" target="_self">22.What to note for the AT mode and Spring @Transactional annotation hyphenation?</a><br><a href="#23" target="_self">23.Spring boot 1.5.x appear the Jackson related NoClassDefFoundException?</a><br><a href="#24" target="_self">24.SpringCloudÂ xidÂ cannotÂ transmit?</a><br><a href="#25" target="_self">25.undo_log cannot be deleted after using the mybatis plus dynamic data source component?</a><br><a href="#26" target="_self">26.Could not found global transaction xid = %s, may be has finished.</a><br><a href="#27" target="_self">27.Why does TC reported this error: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception?</a><br><a href="#28" target="_self">28.The database enables automatic update timestamp, which makes dirty data unable to be rolled back?</a><br><a href="#29" target="_self">29.timeoutrollching occurs before the global transaction timeout?</a><br><a href="#30" target="_self">30.What database and table splitting solutions does Seata support at this stage?</a><br><a href="#31" target="_self">31.What are the restrictions on Seata&#x27;s address registered with the registry?</a><br><a href="#32" target="_self">32.seata-server cannot be started due to Unrecognized VM option &#x27;CMSParallelRemarkEnabled&#x27; Error: Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit.?</a><br><a href="#33" target="_self">33. Why does the java.nio.ByteBuffer.flip()Ljava/nio/ByteBuffer error occur when the client&#x27;s JDK version is 1.8 when compiling and running ? </a><br><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1">Q: 1.Can Seata be used in a production environment?<a href="#1" class="hash-link" aria-label="Direct link to Q: 1.Can Seata be used in a production environment?" title="Direct link to Q: 1.Can Seata be used in a production environment?">â</a></h3><p><strong>A:</strong>
Since version 0.4.2,it is supported in production environment,Users who are using seata are welcome to complete this issue together:<a href="https://github.com/seata/seata/issues/1246" target="_blank" rel="noopener noreferrer">who&#x27;s using Seata</a></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2">Q: 2.Dose Seata support high availability ?<a href="#2" class="hash-link" aria-label="Direct link to Q: 2.Dose Seata support high availability ?" title="Direct link to Q: 2.Dose Seata support high availability ?">â</a></h3><p><strong>A:</strong>
supported from version 0.6, tc USES db mode to share global transaction session information, and the registry USES non-file seata-supported third-party registries</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3">Q: 3.What is the use of the record of undo log table log status = 1 ?<a href="#3" class="hash-link" aria-label="Direct link to Q: 3.What is the use of the record of undo log table log status = 1 ?" title="Direct link to Q: 3.What is the use of the record of undo log table log status = 1 ?">â</a></h3><p><strong>A:</strong> </p><p><strong>Scenario:</strong>  after A branch transaction A registers TC, A global transaction rollback occurs before A local transaction commits</p><p><strong>Consequence:</strong> global transaction rollback succeeds, a resource is occupied, resulting in resource suspension problem</p><p><strong>Anti-suspension measures:</strong> when a rolls back and finds that the rollback undo has not been inserted, an undo record with log_status=1 is inserted. When a local transaction (business write operation SQL and corresponding undo are a local transaction) is committed, it fails due to the unique key conflict of the undo table.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4">Q: 4.How to use the Seata framework to ensure transaction isolation?<a href="#4" class="hash-link" aria-label="Direct link to Q: 4.How to use the Seata framework to ensure transaction isolation?" title="Direct link to Q: 4.How to use the Seata framework to ensure transaction isolation?">â</a></h3><p><strong>A:</strong>
Since seata phase 1 local transactions have been committed, enhanced isolation is needed to prevent other transactions from dirty reads and dirty writes.</p><ol><li><p>Dirty read Select statement with for update, proxy method with @GlobalLock+@Transactional or @GlobalTransaction</p></li><li><p>Dirty write You must use @GlobalTransactional</p><p>noteï¼If the interface of the business you are querying does not use the @GlobalTransactional annotation, which means there is no need for distributed transactions on the method, you can annotate the @globallock+@Transactional annotation on the method and add a for update statement to the query.
If your query interface has the @GlobalTransactional annotation on the outer edge of the transactional link, you can simply add a for update statement to your query. The reason for designing this annotation is that before it is available, distributed transactions need to query the committed data, but the business does not need distributed transactions.
Using the @GlobalTransactional annotation adds some unnecessary additional RPC overhead such as begin returning xid, commit transaction, etc. GlobalLock simplifies the RPC process for higher performance.</p></li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5">Q: 5.When Failed to roll back dirty data, what shall I do ?<a href="#5" class="hash-link" aria-label="Direct link to Q: 5.When Failed to roll back dirty data, what shall I do ?" title="Direct link to Q: 5.When Failed to roll back dirty data, what shall I do ?">â</a></h3><p><strong>A:</strong> </p><ol><li><p>The dirty data needs to be processed manually, and the data can be corrected according to the log prompt, or the corresponding undo can be deleted (the FailureHandler can be customized for email notification or other purposes).</p></li><li><p>This option is not recommended when &quot;undo&quot; mirror validation is turned off during rollback.</p><p>nodeï¼It is recommended to isolate the dirty data in advance</p></li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6">Q: 6.Why the global transaction state is not &quot;begin&quot; when a branch transaction is registered ?<a href="#6" class="hash-link" aria-label="Direct link to Q: 6.Why the global transaction state is not &quot;begin&quot; when a branch transaction is registered ?" title="Direct link to Q: 6.Why the global transaction state is not &quot;begin&quot; when a branch transaction is registered ?">â</a></h3><p><strong>A:</strong> </p><p><strong>abnormalï¼</strong> Could not register branch into global session xid = status = Rollbackedï¼Two phase state and Rollbacking, AsyncCommitting, etcï¼ while expecting Begin</p><p><strong>describeï¼</strong> When a branch transaction is registered, the global transaction status must be a one-phase state &quot;begin&quot;, and registration other than &quot;begin&quot; is not allowed. It belongs to the normal processing at the seata framework level, and users can solve it from their own business level.</p><p>This exception can occur in the following situations (you can continue to add).</p><ol><li>The branch transaction is asynchronous. The global transaction is not aware of its progress. The global transaction has entered phase 2 before the asynchronous branch comes to register.</li><li>Service a rpc service b timed out (dubbo, feign, etc. timeout by default for 1 second), a throws an exception to tm, tm informs tc to roll back, but b still receives the request (network delay or rpc framework retry), and then registers at tc Global transaction was found to be rolling back.</li><li>Tc is aware of the global transaction timeout (@GlobalTransactional (timeoutMills = default 60 seconds)), actively changes the state and notifies each branch transaction to rollback when a new branch transaction is registered.</li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7">Q: 7.When Nacos is used as the Seata configuration center, the project startup error report cannot find the service. How to check and deal with it ?<a href="#7" class="hash-link" aria-label="Direct link to Q: 7.When Nacos is used as the Seata configuration center, the project startup error report cannot find the service. How to check and deal with it ?" title="Direct link to Q: 7.When Nacos is used as the Seata configuration center, the project startup error report cannot find the service. How to check and deal with it ?">â</a></h3><p><strong>A:</strong>
abnormalï¼io.seata.common.exception.FrameworkException: can not register RM,err:can not connect to services-server.</p><ol><li><p>Check the nacos configuration list to see if the seata configuration has been imported successfully.</p></li><li><p>Check the list of nacos services to see if serverAddr has been registered successfully.</p></li><li><p>Check the namespace, registry.nacos.namespace and config.nacos.namespace in the client&#x27;s registry.conf and enter the nacos namespace ID. The default is &quot;&quot;. The server and client correspond to the namespace.
It is public and is a reserved control of nacos. If you need to create your own namespace, it is better not to use the same name as public, and use a name that has specific semantics in an actual business scenario.</p></li><li><p>For the list of services on nacos, the IP address corresponding to serverAddr address should be the IP address specified for seata startup, such as: sh seata-server.sh-p 8091-h 122.51.204.197-m file.</p></li><li><p>Check to see if the seata/conf/nacos-config.txt, transaction group service.vgroupMapping.trade_group=default </p><p>configuration is the same as the project group configuration name.</p></li><li><p>Telnet IP port view ports are open as well as firewall status.</p><p>noteï¼1.Version 080 starts the specified IP problem, the exception &quot;Exception in thread &quot;main&quot; java.lang.RuntimeException: java.net.BindException: Cannot assign request address&quot;, please upgrade to version 081 or above.
The project USES jdk13 and starts with </p></li></ol><div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   Error: Could not create the Java Virtual Machine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Error: A fatal exception has occurred. Program will exit.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>â    If the environment is sh, replace the last paragraph in the scriptï¼</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">exec</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$JAVACMD</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$JAVA_OPTS</span><span class="token plain"> -server -Xmx2048m -Xms2048m -Xmn1024m -Xss512k -XX:SurvivorRatio</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> -XX:MetaspaceSize</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">128m -XX:MaxMetaspaceSize</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">256m -XX:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MaxDirectMemorySize</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">1024m -XX:-OmitStackTraceInFastThrow -XX:-UseAdaptiveSizePolicy -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$BASEDIR</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain">/logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/java_heapdump.hprof -XX:+DisableExplicitGC -XX:+CMSParallelRemarkEnabled -XX:+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">75</span><span class="token plain"> -verbose:gc -Dio.netty.leakDetectionLevel</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">advanced </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          -classpath </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$CLASSPATH</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          -Dapp.name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;seata-server&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          -Dapp.pid</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$$</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          -Dapp.repo</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$REPO</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          -Dapp.home</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$BASEDIR</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          -Dbasedir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$BASEDIR</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          io.seata.server.Server </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$@</span><span class="token string" style="color:#e3116c">&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8">Q: 8.When Eureka is the registry and TC is highly available, how to overwrite Eureka properties at the TC end?<a href="#8" class="hash-link" aria-label="Direct link to Q: 8.When Eureka is the registry and TC is highly available, how to overwrite Eureka properties at the TC end?" title="Direct link to Q: 8.When Eureka is the registry and TC is highly available, how to overwrite Eureka properties at the TC end?">â</a></h3><p><strong>A:</strong>
Add the eureka-client.properties file in the seata\conf directory and add the Eureka properties to be overwritten.
For example, to overwrite eureka.instance.lease-renewal-interval-in-seconds and eureka.instance.lease-expiration-duration-in-seconds, add the following:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">eureka.lease.renewalInterval=1  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eureka.lease.duration=2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The attribute prefix is eureka, and the subsequent attribute names can refer to the class com.netflix.appinfo.PropertyBasedInstanceConfigConstants. You can also study the seata-discovery-eureka project of the discovery module in the seata source code.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="9">Q: 9.What&#x27;s the reason of java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.jsontype.TypeSerializer.typeId(Ljava/lang/Object;Lcom/fasterxml/jackson/core/JsonToken;) ?<a href="#9" class="hash-link" aria-label="Direct link to Q: 9.What&#x27;s the reason of java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.jsontype.TypeSerializer.typeId(Ljava/lang/Object;Lcom/fasterxml/jackson/core/JsonToken;) ?" title="Direct link to Q: 9.What&#x27;s the reason of java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.jsontype.TypeSerializer.typeId(Ljava/lang/Object;Lcom/fasterxml/jackson/core/JsonToken;) ?">â</a></h3><p><strong>A:</strong>
when the undolog serialization is configured as Jackson, the Jackson version needs to be 2.9.9+</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="10">Q: 10. Why didn&#x27;t my mybatis operation return auto-generated ID? <a href="#10" class="hash-link" aria-label="Direct link to Q: 10. Why didn&#x27;t my mybatis operation return auto-generated ID? " title="Direct link to Q: 10. Why didn&#x27;t my mybatis operation return auto-generated ID? ">â</a></h3><p><strong>A:</strong>
plan1.You should update the configuraton of <code>mybatis</code>:  set annotation <code>@Options(useGeneratedKeys = true, keyProperty = &quot;id&quot;)</code> or set the value of useGeneratedKeys and keyProperty  in <code>mybatis</code> xml configuraton<br>
<!-- -->plan2.Delete the id field of the undo_log table</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11">Q: 11.I can&#x27;t find this package:io.seata.codec.protobuf.generated,and cant&#x27;t run seata server?<a href="#11" class="hash-link" aria-label="Direct link to Q: 11.I can&#x27;t find this package:io.seata.codec.protobuf.generated,and cant&#x27;t run seata server?" title="Direct link to Q: 11.I can&#x27;t find this package:io.seata.codec.protobuf.generated,and cant&#x27;t run seata server?">â</a></h3><p><strong>A:</strong>
You can execute this command: <code>./mvnw clean install -DskipTests=true</code> (Mac,Linux) or <code>mvnw.cmd clean install -DskipTests=true</code>, (Win)<a href="https://github.com/seata/seata/issues/2438" target="_blank" rel="noopener noreferrer">reference issues/2438</a>,These codes have been removed in version 0.8.1.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12">Q: 12.How TC uses mysql8?<a href="#12" class="hash-link" aria-label="Direct link to Q: 12.How TC uses mysql8?" title="Direct link to Q: 12.How TC uses mysql8?">â</a></h3><p><strong>A:</strong> </p><ol><li><p>Modify the driver configuration <code>store.db.driver-class-name</code> of <code>file.conf</code>;  </p></li><li><p>Delete mysql5 driver and add mysql8 driver under lib directory  </p><p>ps: The same is true for Oracle; <code>1.2.0</code> supports MySQL driver multi version isolation without adding drivers</p></li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13">Q: 13.Support multiple primary keys?<a href="#13" class="hash-link" aria-label="Direct link to Q: 13.Support multiple primary keys?" title="Direct link to Q: 13.Support multiple primary keys?">â</a></h3><p><strong>A:</strong> </p><p>For the time being, only MySQL is supported. For other types of databases, it is recommended to create a column of self incremented ID primary keys first, and change the original composite primary keys to unique keys to avoid the problem.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14">Q: 14.How to solve the error reported by HikariDataSource?<a href="#14" class="hash-link" aria-label="Direct link to Q: 14.How to solve the error reported by HikariDataSource?" title="Direct link to Q: 14.How to solve the error reported by HikariDataSource?">â</a></h3><p><strong>A:</strong></p><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Error1</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">:ClassCastException: com.sun.proxy.$Proxy153 cannot be cast to com.zaxxer.hikari.HikariDataSource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Reason</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">:Instance type conversion error during automatic proxy, injected with $Proxy153 instance, not HikariDataSource&#x27;s own or subclass instance.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Solution</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">: The Seata automatic proxy data source function uses JDK proxy to proxy DataSource. The generated proxy class extends Proxy implements DataSource can be changed by the receiver to DataSource receive implementation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.1.0 will support both JDK proxy and cglib, and cglib will also be able to switch to solve the problem.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="15">Q: 15.Can I write the configuration directly to application.properties without using the conf type configuration file?<a href="#15" class="hash-link" aria-label="Direct link to Q: 15.Can I write the configuration directly to application.properties without using the conf type configuration file?" title="Direct link to Q: 15.Can I write the configuration directly to application.properties without using the conf type configuration file?">â</a></h3><p><strong>A:</strong></p><p>At present, <code>seata-all</code> needs to use conf type <code>conf</code> files, and <code>properties</code> and <code>yml</code> type files will be supported later. At present, you can rely on <code>seata-spring-boot-starter</code> in the project, and then write the configuration item to the <code>application.properties</code> so that the conf type file is not used.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="16">Q: 16.How to package seata-server after modifying the source code?<a href="#16" class="hash-link" aria-label="Direct link to Q: 16.How to package seata-server after modifying the source code?" title="Direct link to Q: 16.How to package seata-server after modifying the source code?">â</a></h3><p><strong>A:</strong></p><ol><li>Delete the <code>bin</code>,<code>conf</code>,and <code>lib</code> directories of the <code>distribution</code> module.</li><li><code>./mvnw clean install -DskipTests=true(Mac,Linux)</code> OR <code>mvnw.cmd clean install -DskipTests=true(Win) -P release-seata</code>ã</li><li>Unzip the corresponding compressed package in the target directory of the <code>distribution</code> module.</li><li>Packaging commands after seata-1.5 (the latest development branch), <code>mvn -Prelease-seata -Dmaven.test.skip=true clean install -U</code></li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="17">Q: 17.What RPC frameworks does seata support now?<a href="#17" class="hash-link" aria-label="Direct link to Q: 17.What RPC frameworks does seata support now?" title="Direct link to Q: 17.What RPC frameworks does seata support now?">â</a></h3><p><strong>A:</strong></p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> Dubbo, Spring Cloud, Motan, gRPC , sofa-RPC , EDAS-HSF and bRPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="18">Q: 18. java.lang.NoSuchMethodError: com.alibaba.druid.sql.ast.statement .SQLSelect.getFirstQueueBlockLcom/alibaba/druid/sql/ast/statement/SQLSelectQueryBlock;<a href="#18" class="hash-link" aria-label="Direct link to Q: 18. java.lang.NoSuchMethodError: com.alibaba.druid.sql.ast.statement .SQLSelect.getFirstQueueBlockLcom/alibaba/druid/sql/ast/statement/SQLSelectQueryBlock;" title="Direct link to Q: 18. java.lang.NoSuchMethodError: com.alibaba.druid.sql.ast.statement .SQLSelect.getFirstQueueBlockLcom/alibaba/druid/sql/ast/statement/SQLSelectQueryBlock;">â</a></h3><p><strong>Aï¼</strong></p><p>The dependent version of <code>druid</code> needs to be upgraded to version <code>1.1.12 +</code>, and the default dependent version in Seata is <code>1.1.12</code> (provided).</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="19">Q: 19.NoSuchMethodError in apache-dubbo 2.7.0ï¼<a href="#19" class="hash-link" aria-label="Direct link to Q: 19.NoSuchMethodError in apache-dubbo 2.7.0ï¼" title="Direct link to Q: 19.NoSuchMethodError in apache-dubbo 2.7.0ï¼">â</a></h3><p><strong>A:</strong></p><p>When apache-dubbo loads the filter, it will load the filter of Alibaba Dubbo together, and it will be found in <code>com.alibaba.dubbo.rpc.invoker</code> in version <code>2.7.0</code>(<code>Result invoke(org.apache.dubbo.rpc.Invocation invocation) throws RpcException;</code>), Misuse of <code>org.apache.dubbo.rpc.invocation</code> to enter parameters (fixed in<code> 2.7.1</code>), resulting in <code>java.lang.NoSuchMethodError: com.alibaba.dubbo.rpc.Invoker.invoke(Lcom/alibaba/dubbo/rpc/Invocation;)Lcom/alibaba/dubbo/rpc/Result;</code></p><p>So please upgrade <code>dubbo</code> to <code>2.7.1</code> or above to ensure compatibility. It is <code>alibaba-dubbo</code> and can be used safely. <code>alibaba-dubbo</code> does not contain <code>apache-dubbo</code> packages.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="20">Q: 20.What are the precautions for using AT mode?<a href="#20" class="hash-link" aria-label="Direct link to Q: 20.What are the precautions for using AT mode?" title="Direct link to Q: 20.What are the precautions for using AT mode?">â</a></h3><p><strong>A:</strong></p><ol><li>Proxy data sources must be used. There are three forms of proxy data sources:</li></ol><ul><li>When relying on <code>seata-spring-boot-starter</code>, the data source is automatically proxied without additional processing.</li><li>When relying on <code>seata-all</code>, use @EnableAutoDatasourceProxy (since 1.1.0) annotation. JDK proxy or cglib proxy can be selected as annotation parameters.</li><li>When relying on <code>seata-all</code>, you can also manually wrap the DataSource with DatasourceProxy.</li></ul><ol start="2"><li>To configure <code>GlobalTransactionScanner</code>, you need to configure it manually when using <code>seata-all</code>, and no additional processing is required when using <code>seata-spring-boot-starter</code>.</li><li>The business table must contain a single column primary key. If there is a composite primary key, please refer to question 13.</li><li>Each business library must contain undo_ log table. If it is used in conjunction with the sub-treasury and split-table component, can be sub-treasury but cannot be split-table</li><li>Transactions across microservice links need support for the corresponding RPC framework, which is currently supported in seata-all: <code>Apache Dubbo, Alibaba Dubbo, sofa-RPC, Motan, gRpc, httpClient</code>, for support from Spring Cloud, please kindly cite <code>spring-cloud-alibaba-seata</code>. Other self research framework, asynchronous model, message consumption transaction model please support itself in combination with the API.</li><li>The databases currently supported by AT mode are: MySQL, Oracle, PostgreSQL, and TIDB.</li><li>When opening distributed transactions with annotations, provider may not annotate transactions if the default service provider side joins transactions on the consumer side.However, provider similarly requires corresponding dependencies and configurations, and only annotations may be omitted.</li><li>On opening the distributed transactions with annotations, if transactions are required to roll back, the exception must be thrown to the originator of the transaction, perceived by the @GlobalTransactional annotation of the transaction originator.Provide directly throws exceptions or defines error code to throw exceptions again as judged by consumer.</li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21">Q: 21.Why will the win system have one more empty line for the properties when configured with synchronization script?<a href="#21" class="hash-link" aria-label="Direct link to Q: 21.Why will the win system have one more empty line for the properties when configured with synchronization script?" title="Direct link to Q: 21.Why will the win system have one more empty line for the properties when configured with synchronization script?">â</a></h3><p><strong>A:</strong></p><p>It is currently known why the configuration will have a <code>\r</code>, presumably because this file you write in win, so there are permutations to <code>\r\n</code>, and then you execute it with git bash (this can be considered Linux) to recognize <code>\n</code> permutations, so there is more  <code>\r</code></p><p>The solution is currently twofold:</p><ol><li><p><code>sed -i &quot;&quot;s/\r//&quot;&quot; config.txt</code></p></li><li><p><code>vim</code> into the text with the command <code>set fileformat = unix</code> (the pro test is available)</p></li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22">Q: 22.What to note for the AT mode and Spring @Transactional annotation hyphenation?<a href="#22" class="hash-link" aria-label="Direct link to Q: 22.What to note for the AT mode and Spring @Transactional annotation hyphenation?" title="Direct link to Q: 22.What to note for the AT mode and Spring @Transactional annotation hyphenation?">â</a></h3><p><strong>A:</strong></p><p><code>@Transactional</code> can be coupled with <code>DataSourceTransactionManager</code> and <code>JTATransactionManager</code> to represent local transactions and XA distributed transactions, respectively. Common to everyone is the combination with local affairs.</p><p>When combined with local transactions<code>@Transactial</code> and <code>@GlobalTransactional</code> are hyphenated,<code>@Transactial</code> can only be located in the same method hierarchy annotated at <code>@GlobalTransaction</code> or within the inner layer of <code>@GlobalTransaction</code> annotation methods.</p><p>Here the concept of distributed transactions is larger than local transactions, annotating <code>@Transactional</code> outside results in a distributed transaction empty submission, a global transaction being submitted when the <code>@Transactional</code> corresponding connection submission is declared or the XID of the global transaction is absent.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23">Q: 23.Spring boot 1.5.x appear the Jackson related NoClassDefFoundException?<a href="#23" class="hash-link" aria-label="Direct link to Q: 23.Spring boot 1.5.x appear the Jackson related NoClassDefFoundException?" title="Direct link to Q: 23.Spring boot 1.5.x appear the Jackson related NoClassDefFoundException?">â</a></h3><p><strong>A:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Caused by: java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.ObjectMapper</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is currently found that too low a version of Jackson that was originally introduced in spring boot version 1.5.x, can cause Seata to rely on Jackson to find new features, Seata requires that the Jackson version 2.9.9+, but the use of the Jackson version 2.9.9 + version can cause the Jackson API used in spring boot to not find, and is a problem with forward compatibility in the Jackson itself. Therefore, it is recommended that you switch Seata&#x27;s serialization to non Jackson serialization, such as kryo, with the configuration term <code>client.undo.logSerialization = &quot;kryo&quot;</code></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24">Q: 24.SpringCloud xid cannot transmit?<a href="#24" class="hash-link" aria-label="Direct link to Q: 24.SpringCloud xid cannot transmit?" title="Direct link to Q: 24.SpringCloud xid cannot transmit?">â</a></h3><p><strong>A:</strong></p><ol><li>First make sure you introduce the <code>spring-cloud-alibaba-seata</code> dependency.</li><li>If XID cannot be delivered, please confirm whether you have implemented <code>WebMvcConfigurer</code>. If yes, please refer to the method of <code>com.alibaba.cloud.seata.web.seatahandlerinterceptorconfiguration#addinterceptors</code>. Add <code>SeataHandlerInterceptor</code> to your interception link</li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="25">Q: 25.undo_log cannot be deleted after using the mybatis plus dynamic data source component?<a href="#25" class="hash-link" aria-label="Direct link to Q: 25.undo_log cannot be deleted after using the mybatis plus dynamic data source component?" title="Direct link to Q: 25.undo_log cannot be deleted after using the mybatis plus dynamic data source component?">â</a></h3><p><strong>A:</strong></p><p>The <code>dynamic-datasource-spring-boot-starter</code>  component will automatically use <code>DataSourceProxy</code> to wrap the <code>DataSource</code> after opening Seata. Therefore, the following methods are required to maintain compatibility:</p><ol><li>If you imported <code>seata-all</code>, please do not use @EnableAutoDatasourceProxy annotation</li><li>If you imported <code>seata-spring-boot-starter</code>, please turn off the automatic agent</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">seata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enable-auto-data-source-proxy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="26">Q: 26. Could not found global transaction xid = %s, may be has finished.<a href="#26" class="hash-link" aria-label="Direct link to Q: 26. Could not found global transaction xid = %s, may be has finished." title="Direct link to Q: 26. Could not found global transaction xid = %s, may be has finished.">â</a></h3><p><strong>A:</strong></p><p>Examplesï¼</p><p>@GlobalTransactional(timeout=60000)
public void Aï¼ï¼{</p><p>â	call remoting B();//Remote call B service
â	local DB operation;</p><p>}</p><p>public void B(){</p><p>}</p><p>Possible causes:</p><ol><li><p>The overall execution time of service A exceeds 60000ms, causing the global transaction to initiate a global rollback. At this time, method A or B continues to execute DB operation, verify the global transaction status, and find that the global transaction has been rolled back.</p></li><li><p>When service B executes the readTimeout beyond its setting, it returns an exception to a and throws the exception, causing the global transaction to be rolled back. At this time, when service B performs the DB operation, it verifies the global transaction status and finds that the global transaction has been rolled back.</p></li></ol><p>Impact: in this case, the data will be rolled back to the initial state of the data before the execution of method A. from the perspective of data consistency, the data is consistent as a whole.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="27">Q: 27. Why does TC reported this error: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception?<a href="#27" class="hash-link" aria-label="Direct link to Q: 27. Why does TC reported this error: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception?" title="Direct link to Q: 27. Why does TC reported this error: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception?">â</a></h3><p><strong>A:</strong></p><p>This error is caused by the connection established by an abnormal Seata client (such as accessing the Seata server port through HTTP, port scanning of ECS, etc.). This connection does not send registration information and is considered a useless connection. This exception can be ignored.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="28">Q: 28. The database enables automatic update timestamp, which makes dirty data unable to be rolled back?<a href="#28" class="hash-link" aria-label="Direct link to Q: 28. The database enables automatic update timestamp, which makes dirty data unable to be rolled back?" title="Direct link to Q: 28. The database enables automatic update timestamp, which makes dirty data unable to be rolled back?">â</a></h3><p><strong>A:</strong></p><p>Due to the business submission, after Seata records the current image, the database updates the timestamp again, resulting in the failure of image verification.</p><p><strong>Solution 1:</strong> Turn off automatic timestamp update of the database. The timestamp update of data, such as modification and creation time, is maintained at the code level. For example, MybatisPlus can automatically fill in.</p><p><strong>Solution 2:</strong>UPDATE statement don&#x27;t put the fields that haven&#x27;t been updated into the update statement.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="29">Q: 29. timeoutrollching occurs before the global transaction timeout?<a href="#29" class="hash-link" aria-label="Direct link to Q: 29. timeoutrollching occurs before the global transaction timeout?" title="Direct link to Q: 29. timeoutrollching occurs before the global transaction timeout?">â</a></h3><p><strong>A:</strong></p><p>It is recommended that the time zone of TC database be inconsistent with the time zone of DB database.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="30">Q: 30. What database and table splitting solutions does Seata support at this stage?<a href="#30" class="hash-link" aria-label="Direct link to Q: 30. What database and table splitting solutions does Seata support at this stage?" title="Direct link to Q: 30. What database and table splitting solutions does Seata support at this stage?">â</a></h3><p><strong>A:</strong></p><p>Only shardingsphere is supported at this stage. With regard to the compatibility of sub-treasury and split-table with Seata, Seata supports a sub database and sub table scheme by requiring the sub-treasury and split-table framework team to provide an integrated compatibility scheme, rather than Seata. At present, Seata is communicating with each sub-treasury and split-table framework team to discuss the integration compatibility scheme.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31">Q: 31. What are the restrictions on Seata&#x27;s address registered with the registry?<a href="#31" class="hash-link" aria-label="Direct link to Q: 31. What are the restrictions on Seata&#x27;s address registered with the registry?" title="Direct link to Q: 31. What are the restrictions on Seata&#x27;s address registered with the registry?">â</a></h3><p><strong>A:</strong></p><p>The Seata registry cannot register addresses of 0.0.0.0 or 127.0.0.1. When the address is automatically registered as the above address, you can start the parameter <code>-h</code> or the container environment variable <code>SEATA_IP</code>. When the and business services are on different networks, the registered address can be specified as <code>NAT_IP</code> or <code>public network IP</code>, but it is necessary to ensure that the health inspection activities of the registration center are unobstructed.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32">Q: 32. seata-server cannot be started due to Unrecognized VM option &#x27;CMSParallelRemarkEnabled&#x27; Error: Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit.?<a href="#32" class="hash-link" aria-label="Direct link to Q: 32. seata-server cannot be started due to Unrecognized VM option &#x27;CMSParallelRemarkEnabled&#x27; Error: Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit.?" title="Direct link to Q: 32. seata-server cannot be started due to Unrecognized VM option &#x27;CMSParallelRemarkEnabled&#x27; Error: Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit.?">â</a></h3><p><strong>A:</strong></p><p>This is due to the use of a higher version of JDK. The higher version of JDK cancels the CMS processor and replaces it with ZGC.</p><p>There are two solutions. Choose one of them:</p><ol><li><p>Downgrade JDK version</p></li><li><p>Delete the JDK command of CMS in the startup script of Seata</p></li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33">Qï¼33. Why does the java.nio.ByteBuffer.flip()Ljava/nio/ByteBuffer error occur when the client&#x27;s JDK version is 1.8 when compiling and runningï¼ <a href="#33" class="hash-link" aria-label="Direct link to Qï¼33. Why does the java.nio.ByteBuffer.flip()Ljava/nio/ByteBuffer error occur when the client&#x27;s JDK version is 1.8 when compiling and runningï¼ " title="Direct link to Qï¼33. Why does the java.nio.ByteBuffer.flip()Ljava/nio/ByteBuffer error occur when the client&#x27;s JDK version is 1.8 when compiling and runningï¼ ">â</a></h3><p><strong>A:</strong></p><p>This is because the seata source code was compiled and then the local seata dependency package was overwritten. JDK 11 was used when compiling the seata source code. In JDK 11, the <code>flip()</code> method was rewritten, resulting in incompatibility.</p><p>Solution:</p><ul><li>Make sure that the JDK version is 1.8 when compiling seata source code to avoid compatibility issues</li><li>If you have compiled the source code of seata with JDK 11, please delete all packages under the io.seata path in the local maven repository. Then recompile your project and let the project re-pull the seata dependency package of the central warehouse</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/overview/terminology"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Seata Terminology</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user/quickstart"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quick Start</div></a></nav></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Vision</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Seata is ...</a></li></ul></div><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/overview/what-is-seata">What is Seata?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/user/quickstart">Quick Start</a></li><li class="footer__item"><a href="https://github.com/seata/seata.github.io/issues/new" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report a doc issue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/seata/seata.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Edit This Page on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/community">Community</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="//img.alicdn.com/tfs/TB1dGrSwVT7gK0jSZFpXXaTkpXa-4802-1285.png" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="120" height="36"><img src="//img.alicdn.com/tfs/TB1dGrSwVT7gK0jSZFpXXaTkpXa-4802-1285.png" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="120" height="36"></div><div class="footer__copyright">Copyright Â© 2023 Seata</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6888d26e.js"></script>
<script src="/assets/js/main.96f5711d.js"></script>
</body>
</html>