<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="faq" />
	<meta name="description" content="faq" />
	<!-- 网页标签标题 -->
	<title>faq</title>
  <link rel="shortcut icon" href="https://img.alicdn.com/tfs/TB1O1p6JzTpK1RjSZKPXXa3UpXa-64-64.png"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/en-us/index.html"><img class="logo" src="https://img.alicdn.com/tfs/TB1t3pWJCzqK1RjSZFjXXblCFXa-246-64.png"/></a><span class="language-switch language-switch-normal">中</span><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/en-us/index.html" target="_self">HOME</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/en-us/docs/overview/what_is_seata.html" target="_self">DOCS</a></li><li class="menu-item menu-item-normal"><a href="/en-us/blog/index.html" target="_self">BLOG</a></li><li class="menu-item menu-item-normal"><a href="/en-us/community/index.html" target="_self">COMMUNITY</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="https://img.alicdn.com/tfs/TB1cm8nJwDqK1RjSZSyXXaxEVXa-160-160.png" class="front-img"/><span>Documentation</span><img src="https://img.alicdn.com/tfs/TB1cm8nJwDqK1RjSZSyXXaxEVXa-160-160.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>Seata</span><ul><li style="height:108px;overflow:hidden" class="menu-item menu-item-level-2"><span>Overview<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/overview/what_is_seata.html" target="_self">What is Seata?</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/overview/terminology.html" target="_self">Terminology</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/quickstart.html" target="_self">Quick Start</a></li><li style="height:180px;overflow:hidden" class="menu-item menu-item-level-2"><span>User Guide<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/userguide/install_server.html" target="_self">Installing Server</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/userguide/install_client.html" target="_self">Installing Client</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/userguide/download_files.html" target="_self">Downloading Files</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/userguide/supernode_configuration.html" target="_self">Supernode Configuration</a></li></ul></li><li style="height:108px;overflow:hidden" class="menu-item menu-item-level-2"><span>CLI Reference<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/cli_ref/dfdaemon.html" target="_self">dfdaemon</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/cli_ref/dfget.html" target="_self">dfget</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/api.html" target="_self">API Reference</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/faq.html" target="_self">FAQ</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h1>FAQ</h1>
<p>Find the answers to the frequently asked questions.</p>
<h2>How can I pull images with Seata?</h2>
<p>See <a href="quickstart.md">Pulling an Image with Seata</a>.</p>
<h2>How can I download files with Seata?</h2>
<p>See <a href="quickstart.md">Downloading a File with Seata</a>.</p>
<h2>What is a SuperNode?</h2>
<p>A SuperNode is a long-time process that plays the following roles:</p>
<ul>
<li>A tracker and scheduler in the P2P network that chooses appropriate downloading net-path for each peer.</li>
<li>A CDN server that caches downloaded data from source to avoid downloading same files repeatedly.</li>
</ul>
<h2>What is dfget?</h2>
<p>Dfget is the Seata client used for downloading files. It's similar to wget.</p>
<p>Meanwhile, it also plays the role of a peer, which can transfer data between each other in the P2P network.</p>
<h2>What is dfdaemon?</h2>
<p>Dfdaemon is only used for pulling images. It establishes a proxy between dockerd/pouchd and registry.</p>
<p>Dfdaemon filters out layer fetching requests from all requests sent by dockerd/pouchd when pulling images, then uses dfget to download these layers.</p>
<h2>Where is the installation directory of Seata client dfget?</h2>
<p>Normally, there are two installation directories:</p>
<ul>
<li>Seata plugin for StarAgent: <code>/home/staragent/plugins/dragonfly/dfget</code></li>
<li>StarAgent's built-in dfget: <code>/home/staragent/bin/dfget</code></li>
</ul>
<p>The Seata plugin is used by default. If the Seata plugin is not installed, then the StarAgent's build-in dfget is used.</p>
<h2>Where is the log directory of Seata client dfget?</h2>
<p>The log directory is <code>$HOME/.small-dragonfly/logs/dfclient.log</code>.</p>
<h2>Where is the data directory of Seata client dfget?</h2>
<p>The data directory is <code>$HOME/.small-dragonfly/data</code>.</p>
<p>Each account has its own data directory. A P2P downloading job generates two data files under this directory:</p>
<ul>
<li>A temporary downloading file for the target file, with the name <code>targetFileName-sign</code>. This file is moved to the target directory after the download is complete.</li>
<li>A copy of the temporary downloading file for uploading, with the name <code>targetFileName-sign.service</code>. If no downloading jobs are downloading this file from this node, then it gets cleaned after three minutes. Before the process is completed normally, any file lasting longer than 60 minutes will be purged.</li>
</ul>
<h2>Where is the meta directory of Seata client dfget?</h2>
<p>The meta directory is <code>$HOME/.small-dragonfly/meta</code>.</p>
<p>This directory caches the address list of the local node (IP, hostname, IDC, security domain, and so on), managing nodes, and supernodes.</p>
<p>When started for the first time, the Seata client will access the managing node. The managing node will retrieve the security domains, IDC, geo-location, and more information of this node by querying armory, and assign the most suitable SuperNode. The managing node also distributes the address lists of all other supernodes. dfget stores the above information in the meta directory on the local drive. When the next job is started, dfget reads the meta information from this directory, avoiding accessing the managing node repeatedly.</p>
<p>dfget always finds the most suitable assigned node to register. If fails, it requests other supernodes in order. If all fail, then it requests the managing node once again, updates the meta information, and repeats the above steps. If still fails, then the job fails.</p>
<p><strong>Tip</strong>: If the dfclient.log suggests that the SuperNode registration fails all the time, try delete all files from the meta directory and try again.</p>
<h2>How to check the version of Seata client dfget?</h2>
<p>If you have installed the Seata client, run this command:</p>
<pre><code class="language-bash">dfget -v
</code></pre>
<h2>Why is the dfget process still there after the download is complete?</h2>
<p>Because Seata adopts a P2P downloading approach, dfget provides uploading services in addition to downloading services. If there are no new jobs within five minutes, the dfget process will be terminated automatically.</p>
<h2>How to clean up the data directory of Seata?</h2>
<p>Normally, Seata automatically cleans up files which are not accessed in three minutes from the uploading file list, and the residual files that live longer than one hour from the data directory.</p>
<p>Follow these steps to clean up the data directory manually:</p>
<ol>
<li>Identify the account to which the residual files belong.</li>
<li>Check if there is any running dfget process started by other accounts.</li>
<li>If there is such a process, then terminate the process, and start a dfget process with the account identified at Step 1. This process will automatically clean up the residual files from the data directory.</li>
</ol>
</div></section><footer class="footer-container"><div class="footer-body"><img src="https://img.alicdn.com/tfs/TB1VohYJwHqK1RjSZFgXXa7JXXa-278-72.png"/><p class="docsite-power">website powered by docsite</p><div class="cols-container"><div class="col col-12"><h3>Vision</h3><p>Seata is dedicated to improving the efficiency of large-scale file distribution, building the go-to solution and standards of container image distribution, and providing you with file and image distribution service which is efficient, easy-to-use, and of high availability.</p></div><div class="col col-6"><dl><dt>Documentation</dt><dd><a href="/en-us/docs/overview/what_is_seata.html" target="_self">What is Seata?</a></dd><dd><a href="/en-us/docs/quickstart.html" target="_self">Quick Start</a></dd></dl></div><div class="col col-6"><dl><dt>Resources</dt><dd><a href="/en-us/blog/index.html" target="_self">Blog</a></dd><dd><a href="/en-us/community/index.html" target="_self">Community</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2019 Seata</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/documentation.js"></script>
</body>
</html>
