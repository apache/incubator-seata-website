{
  "filename": "deploy-by-kubernetes.md",
  "__html": "<h1>Deploy Seata Server By Kubernetes</h1>\n<h3>Quick Start</h3>\n<p>Create file <code>seata-server.yaml</code></p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span>\n<span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Service</span>\n<span class=\"hljs-attr\">metadata:</span>\n<span class=\"hljs-attr\">  name:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">  namespace:</span> <span class=\"hljs-string\">default</span>\n<span class=\"hljs-attr\">  labels:</span>\n<span class=\"hljs-attr\">    k8s-app:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">spec:</span>\n<span class=\"hljs-attr\">  type:</span> <span class=\"hljs-string\">NodePort</span>\n<span class=\"hljs-attr\">  ports:</span>\n<span class=\"hljs-attr\">    - port:</span> <span class=\"hljs-number\">8091</span>\n<span class=\"hljs-attr\">      nodePort:</span> <span class=\"hljs-number\">30091</span>\n<span class=\"hljs-attr\">      protocol:</span> <span class=\"hljs-string\">TCP</span>\n<span class=\"hljs-attr\">      name:</span> <span class=\"hljs-string\">http</span>\n<span class=\"hljs-attr\">  selector:</span>\n<span class=\"hljs-attr\">    k8s-app:</span> <span class=\"hljs-string\">seata-server</span>\n\n<span class=\"hljs-meta\">---</span>\n\n<span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps/v1</span>\n<span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Deployment</span>\n<span class=\"hljs-attr\">metadata:</span>\n<span class=\"hljs-attr\">  name:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">  namespace:</span> <span class=\"hljs-string\">default</span>\n<span class=\"hljs-attr\">  labels:</span>\n<span class=\"hljs-attr\">    k8s-app:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">spec:</span>\n<span class=\"hljs-attr\">  replicas:</span> <span class=\"hljs-number\">1</span>\n<span class=\"hljs-attr\">  selector:</span>\n<span class=\"hljs-attr\">    matchLabels:</span>\n<span class=\"hljs-attr\">      k8s-app:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">  template:</span>\n<span class=\"hljs-attr\">    metadata:</span>\n<span class=\"hljs-attr\">      labels:</span>\n<span class=\"hljs-attr\">        k8s-app:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">    spec:</span>\n<span class=\"hljs-attr\">      containers:</span>\n<span class=\"hljs-attr\">        - name:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">          image:</span> <span class=\"hljs-string\">docker.io/seataio/seata-server:latest</span>\n<span class=\"hljs-attr\">          imagePullPolicy:</span> <span class=\"hljs-string\">IfNotPresent</span>\n<span class=\"hljs-attr\">          env:</span>\n<span class=\"hljs-attr\">            - name:</span> <span class=\"hljs-string\">SEATA_PORT</span>\n<span class=\"hljs-attr\">              value:</span> <span class=\"hljs-string\">\"8091\"</span>\n<span class=\"hljs-attr\">            - name:</span> <span class=\"hljs-string\">STORE_MODE</span>\n<span class=\"hljs-attr\">              value:</span> <span class=\"hljs-string\">file</span>\n<span class=\"hljs-attr\">          ports:</span>\n<span class=\"hljs-attr\">            - name:</span> <span class=\"hljs-string\">http</span>\n<span class=\"hljs-attr\">              containerPort:</span> <span class=\"hljs-number\">8091</span>\n<span class=\"hljs-attr\">              protocol:</span> <span class=\"hljs-string\">TCP</span>\n</code></pre>\n<pre><code class=\"language-bash\">$ kubectl apply -f seata-server.yaml\n</code></pre>\n<h2>Custom configuration</h2>\n<h3>Environment</h3>\n<p>The environment is same with Docker, can reference <a href=\"./deploy-by-docker.md\">Deploy Seata Server By Docker</a></p>\n<h3>Use specify configuration file</h3>\n<p>Can specify configuration file by mount files, like mount files under <code>/root/workspace/seata/seata-config/file</code> to pod. And need specify environment <code>SEATA_CONFIG_NAME</code> also, the value need start with <code>file:</code>, like <code>file:/root/seata-config/registry</code></p>\n<ul>\n<li>Deployment</li>\n</ul>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps/v1</span>\n<span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Deployment</span>\n<span class=\"hljs-attr\">metadata:</span>\n<span class=\"hljs-attr\">  name:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">  namespace:</span> <span class=\"hljs-string\">default</span>\n<span class=\"hljs-attr\">  labels:</span>\n<span class=\"hljs-attr\">    k8s-app:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">spec:</span>\n<span class=\"hljs-attr\">  replicas:</span> <span class=\"hljs-number\">1</span>\n<span class=\"hljs-attr\">  selector:</span>\n<span class=\"hljs-attr\">    matchLabels:</span>\n<span class=\"hljs-attr\">      k8s-app:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">  template:</span>\n<span class=\"hljs-attr\">    metadata:</span>\n<span class=\"hljs-attr\">      labels:</span>\n<span class=\"hljs-attr\">        k8s-app:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">    spec:</span>\n<span class=\"hljs-attr\">      containers:</span>\n<span class=\"hljs-attr\">        - name:</span> <span class=\"hljs-string\">seata-server</span>\n<span class=\"hljs-attr\">          image:</span> <span class=\"hljs-string\">docker.io/seataio/seata-server:latest</span>\n<span class=\"hljs-attr\">          imagePullPolicy:</span> <span class=\"hljs-string\">IfNotPresent</span>\n<span class=\"hljs-attr\">          env:</span>\n<span class=\"hljs-attr\">            - name:</span> <span class=\"hljs-string\">SEATA_PORT</span>\n<span class=\"hljs-attr\">              value:</span> <span class=\"hljs-string\">\"8091\"</span>\n<span class=\"hljs-attr\">            - name:</span> <span class=\"hljs-string\">STORE_MODE</span>\n<span class=\"hljs-attr\">              value:</span> <span class=\"hljs-string\">file</span>\n<span class=\"hljs-attr\">            - name:</span> <span class=\"hljs-string\">SEATA_CONFIG_NAME</span>\n<span class=\"hljs-attr\">              value:</span> <span class=\"hljs-attr\">file:/root/seata-config/registry</span>\n<span class=\"hljs-attr\">          ports:</span>\n<span class=\"hljs-attr\">            - name:</span> <span class=\"hljs-string\">http</span>\n<span class=\"hljs-attr\">              containerPort:</span> <span class=\"hljs-number\">8091</span>\n<span class=\"hljs-attr\">              protocol:</span> <span class=\"hljs-string\">TCP</span>\n<span class=\"hljs-attr\">          volumeMounts:</span>\n<span class=\"hljs-attr\">            - name:</span> <span class=\"hljs-string\">seata-config</span>\n<span class=\"hljs-attr\">              mountPath:</span> <span class=\"hljs-string\">/root/seata-config</span>\n<span class=\"hljs-attr\">      volumes:</span>\n<span class=\"hljs-attr\">        - name:</span> <span class=\"hljs-string\">seata-config</span>\n<span class=\"hljs-attr\">          hostPath:</span>\n<span class=\"hljs-attr\">            path:</span> <span class=\"hljs-string\">/root/workspace/seata/seata-config/file</span>\n</code></pre>\n",
  "link": "/en-us/docs/ops/deploy-by-kubernetes.html",
  "meta": {
    "hidden": "true",
    "title": "Deploy Seata Server By Kubernetes",
    "keywords": "kubernetes,ops",
    "description": "Deploy Seata Server By Kubernetes",
    "author": "helloworlde",
    "date": "2019-12-01"
  }
}